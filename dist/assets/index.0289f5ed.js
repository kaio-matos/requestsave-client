var It=Object.defineProperty,Vt=Object.defineProperties;var $t=Object.getOwnPropertyDescriptors;var ke=Object.getOwnPropertySymbols;var ot=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var We=(r,e,a)=>e in r?It(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,g=(r,e)=>{for(var a in e||(e={}))ot.call(e,a)&&We(r,a,e[a]);if(ke)for(var a of ke(e))st.call(e,a)&&We(r,a,e[a]);return r},w=(r,e)=>Vt(r,$t(e));var k=(r,e)=>{var a={};for(var n in r)ot.call(r,n)&&e.indexOf(n)<0&&(a[n]=r[n]);if(r!=null&&ke)for(var n of ke(r))e.indexOf(n)<0&&st.call(r,n)&&(a[n]=r[n]);return a};var de=(r,e,a)=>(We(r,typeof e!="symbol"?e+"":e,a),a);import{j as t,B as p,C as Qt,a as _t,r as f,u as ae,b as Y,c as M,R as $,d as h,F as G,A as xe,T as A,L as z,e as T,f as E,g as it,h as V,i as K,k as be,l as Le,m as O,n as F,o as L,p as Ie,G as W,q as _,S as Wt,s as zt,t as Ut,v as Bt,w as Gt,x as Ht,N as Ke,y as jt,P as J,z as lt,D as ct,E as ut,H as dt,I as Yt,J as Jt,K as Kt,M as Xt,O as Zt,Q as er,U as tr,V as rr,W as ar,X as nr,Y as Se,Z as fe,_ as or,$ as sr,a0 as ir,a1 as lr,a2 as cr,a3 as ur,a4 as dr,a5 as mr,a6 as fr,a7 as he,a8 as Pe,a9 as De,aa as Ae,ab as Ne,ac as qe,ad as Nt,ae as qt,af as Rt,ag as Ot,ah as hr,ai as pr,aj as Xe,ak as gr,al as xr,am as vr,an as yr,ao as Er,ap as Ve,aq as $e,ar as wr,as as Cr,at as br,au as Sr,av as Pr,aw as Dr,ax as Ar,ay as Nr,az as qr,aA as Rr}from"./vendor.d02e7477.js";const Or=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}};Or();function H({loading:r}){return t(p,{display:"flex",justifyContent:"center",marginTop:2,children:t(Qt,{style:r?{opacity:1}:{opacity:0},variant:"indeterminate"})})}const Tr="http://localhost:3333/api",D=_t.create({baseURL:Tr,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),U="account",mt="panel",b={account:{login:`${U}/login`,logout:`${U}/logout`,delete:`${U}`,edit:`${U}`,register:`${U}/register`,confirmRegistration:`${U}/confirmregistration`,resendRegisterConfirmation:`${U}/resendregisterconfirmation`,checkJWT:`${U}/checktoken`,forget:`${U}/forgetpassword`,forgetResetpassword:`${U}/forgetresetpassword`,resetpassword:`${U}/resetpassword`},admin:{user:`${mt}/user`,accountTie:`${mt}/accounttie`},models:{request:"/panel/request",client:"/panel/client",product:"/panel/product"}};class Fr{async login(e){return(await D.post(b.account.login,e)).data}async forgetPasswordEmail(e){return(await D.post(b.account.forget,e)).data}async forgetResetpassword(e){return(await D.post(b.account.forgetResetpassword,e)).data}async resetPassword(e){return(await D.post(b.account.resetpassword,e)).data}async register(e){return(await D.post(b.account.register,e)).data}async confirmRegistration(e){return(await D.get(b.account.confirmRegistration,{params:e?g({},e):{}})).data}async resendRegisterEmail(e){return(await D.post(b.account.resendRegisterConfirmation,e)).data}async delete(){return(await D.delete(b.account.delete)).data}async editDocument(e){return(await D.put(b.account.edit,e)).data}async logout(){return(await D.post(b.account.logout)).data}async checkJWT(e){return(await D.post(b.account.checkJWT,{},{headers:{"authorization-token":e}})).data}}const X=new Fr,Tt=f.exports.createContext({});function Mr({children:r}){const[e,a]=f.exports.useState({}),n=ae();f.exports.useEffect(()=>{function i(){const c=localStorage.getItem("account");c&&a(JSON.parse(c))}return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[]),f.exports.useEffect(()=>{const i=Y.get("token");!i||(D.defaults.headers.common["authorization-token"]=i)},[Y.get("token")]),f.exports.useEffect(()=>localStorage.setItem("account",JSON.stringify(e)),[e]);function s(){Y.remove("token"),Y.remove("role"),localStorage.removeItem("account"),n.push("/login")}function o(i){!i||(a(i),n.push("/panel"))}return t(Tt.Provider,{value:{account:e,setAccount:a,logout:s,login:o},children:r})}const Re=()=>f.exports.useContext(Tt);function kr(r){const u=r,{children:e}=u,a=k(u,["children"]),n=Y.get("token"),{logout:s}=Re(),{isLoading:o,isSuccess:i,mutate:c}=M(X.checkJWT,{onError:({response:v})=>s()});f.exports.useEffect(()=>{n?c(n):s()},[history,n]);function l({location:v}){return h(G,{children:[o?t(H,{loading:o}):"",i&&!o?e:""]})}return t($,w(g({},a),{children:l}))}function le(r){const[e,a]=f.exports.useState(r),n=f.exports.useRef({toggle(){a(o=>!o)},on(){a(!0)},off(){a(!1)}});return[e,n.current]}const Lr={message:"",show:!1};function ve({error:r}){const[e,a]=le(!1),n=5e3;return f.exports.useEffect(()=>{r&&r.show&&e===!1&&(a.on(),setTimeout(()=>{a.off()},n))},[r]),t(xe,{style:e?{opacity:1}:{opacity:0},severity:"error",children:e?r==null?void 0:r.message:"_________"})}function ye(){return h(A,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xA9 ",t(z,{color:"inherit",href:"#",children:"Website"})," ",new Date().getFullYear(),"."]})}var Ft=(r=>(r.USER="USER",r.ADMIN="ADMIN",r))(Ft||{});const Ue=[{code:"USER",type:"Usu\xE1rio"},{code:"ADMIN",type:"Administrador"}];var Q=(r=>(r.TODO="TODO",r.GRAPHIC="GRAPHIC",r.DEALING="DEALING",r.CANCELLED="CANCELLED",r.COMPLETED="COMPLETED",r))(Q||{});const Ce=[{code:"TODO",type:"A fazer",color:"brown"},{code:"GRAPHIC",type:"Gr\xE1fica",color:"yellow"},{code:"DEALING",type:"Negociando",color:"blue"},{code:"CANCELLED",type:"Cancelado",color:"red"},{code:"COMPLETED",type:"Completo",color:"green"}],Oe={noRowsLabel:"Sem linhas",noResultsOverlayLabel:"Nenhum resultado encontrado.",errorOverlayDefaultLabel:"Um erro ocorreu.",columnMenuLabel:"Op\xE7\xF5es",columnMenuShowColumns:"Mostrar Colunas",columnMenuFilter:"Filtrar",columnMenuHideColumn:"Esconder",columnMenuUnsort:"Desordenar",columnMenuSortAsc:"Organizar ASC",columnMenuSortDesc:"Organizar DESC",columnsPanelTextFieldLabel:"Encontrar coluna",columnsPanelTextFieldPlaceholder:"T\xEDtulo da coluna",columnsPanelDragIconLabel:"Reordenar coluna",columnsPanelShowAllButton:"Mostrar todos",columnsPanelHideAllButton:"Esconder todos",toolbarColumns:"Colunas",toolbarColumnsLabel:"Selecionar colunas",toolbarFilters:"Filtros",toolbarFiltersLabel:"Mostrar filtros",toolbarFiltersTooltipHide:"Esconder filtros",toolbarFiltersTooltipShow:"Mostrar filtros",filterPanelAddFilter:"Adicionar filtro",filterPanelDeleteIconLabel:"Apagar filtro",filterPanelOperators:"Operadores",filterPanelOperatorAnd:"E",filterPanelOperatorOr:"Ou",filterPanelColumns:"Coluna",filterPanelInputLabel:"Valor",filterPanelInputPlaceholder:"Valor do filtro",filterOperatorContains:"cont\xE9m",filterOperatorEquals:"igual",filterOperatorStartsWith:"come\xE7a com",filterOperatorEndsWith:"termina com",filterOperatorIs:"\xE9",filterOperatorNot:"n\xE3o \xE9",filterOperatorAfter:"depois",filterOperatorOnOrAfter:"\xE9 em ou depois",filterOperatorBefore:"antes",filterOperatorOnOrBefore:"\xE9 em ou antes",filterOperatorIsEmpty:"campo em branco",filterOperatorIsNotEmpty:"campo n\xE3o est\xE1 em branco",toolbarDensity:"Densidade",toolbarDensityLabel:"Densidade",toolbarDensityCompact:"Compacto",toolbarDensityStandard:"Padr\xE3o",toolbarDensityComfortable:"Confort\xE1vel",toolbarExport:"Exportar",toolbarExportLabel:"Exportar",toolbarExportCSV:"Baixar como CSV"},ze=6;class Ir{async login(e){if(e.email.toLowerCase()==="admin"&&e.password.toLowerCase()==="admin")return!0;const a=T({email:E().email("Descreva um email v\xE1lido").min(3,"O email deve ser maior ou igual a 6 caracteres").max(100).required("O email \xE9 obrigat\xF3ria"),password:E().min(ze,"O email deve ser maior ou igual a 6 caracteres").max(200).required("O email \xE9 obrigat\xF3ria")});try{return await a.validate(e),!0}catch(n){return n}}async changeNames(e){const a=T({firstName:E().min(3,"O nome deve ter pelo menos 3 letras").required(),lastName:E().min(3,"O nome deve ter pelo menos 3 letras").required()});try{return await a.validate(e),!0}catch(n){return n}}async changePassword(e){const a=T({password:E().min(ze,"A senha deve ser maior ou igual a 6 caracteres").max(200).required("A senha \xE9 obrigat\xF3ria"),confirmPassword:E().oneOf([it("password"),null],"As senhas devem ser iguais")});try{return await a.validate(e),!0}catch(n){return n}}async register(e){const a=T({firstName:E().required("Descreva o primeiro nome"),lastName:E().required("Descreva o sobrenome"),email:E().email().required("Descreva o email"),password:E().required("Descreva a senha"),phoneNumber:E().phone("BR",void 0,"O n\xFAmero n\xE3o est\xE1 dentro dos padr\xF5es").required("Descreva o n\xFAmero")});try{return await a.validate(e),!0}catch(n){return n}}async resendRegisterEmail(e){const a=T({email:E().email().required("Descreva seu email")});try{return await a.validate(e),!0}catch(n){return n}}async confirmRegistration(e){const a=T({email:E().email("O email recebido \xE9 inv\xE1lido").required("Houve um erro: Faltou email de confirma\xE7\xE3o"),token:E().required("Houve um erro: Faltou token de confirma\xE7\xE3o")});try{return await a.validate(e),!0}catch(n){return n}}async forgetPasswordEmail(e){const a=T({email:E().email("O email descrito \xE9 inv\xE1lido").required("Por favor descreva o email")});try{return await a.validate(e),!0}catch(n){return n}}async forgetPasswordCheckCode(e){const a=T({code:E().length(7,"O c\xF3digo deve ter pelo menos 7 caracteres").required("Por favor descreva o c\xF3digo")});try{return await a.validate(e),!0}catch(n){return n}}async forgetResetpassword(e){const a=T({email:E().email("O email descrito \xE9 inv\xE1lido").required("Descreva o email"),code:E().required("\xC9 necess\xE1rio o c\xF3digo para o reset de senha"),password:E().min(ze,"A senha deve ser maior ou igual a 6 caracteres").max(200).required("A senha \xE9 obrigat\xF3ria"),confirmPassword:E().oneOf([it("password"),null],"As senhas devem ser iguais")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),accountTie_id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID do V\xEDnculo"),firstName:E().required("Erro de valida\xE7\xE3o, faltou: Primeiro nome"),lastName:E().required("Erro de valida\xE7\xE3o, faltou: Sobrenome"),email:E().email("Escreva um email v\xE1lido").required("Erro de valida\xE7\xE3o, faltou: Email"),role:E().equals(Ue.map(n=>n.code),"O cargo pode ser apenas: Administrador ou Usu\xE1rio").required("Erro de valida\xE7\xE3o, faltou: Cargo")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var B=new Ir;function Vr(r){return M(X.login,r)}function $r(r){return M(X.editDocument,r)}function Qr(r){return M(X.register,r)}function _r(r){return M(X.resendRegisterEmail,r)}function Wr(r){return M(X.confirmRegistration,r)}function zr(r){return M(X.forgetPasswordEmail,r)}function Ur(r){return M(X.forgetResetpassword,r)}function Br(){const[r,e]=f.exports.useState(!1),[a,n]=f.exports.useState(),s=ae(),{login:o}=Re(),{control:i,getValues:c}=K(),{isLoading:l,mutate:u}=Vr({onError({response:x}){n({message:x.data.meta.cause,show:!0}),s.push("/login")},onSuccess(x){o(x.data),n({message:"",show:!1})}}),v=async()=>{const{email:x,password:y}=c(),S=await B.login({email:x,password:y});S===!0?u({email:x,password:y}):n({message:S.message,show:!0})},d=x=>{if(x.key==="Enter")return v()},m=()=>{e(!r)},P=()=>(document.addEventListener("keydown",d),function(){document.removeEventListener("keydown",d)});return f.exports.useEffect(P),h(p,{className:"paper",children:[t(be,{className:"avatar",children:t(Le,{})}),t(A,{component:"h1",variant:"h5",children:"Entrar"}),t(O,{control:i,defaultValue:"",name:"email",render:({field:x})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email",autoFocus:!0},x))}),t(O,{control:i,defaultValue:"",name:"password",render:({field:x})=>t(F,g({type:r?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Senha",id:"password",autoComplete:"current-password"},x))}),t(L,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:v,children:"Entrar"}),h(p,{display:"flex",justifySelf:"flex-start",alignItems:"center",width:"100%",children:[t(Ie,{checked:r,color:"primary",onChange:m}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]}),h(p,{marginBottom:2,children:[t(ve,{error:a}),t(H,{loading:l})]}),h(W,{container:!0,justifyContent:"center",spacing:5,children:[t(W,{item:!0,children:t(z,{component:_,to:"/forget",variant:"body2",children:"Esqueceu a senha?"})}),t(W,{item:!0,sm:5,style:{textAlign:"center"},children:t(z,{component:_,to:"/resendemail",variant:"body2",children:"N\xE3o confirmou o email? Enviar novamente"})}),t(W,{item:!0,children:t(z,{component:_,to:"/register",variant:"body2",children:"Criar conta"})})]}),t(p,{style:{position:"absolute",bottom:50},children:t(ye,{})})]})}function Gr(r,e){return e[r]?e[r].step:t(G,{})}function Hr({components:r}){const[e,a]=f.exports.useState(0),n=()=>{r[e]&&r[e].onClick(()=>{a(o=>o+1===r.length?o:o+1)})},s=()=>{a(o=>o-1)};return h(p,{marginY:3,children:[t(Wt,{activeStep:e,alternativeLabel:!0,children:r.map(({label:o})=>t(zt,{children:t(Ut,{children:o})},o))}),h("div",{children:[Gr(e,r),h("div",{children:[t(L,{disabled:e===0,onClick:s,className:"backButton",children:"Voltar"}),t(L,{variant:"contained",color:"primary",onClick:n,children:e===r.length-1?"Finalizar":"Pr\xF3ximo"})]})]})]})}function Ze(n){var s=n,{message:r,children:e}=s,a=k(s,["message","children"]);const[o,i]=le(!1),c=5e3;return f.exports.useEffect(()=>{if(!(r==null?void 0:r.message)||o!==!1)return;i.on();const l=setTimeout(()=>{i.off()},c);return()=>clearTimeout(l)},[r]),t(xe,w(g({},a),{style:o?{opacity:1}:{opacity:0},severity:r==null?void 0:r.severity,children:e}))}function jr(){const[r,e]=f.exports.useState(),[a,n]=f.exports.useState(!1),[s,o]=f.exports.useState({message:"",severity:"success"}),{control:i,getValues:c}=K(),l=ae(),u=({response:q})=>{o({severity:"error",message:q.data.meta.cause})},{mutateAsync:v,isLoading:d}=zr({onError:u,onSuccess(){r&&r(),o({severity:"success",message:"Email enviado com sucesso"})}}),{mutate:m,isLoading:P}=Ur({onError:u,onSuccess(){o({severity:"success",message:"Senha alterada com sucesso"}),setTimeout(()=>{l.push("/login")},3e3)}}),x=q=>n(!a);function y(){return h(p,{component:"form",className:"form",method:"POST",children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Insira seu email"})}),t(O,{control:i,defaultValue:"",name:"email",render:({field:q})=>t(F,g({error:(s==null?void 0:s.severity)==="error",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",autoComplete:"email",autoFocus:!0},q))})]})}function S(){return h(p,{component:"form",className:"form",method:"POST",children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Insira o c\xF3digo que enviamos para o seu email"})}),t(O,{control:i,defaultValue:"",name:"code",render:({field:q})=>t(F,g({error:(s==null?void 0:s.severity)==="error",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"C\xF3digo",autoComplete:"code",autoFocus:!0},q))})]})}function C(){return h(p,{component:"form",className:"form",method:"POST",children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Insira sua nova senha"})}),t(O,{control:i,defaultValue:"",name:"password",render:({field:q})=>t(F,g({error:(s==null?void 0:s.severity)==="error",type:a?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Nova senha"},q))}),t(O,{control:i,defaultValue:"",name:"confirmPassword",render:({field:q})=>t(F,g({error:(s==null?void 0:s.severity)==="error",type:a?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirme a senha"},q))}),h(p,{display:"flex",alignItems:"center",marginY:1,children:[t(Ie,{checked:a,color:"primary",onChange:x}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]})]})}const I=async q=>{const j=c().email,te=await B.forgetPasswordEmail({email:j});if(te!==!0)return o({severity:"error",message:te.message});await v({email:j}),e(q)},ne=async q=>{const j=c().code,te=await B.forgetPasswordCheckCode({code:j});if(te!==!0)return o({severity:"error",message:te.message});e(q),o({message:"O c\xF3digo est\xE1 dentro dos padr\xF5es",severity:"success"})},Z=async q=>{const nt=c(),{confirmPassword:j,code:te}=nt,rt=k(nt,["confirmPassword","code"]),at=await B.forgetResetpassword(w(g({},rt),{confirmPassword:j,code:te}));if(at!==!0)return o({severity:"error",message:at.message});m(w(g({},rt),{token:te})),e(q)};return h("div",{children:[t(p,{position:"absolute",m:2,children:t(Bt,{component:_,to:"/login",color:"primary","aria-label":"Voltar",size:"small",children:t(Gt,{fontSize:"small"})})}),h(p,{className:"paper",children:[t(be,{className:"avatar",children:t(Le,{})}),t(A,{component:"h1",variant:"h5",children:"Mudar senha"}),t(Hr,{components:[{step:t(y,{}),label:"Insira seu email",onClick:q=>I(q)},{step:t(S,{}),label:"Confirme o c\xF3digo",onClick:q=>ne(q)},{step:t(C,{}),label:"Altere sua senha",onClick:q=>Z(q)}]}),t(Ze,{message:s,children:s.message}),t(H,{loading:d||P}),t(p,{style:{position:"absolute",bottom:50},children:t(ye,{})})]})]})}function Yr(){return h(p,{className:"paper",sx:{height:"90%",justifyContent:"center",alignItems:"center"},children:[t(p,{display:"flex",justifyContent:"center",children:t(be,{className:"avatar",children:t(Ht,{})})}),h(A,{component:"h1",variant:"h6",children:["Email enviado com sucesso,",t("br",{}),"cheque sua caixa de entrada."]}),h(p,{sx:{display:"flex",gap:2},children:[t(z,{to:"/resendemail",component:_,children:t(L,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",children:"Enviar email novamente"})}),t(z,{to:"/login",component:_,children:t(L,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",children:"Entrar"})})]}),t(p,{style:{position:"absolute",bottom:50},children:t(ye,{})})]})}function Mt({label:r,required:e,field:a}){const v=a,{onChange:n,ref:s}=v,o=k(v,["onChange","ref"]),[i,c]=f.exports.useState(""),l=f.exports.useRef(null),u=f.exports.forwardRef(function(m,P){const S=m,{onChange:x}=S,y=k(S,["onChange"]);return t(Ke,w(g({},y),{getInputRef:P,onValueChange:C=>{x({target:{name:m.name,value:C.formattedValue}})},type:"tel",format:"(##) #####-####",mask:""}))});return f.exports.useEffect(()=>{var d;if(i){const m=(d=l.current)==null?void 0:d.children[1].children[0];m==null||m.focus()}},[i]),t(F,g({ref:l,variant:"outlined",margin:"normal",fullWidth:!0,type:"text",label:r,autoComplete:"off",required:e,onChange:d=>{c(d.target.value),n(d)},InputProps:{inputComponent:u}},o))}T().shape({firstName:E().required(),lastName:E().required(),email:E().email().required(),password:E().required(),phoneNumber:E().length(15).required()});function Jr(){const[r,e]=f.exports.useState(!1),[a,n]=f.exports.useState(!1),[s,o]=f.exports.useState(),{control:i,getValues:c}=K(),{mutate:l,isLoading:u}=Qr({onError({response:m}){n(!1),o({message:m.data.meta.cause,show:!0})},onSuccess(m){n(!0),o({message:"",show:!1})}}),v=m=>{e(!r)},d=async()=>{const m=c(),P=await B.register(m);if(P!==!0)return o({message:P.message,show:!0});if(m.password!==m.confirmPassword)return o({message:"As duas senhas n\xE3o est\xE3o iguais",show:!0});if(m.password.length<6)return o({message:"A senha deve ser maior que 6 caracteres",show:!0});const S=m,{confirmPassword:x}=S,y=k(S,["confirmPassword"]);l(y)};return f.exports.useEffect(()=>{const m=P=>{if(P.key==="Enter")return d()};return document.addEventListener("keydown",m),function(){document.removeEventListener("keydown",m)}}),t(G,{children:a?t(Yr,{}):h(p,{className:"paper",children:[t(be,{className:"avatar",children:t(Le,{})}),t(A,{component:"h1",variant:"h5",children:"Registrar"}),h(p,{component:"form",className:"form",method:"POST",style:{position:"relative"},children:[t(O,{control:i,defaultValue:"",name:"firstName",render:({field:m})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"Primeiro Nome",autoComplete:"firstName",autoFocus:!0},m))}),t(O,{control:i,defaultValue:"",name:"lastName",render:({field:m})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Sobrenome",autoComplete:"lastName"},m))}),t(O,{control:i,defaultValue:"",name:"email",render:({field:m})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email"},m))}),t(O,{name:"phoneNumber",control:i,defaultValue:"",render:({field:m})=>t(Mt,{label:"N\xFAmero de telefone",error:{message:"",show:!1},required:!0,field:m})}),t(O,{control:i,defaultValue:"",name:"password",render:({field:m})=>t(F,g({type:r?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Senha",id:"password",autoComplete:"current-password"},m))}),t(O,{control:i,defaultValue:"",name:"confirmPassword",render:({field:m})=>t(F,g({type:r?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirmar senha",autoComplete:"current-password"},m))}),h(p,{display:"flex",justifySelf:"flex-start",alignItems:"center",children:[t(Ie,{checked:r,color:"primary",onChange:v}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]}),t(L,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:d,children:"Registrar"}),h(p,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:2,children:[t(ve,{error:s}),t(H,{loading:u})]}),t(W,{container:!0,children:t(W,{item:!0,children:t(z,{component:_,to:"/login",variant:"body2",children:"Entrar"})})}),t(p,{style:{position:"absolute",bottom:25},children:t(ye,{})})]})]})})}function Kr(){const[r,e]=f.exports.useState({severity:"error",message:""}),{mutate:a,isLoading:n}=Wr({onError({response:o}){e({severity:"error",message:o.data.meta.cause})},onSuccess(){e({severity:"success",message:"Email confirmado com sucesso"})}}),s=ae();return f.exports.useEffect(()=>{(async()=>{const i=new URLSearchParams(s.location.search),c=i.get("email"),l=i.get("token"),u={email:c,token:l},v=await B.confirmRegistration(u);if(v!==!0)return e({severity:"error",message:v.message});a(u)})()},[s.location.search]),t("div",{className:"paper",style:{justifyContent:"center",height:"100vh",marginTop:0,marginBottom:0},children:n?t(H,{loading:n}):h("div",{children:[t(Ze,{sx:{marginY:2},message:r,children:t(A,{fontSize:"1.3rem",component:"h1",children:r.message})}),t(z,{to:"/login",component:_,children:t(L,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",children:"Entrar"})}),t(p,{style:{position:"absolute",bottom:50},children:t(ye,{})})]})})}function Xr(){const[r,e]=f.exports.useState({severity:"error",message:""}),{control:a,getValues:n}=K(),{mutate:s,isLoading:o,isSuccess:i}=_r({onError({response:u}){e({severity:"error",message:u.data.meta.cause})},onSuccess(){e({severity:"success",message:"Email enviado com sucesso"})}}),c=ae(),l=async()=>{const u=n(),v=await B.resendRegisterEmail(u);if(v!==!0)return e({severity:"error",message:v.message});s(u)};return f.exports.useEffect(()=>{const u=v=>{if(v.key==="Enter")return l()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)}),f.exports.useEffect(()=>{if(!i)return;const u=setTimeout(()=>{c.push("/login")},5e3);return()=>clearTimeout(u)},[i]),h(p,{className:"paper",children:[t(be,{className:"avatar",children:t(Le,{})}),t(A,{component:"h1",variant:"h5",children:"Reenviar email de verifica\xE7\xE3o"}),h(p,{component:"form",className:"form",method:"POST",style:{position:"relative"},children:[t(O,{control:a,defaultValue:"",name:"email",render:({field:u})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email",autoFocus:!0},u))}),t(L,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:l,children:"Reenviar email de confirma\xE7\xE3o"}),h(p,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:1,children:[t(H,{loading:o}),t(Ze,{message:r,children:r.message})]}),h(W,{container:!0,children:[t(W,{item:!0,children:t(z,{component:_,to:"/login",variant:"body2",children:"Entrar"})}),t(W,{item:!0,marginX:2,children:t(ye,{})})]})]})]})}function Zr(){return h(W,{container:!0,component:"main",className:"root",children:[t(jt,{}),t(W,{item:!0,xs:!1,sm:4,md:7,className:"image"}),h(W,{item:!0,xs:12,sm:8,md:5,component:J,elevation:6,square:!0,children:[t($,{path:"/login",children:t(Br,{})}),t($,{path:"/register",children:t(Jr,{})}),t($,{path:"/forget",children:t(jr,{})}),t($,{path:"/confirmregistration",children:t(Kr,{})}),t($,{path:"/resendemail",children:t(Xr,{})})]})]})}const me=(r,e,a)=>({label:r,icon:e,link:a});function ea(){const{logout:r}=Re(),e=Y.get("role")==="ADMIN",a=[me("Painel",t(Zt,{}),"/panel"),me("Clientes",t(Jt,{}),"/panel/clients"),me("Produtos",t(Kt,{}),"/panel/products"),me("Conta",t(Xt,{}),"/panel/account")];function n(){const o=[me("Usu\xE1rios",t(er,{}),"/panel/admin/users"),me("N\xFAmeros",t(tr,{}),"/panel/admin/accountties")];return t(p,{children:t(lt,{sx:{display:"flex"},children:o.map((i,c)=>t(z,{to:i.link,component:_,children:h(ct,{button:!0,sx:{padding:"0.3rem 1rem !important",width:"100%"},children:[t(ut,{children:i.icon}),t(dt,{primary:i.label})]})},i.label))})})}function s(){return h(p,{role:"presentation",sx:{display:"flex",justifyContent:"space-between"},children:[t(lt,{sx:{display:"flex"},children:a.map((o,i)=>t(z,{to:o.link,component:_,children:h(ct,{button:!0,sx:{padding:"0.3rem 1rem !important",width:"100%"},children:[t(ut,{children:o.icon}),t(dt,{primary:o.label})]})},o.label))}),e?t(n,{}):"",t(L,{startIcon:t(Yt,{}),variant:"text",color:"error",onClick:r,sx:{padding:"0.3rem 1rem !important",width:"fit-content"},children:"Sair"})]})}return t(s,{})}function ta(r){const l=r,{children:e}=l,a=k(l,["children"]),n=Y.get("role"),[s,o]=le(!1),i=ae();f.exports.useEffect(()=>{async function u(){n?n===Ft.ADMIN?o.on():(o.off(),i.push("/panel")):(o.off(),i.push("/login"))}u()},[i,n]);function c({location:u}){return t(G,{children:s?e:""})}return t($,w(g({},a),{children:c}))}function Te(){return t(rr,{children:t("div",{style:{position:"absolute",top:0,width:"100%"},children:t(ar,{})})})}const N=new nr;class ra{constructor(){de(this,"action",b.models.request)}async createDocument(e){return(await D.post(b.models.request,e)).data}async deleteDocument({id:e}){return(await D.delete(`${b.models.request}/${e}`)).data}async editDocument(n){var s=n,{id:e}=s,a=k(s,["id"]);return(await D.put(`${b.models.request}/${e}`,a)).data}async getDocument(e,a=""){return(await D.get(b.models.request,{params:w(g({},e),{search:a})})).data.data}}const Fe=new ra,re="requests";function aa(r,e="",a){return Se([re,r,e],()=>Fe.getDocument(r,e),g({initialData:()=>{const n=N.getQueryData(re);return n||{quantity:0,table:[]}},refetchOnWindowFocus:!1,keepPreviousData:!0},a))}function na(r){N.prefetchQuery([re,r],()=>Fe.getDocument(r))}async function ft(){N.refetchQueries(re)}function oa(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,s)=>{e&&e(a,n,s),ft()}}else r={onSuccess:(e,a,n)=>{ft()}};return M(Fe.createDocument,r)}async function ht(r){const[[,e]]=N.getQueriesData(re);if(e){const a=e;a.table=e.table.filter(n=>n.id!==r),N.setQueryData(re,a)}}function sa(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,s)=>{e&&e(a,n,s),ht(n.id)}}else r={onSuccess:(e,a,n)=>{ht(a.id)}};return M(Fe.deleteDocument,r)}async function pt(r){const[[,e]]=N.getQueriesData(re);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(re,a)}}function ia(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),pt(l)}}else r={onSuccess:(i,c,l)=>{pt(c)}};const e=M(Fe.editDocument,r),a=e.mutate,n=e.mutateAsync,s=i=>{const v=i,{product:c,client:l}=v,u=k(v,["product","client"]);return a(u)},o=i=>{const v=i,{product:c,client:l}=v,u=k(v,["product","client"]);return n(u)};return e.mutate=s,e.mutateAsync=o,e}class la{constructor(){de(this,"action",b.models.client)}async createDocument(e){return(await D.post(b.models.client,e)).data}async deleteDocument({id:e}){return(await D.delete(`${b.models.client}/${e}`)).data}async editDocument(n){var s=n,{id:e}=s,a=k(s,["id"]);return(await D.put(`${b.models.client}/${e}`,a)).data}async getDocument(e,a=""){return(await D.get(b.models.client,{params:w(g({},e),{search:a})})).data.data}}const Qe=new la,oe="clients";function et(r,e=""){return Se([oe,r],()=>Qe.getDocument(r,e),{initialData(){const a=N.getQueryData(oe);return a||{quantity:25,table:[]}},keepPreviousData:!0,refetchOnWindowFocus:!1})}async function gt(r){N.refetchQueries(oe)}function ca(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,s)=>{e&&e(a,n,s),gt(a.data)}}else r={onSuccess:(e,a,n)=>{gt(e.data)}};return M(Qe.createDocument,r)}async function xt(r){const[[,e]]=N.getQueriesData(oe);if(e){const a=e.table.filter(n=>n.id!==r);N.setQueryData(oe,a)}}function ua(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,s)=>{e&&e(a,n,s),xt(n.id)}}else r={onSuccess:(e,a,n)=>{xt(a.id)}};return M(Qe.deleteDocument,r)}async function vt(r){const[[,e]]=N.getQueriesData(oe);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(oe,a)}}function da(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),vt(l)}}else r={onSuccess:(i,c,l)=>{vt(c)}};const e=M(Qe.editDocument,r),a=e.mutate,n=e.mutateAsync,s=i=>{const u=i,{requests:c}=u,l=k(u,["requests"]);return a(l)},o=i=>{const u=i,{requests:c}=u,l=k(u,["requests"]);return n(l)};return e.mutate=s,e.mutateAsync=o,e}class ma{constructor(){de(this,"action",b.models.product)}async createDocument(e){return(await D.post(b.models.product,e)).data}async deleteDocument({id:e}){return(await D.delete(`${b.models.product}/${e}`)).data}async editDocument(n){var s=n,{id:e}=s,a=k(s,["id"]);return(await D.put(`${b.models.product}/${e}`,a)).data}async getDocument(e,a=""){return(await D.get(b.models.product,{params:w(g({},e),{search:a})})).data.data}}const _e=new ma,se="products";function tt(r,e=""){return Se([se,r],()=>_e.getDocument(r,e),{refetchOnWindowFocus:!1,initialData(){const a=N.getQueryData(se);return a||{quantity:25,table:[]}}})}async function yt(r){N.refetchQueries(se)}function fa(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,s)=>{e&&e(a,n,s),yt(a.data)}}else r={onSuccess:(e,a,n)=>{yt(e.data)}};return M(_e.createDocument,r)}async function Et(r){const[[,e]]=N.getQueriesData(se);if(e){const a=e;a.table=e.table.filter(n=>n.id!==r),N.setQueryData(se,a)}}function ha(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,s)=>{e&&e(a,n,s),Et(n.id)}}else r={onSuccess:(e,a,n)=>{Et(a.id)}};return M(_e.deleteDocument,r)}async function wt(r){const[[,e]]=N.getQueriesData(se);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(se,a)}}function pa(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),wt(l)}}else r={onSuccess:(i,c,l)=>{wt(c)}};const e=M(_e.editDocument,r),a=e.mutate,n=e.mutateAsync,s=i=>{const u=i,{requests:c}=u,l=k(u,["requests"]);return a(l)},o=i=>{const u=i,{requests:c}=u,l=k(u,["requests"]);return n(l)};return e.mutate=s,e.mutateAsync=o,e}const kt=f.exports.createContext({});function ga({children:r}){const[e,a]=f.exports.useState({severity:"error",message:""});return t(kt.Provider,{value:{message:e,setMessage:a},children:r})}const ce=()=>f.exports.useContext(kt);function Me(r){const{api:e,id:a,editDocument:n,deleteDocument:s,validations:o}=r,{setMessage:i}=ce(),[c,l]=le(!1),u=e.getRowMode(a)==="edit",v=y=>{y.stopPropagation(),e.setRowMode(a,"edit")},d=async y=>{y.stopPropagation();const S=e.getRow(a);e.commitRowChange(a);const C=e.getRow(a);if(C===null)return;const I=await o.editValidation(C);if(I!==!0)return i({message:I.message,severity:"error"});if(JSON.stringify(S)===JSON.stringify(C))return e.setRowMode(a,"view");try{const ne=await n(C);e.setRowMode(a,"view"),i({message:ne.message,severity:"success"})}catch(ne){const{response:Z}=ne;e.updateRows([g({},S)]),i({message:Z.data.meta.cause,severity:"error"})}},m=y=>{y.stopPropagation(),l.toggle()},P=async()=>{const y=e.getRow(a);try{const S=await o.deleteValidation({id:a});if(S!==!0)return i({message:S.message,severity:"error"});const C=await s({id:a});e.setRowMode(a,"view"),e.updateRows([{id:a,_action:"delete"}]),i({message:C.message,severity:"success"})}catch(S){const{response:C}=S;e.updateRows([g({},y)]),i({message:C.data.meta.cause,severity:"error"})}},x=y=>{y.stopPropagation(),e.setRowMode(a,"view"),e.getRow(a).isNew&&e.updateRows([{id:a,_action:"delete"}])};return u?h(G,{children:[t(fe,{color:"primary",size:"small","aria-label":"save",onClick:d,children:t(or,{fontSize:"small"})}),t(fe,{color:"inherit",size:"small","aria-label":"cancel",onClick:x,children:t(sr,{fontSize:"small"})})]}):h(G,{children:[t(fe,{color:"primary",size:"small","aria-label":"Editar",onClick:v,children:t(ir,{fontSize:"small"})}),t(fe,{color:"inherit",size:"small","aria-label":"Deletar",onClick:m,children:t(lr,{fontSize:"small"})}),t(cr,{open:c,onClose:()=>{},children:h(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"3px solid #47474741",boxShadow:24,p:4},children:[t(A,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Voc\xEA tem certeza que quer apagar este item?"}),h(p,{display:"flex",sx:{justifyContent:"space-between"},children:[t(L,{onClick:P,color:"error",startIcon:t(ur,{color:"error"}),children:"Apagar"}),t(L,{onClick:m,color:"primary",startIcon:t(dr,{}),children:"Cancelar"})]})]})})]})}function R({params:r,value:e}){return t(mr,{title:e||(r?r.row[r.field]:""),children:t("span",{className:"table-cell-trucate",children:e||(r?r.row[r.field]:"")})})}const we=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});function Be(r){const{id:e,api:a,field:n,value:s}=r;return t(Ke,{style:{border:"none",outline:"none",fontSize:"1rem"},value:s,onValueChange:o=>{a.setEditCellValue({id:e,field:n,value:o.floatValue})},thousandSeparator:".",decimalSeparator:",",allowNegative:!1,maxLength:20})}const pe=r=>r?fr(new Date(r),"dd/MM/yyyy"):"";class xa{async create(e){const a=T().shape({expiresIn:he().required("Selecione uma data"),product_id:E().required("Selecione um produto"),client_id:E().required("Selecione um cliente"),status:E().equals(Ce.map(n=>n.code)).required("Selecione um status"),paidOut:V().moreThan(-1,"O valor pago deve ser maior ou igual \xE0 0 ").required("Descreva o valor pago, se n\xE3o foi pago escreva 0"),price:V().moreThan(0,"O pre\xE7o deve ser maior que 0").required("Descreva o pre\xE7o do pedido"),title:E().min(3,"O t\xEDtulo deve conter pelo menos 3 letras").max(50).required("Descreva o t\xEDtulo")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T().shape({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),product_id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID do produto"),client_id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID do cliente"),title:E().min(3,"O t\xEDtulo precisa ter pelo menos 3 caracteres").max(50,"O t\xEDtulo apenas pode ter no m\xE1ximo 50 caracteres").required("Erro de valida\xE7\xE3o, faltou: T\xEDtulo"),status:E().equals(Ce.map(n=>n.code)).required("Selecione um status"),paidOut:V().moreThan(-1,"O valor pago deve ser maior ou igual \xE0 0 ").required("Descreva o valor pago, se n\xE3o foi pago escreva 0"),price:V().moreThan(0,"O pre\xE7o deve ser maior que 0").required("Descreva o pre\xE7o do pedido"),expiresIn:he().required("Erro de valida\xE7\xE3o, faltou: Expira em"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var Ge=new xa;function va({clients:r,products:e,deleteRequest:a,editRequest:n}){return[{field:"client_id",headerName:"Cliente",type:"singleSelect",description:"Cliente que fez o pedido",flex:1,editable:!0,valueFormatter:o=>{var i;return((i=r.find(({id:c})=>c===o.value))==null?void 0:i.name)||""},renderCell:o=>t(R,{value:o.formattedValue}),valueOptions:r.map(({id:o,name:i})=>({value:o,label:i}))},{field:"title",headerName:"T\xEDtulo",description:"T\xEDtulo do pedido",minWidth:140,flex:1,editable:!0,renderCell:R},{field:"product_id",headerName:"Produto",type:"singleSelect",description:"Produto escolhido pelo cliente",flex:1,editable:!0,valueFormatter:o=>{var i;return((i=e.find(({id:c})=>c===o.value))==null?void 0:i.name)||""},renderCell:o=>t(R,{value:o.formattedValue}),valueOptions:e.map(({id:o,name:i})=>({value:o,label:i}))},{field:"createdAt",headerName:"In\xEDcio",type:"date",description:"Data de cria\xE7\xE3o do pedido",hide:!0,editable:!0,flex:1,valueFormatter:o=>pe(o.value),renderCell:({formattedValue:o})=>t(R,{value:o})},{field:"expiresIn",headerName:"Final",type:"date",description:"Prazo final do pedido",flex:1,editable:!0,valueFormatter:o=>pe(o.value),renderCell:({formattedValue:o})=>t(R,{value:o})},{field:"price",headerName:"Pre\xE7o",type:"number",description:"Pre\xE7o cobrado",headerAlign:"left",align:"left",flex:1,editable:!0,renderEditCell:Be,valueFormatter:({value:o})=>we.format(Number(o)),renderCell:({formattedValue:o})=>t(R,{value:o})},{field:"paidOut",headerName:"Pago",type:"number",description:"Valor adiantado pelo cliente",headerAlign:"left",align:"left",flex:1,editable:!0,renderEditCell:Be,valueFormatter:({value:o})=>we.format(Number(o)),renderCell:({formattedValue:o})=>t(R,{value:o})},{field:"balance",headerName:"Saldo",type:"number",description:"Valor que ainda falta ser pago",headerAlign:"left",align:"left",flex:1,valueFormatter:({value:o})=>we.format(Number(o)),renderCell:({formattedValue:o})=>t(R,{value:o})},{field:"status",headerName:"Status",type:"singleSelect",description:"Condi\xE7\xE3o do pedido",flex:1,editable:!0,valueFormatter:o=>{const i=o.value,c=Ce.find(u=>u.code===i);return c?c.type:"A fazer"},renderCell:({formattedValue:o})=>t(R,{value:o}),valueOptions:Ce.map(({code:o,type:i})=>({value:o,label:i}))},{field:"actions",headerName:"A\xE7\xF5es",width:75,headerAlign:"center",align:"center",disableExport:!0,sortable:!1,filterable:!1,disableColumnMenu:!0,disableReorder:!0,renderCell:o=>t(Me,g({validations:{deleteValidation:Ge.delete,editValidation:Ge.edit},editDocument:n,deleteDocument:a},o))}]}const ya=Pe({palette:{primary:{main:"#1976d2"}}},De);function Ea(){const[r,e]=f.exports.useState([]),[a,n]=f.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:s}=ce(),o={page:a.page,pageSize:a.pageSize},{error:i,data:c,isFetching:l}=aa(o,"",{onSuccess:C=>{e(C.table),n(I=>w(g({},I),{rowCount:C.quantity}))}}),{data:u}=et(),{data:v}=tt(),{mutateAsync:d,isLoading:m}=sa(),{mutateAsync:P,isLoading:x}=ia(),y=va({clients:(u==null?void 0:u.table)||[],products:(v==null?void 0:v.table)||[],deleteRequest:d,editRequest:P});f.exports.useEffect(()=>{!l&&na(o),c&&e(c.table)},[a.page,a.pageSize]),f.exports.useEffect(()=>{i&&s({message:i.response.data.meta.cause,severity:"error"})},[i]);const S=C=>{const I=new Date(C.row.expiresIn),ne=C.row.status,Z=new Date;let ee="",q="",j="";switch(I.getMonth()<Z.getMonth()?q="expired_request":I.getMonth()===Z.getMonth()&&(I.getDate()<Z.getDate()?q="expired_request":I.getDate()===Z.getDate()&&(j="warning_request")),ne){case Q.TODO:ee="status_"+Q.TODO;break;case Q.GRAPHIC:ee="status_"+Q.GRAPHIC;break;case Q.DEALING:ee="status_"+Q.DEALING;break;case Q.CANCELLED:ee="status_"+Q.CANCELLED;break;case Q.COMPLETED:ee="status_"+Q.COMPLETED;break;default:ee=""}return`${ee} ${q} ${j}`};return t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:ya,children:t(Ne,w(g({},a),{rows:r,columns:y,pagination:!0,paginationMode:"server",onPageChange:C=>n(I=>w(g({},I),{page:C})),onPageSizeChange:C=>n(I=>w(g({},I),{pageSize:C})),editMode:"row",onRowEditStart:(C,I)=>{I.defaultMuiPrevented=!0},onRowEditStop:(C,I)=>{I.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Te},loading:l||m||x,localeText:Oe,getRowClassName:S,disableSelectionOnClick:!0}))})})}function He({label:r,required:e,field:a}){const v=a,{onChange:n,ref:s}=v,o=k(v,["onChange","ref"]),[i,c]=f.exports.useState(""),l=f.exports.useRef(null),u=f.exports.forwardRef(function(m,P){const S=m,{onChange:x}=S,y=k(S,["onChange"]);return t(Ke,w(g({},y),{getInputRef:P,onValueChange:C=>{x({target:{name:m.name,value:C.value}})},thousandSeparator:".",decimalSeparator:",",allowNegative:!1,isNumericString:!0,maxLength:20}))});return f.exports.useEffect(()=>{var d;if(i){const m=(d=l.current)==null?void 0:d.children[1].children[1];m==null||m.focus()}},[i]),t(F,g({ref:l,variant:"outlined",margin:"normal",fullWidth:!0,type:"text",label:r,autoComplete:"off",required:e,onChange:d=>{c(d.target.value),n(d)},InputProps:{startAdornment:t(Nt,{position:"start",children:"R$"}),inputComponent:u}},o))}function Ct({label:r,items:e,nameKey:a,idKey:n,field:s}){const[o,i]=f.exports.useState([]),[c,l]=f.exports.useState(""),u=f.exports.useRef(null);f.exports.useEffect(()=>{e&&i(e)},[e]),f.exports.useEffect(()=>{if(!e)return;const d=e.filter(m=>m[a].includes(c));i(d)},[c]);const v=d=>{const m=d.currentTarget.value;l(m),d.currentTarget.focus()};return h(qt,{sx:{display:"flex",justifyContent:"space-between"},margin:"normal",variant:"outlined",fullWidth:!0,required:!0,children:[t(Rt,{id:r,children:r}),h(Ot,w(g({labelId:r,label:r},s),{children:[t(hr,{onClick:d=>d.stopPropagation(),onKeyDown:d=>d.stopPropagation(),children:t(F,{variant:"outlined",required:!0,ref:u,fullWidth:!0,autoComplete:"off",name:"search",id:"search",value:c,onChange:v,autoFocus:!0,InputProps:{startAdornment:t(Nt,{position:"start",children:t(pr,{})})}})}),o.map(d=>t(Xe,{onFocus:()=>{var P;const m=(P=u.current)==null?void 0:P.children[0].children[1];m==null||m.focus()},className:"searchMenu-items",value:d[n],children:h(gr,{sx:{display:"flex",justifyContent:"space-between"},children:[h("span",{children:[d[a]," "]}),"\xA0\xA0",t("span",{children:d.basePrice?h("small",{children:["Pre\xE7o base ",we.format(Number(d.basePrice))]}):""})]})},d[n]))]}))]})}function wa({name:r,setValue:e}){const[a,n]=f.exports.useState(),[s,o]=f.exports.useState();return f.exports.useEffect(()=>{e(r,new Date),n(new Date)},[]),t(xr,{dateAdapter:vr,locale:yr,children:t(Er,{onError:i=>{if(i)return o({message:"Data inv\xE1lida",show:!0})},value:a,onChange:i=>{n(i),e(r,i),o({message:"",show:!1})},renderInput:i=>t(F,w(g({},i),{margin:"normal",autoComplete:"off",required:!0,fullWidth:!0,helperText:s==null?void 0:s.message}))})})}function Ca({error:r,vertical:e,horizontal:a,miliseconds:n}){const[s,o]=le(!1);return f.exports.useEffect(()=>{r&&r.show&&o.on()},[r]),t(Ve,{anchorOrigin:{vertical:e,horizontal:a},onClose:()=>o.off(),autoHideDuration:n,open:s,children:t(xe,{severity:"error",sx:{width:"100%"},children:r==null?void 0:r.message})})}function ba(){const{control:r,setValue:e,getValues:a,reset:n}=K(),[s,o]=f.exports.useState(),{isLoading:i,mutate:c}=oa({onError({response:d}){o({message:d.data.meta.cause,show:!0})},onSuccess(){o({message:"",show:!1})}}),{data:l}=et(),{data:u}=tt(),v=async()=>{const d=a();d.paidOut=d.paidOut?Number(d.paidOut):0,d.price=d.price?Number(d.price):0;const m=await Ge.create(d);m===!0?(c(d),n({client_id:"",title:"",product_id:"",status:Q.TODO,price:"",paidOut:"",expiresIn:d.expiresIn})):o({message:m.message,show:!0})};return f.exports.useEffect(()=>{e("status",Q.TODO)},[e]),t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(J,{sx:{minHeight:"90vh"},elevation:5,children:h(p,{padding:2,children:[t(A,{style:{fontSize:"1.4rem"},variant:"h1",component:"h1",children:"Criar pedido"}),t(p,{children:t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"})}),h(p,{children:[t(O,{name:"title",control:r,defaultValue:"",render:({field:d})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"T\xEDtulo",autoComplete:"off",autoFocus:!0},d))}),t(O,{name:"price",control:r,render:({field:d})=>t(He,{label:"Pre\xE7o",error:s,required:!0,field:d})}),t(O,{name:"paidOut",control:r,render:({field:d})=>t(He,{label:"Pago",error:s,required:!1,field:d})}),t(O,{name:"status",control:r,render:({field:d})=>{const x=d,{value:m}=x,P=k(x,["value"]);return h(qt,{margin:"normal",variant:"outlined",fullWidth:!0,required:!0,sx:{display:"flex",flexDirection:"column"},children:[t(Rt,{id:"status",children:"Status"}),t(Ot,w(g({defaultValue:"",labelId:"status",id:"status",label:"Status",value:m||"TODO"},P),{children:Ce.map(y=>t(Xe,{value:y.code,children:y.type},y.type))}))]})}}),t(O,{name:"client_id",control:r,defaultValue:"",render:({field:d})=>t(Ct,{label:"Cliente",items:(l==null?void 0:l.table)||[],nameKey:"name",idKey:"id",field:d})}),t(O,{name:"product_id",control:r,defaultValue:"",render:({field:d})=>t(Ct,{label:"Produto",items:(u==null?void 0:u.table)||[],nameKey:"name",idKey:"id",field:d})}),t(wa,{name:"expiresIn",setValue:e})]}),h(p,{display:"flex",gap:"5",children:[h(L,{onClick:v,color:"primary",children:["Criar",t($e,{})]}),t(H,{loading:i})]}),t(Ca,{miliseconds:1500,error:s,vertical:"bottom",horizontal:"left"})]})})})}const Ee={panelContainer:{display:"flex",gap:"2rem"}};function Sa(){return h(p,{sx:Ee.panelContainer,children:[t(ba,{}),t(Ea,{})]})}class Pa{async create(e){const a=T().shape({name:E().min(3,"O nome precisa ter pelo menos 3 caracteres").max(50).required("O nome \xE9 obrigat\xF3rio"),email:E().email("Descreva o email corretamente")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),name:E().min(3,"O nome precisa ter pelo menos 3 caracteres").max(50,"O nome apenas pode ter no m\xE1ximo 50 caracteres").required("Erro de valida\xE7\xE3o, faltou: Nome"),email:E().email("Descreva o email corretamente"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var je=new Pa;function Da(){const{control:r,getValues:e,reset:a}=K(),[n,s]=f.exports.useState(),{isLoading:o,mutate:i}=ca({onError({response:l}){s({message:l.data.meta.cause,show:!0})},onSuccess(){s({message:"",show:!1})}});return t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(J,{sx:{minHeight:"90vh"},elevation:5,children:h(p,{padding:2,children:[t(A,{style:{fontSize:"1.5rem"},variant:"h1",component:"h1",children:"Criar cliente"}),h(p,{children:[t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"}),t(ve,{error:n})]}),h(p,{sx:{columnGap:25},children:[t(O,{control:r,defaultValue:"",name:"name",render:({field:l})=>t(F,g({error:n?n.show:!1,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Nome do cliente",autoComplete:"off",autoFocus:!0},l))}),t(O,{control:r,defaultValue:"",name:"email",render:({field:l})=>t(F,g({variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email do cliente",autoComplete:"off"},l))}),h(L,{onClick:async()=>{const l=e(),u=await je.create(l);u===!0?(i(l),a({name:"",email:""})):s({message:u.message,show:!0})},color:"primary",children:["Criar",t($e,{})]}),t(H,{loading:o})]})]})})})}const Aa=48;function Na({children:r}){const[e,a]=f.exports.useState(null),[n,s]=le(!1);return h(G,{children:[t(fe,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":n?"true":void 0,"aria-haspopup":"true",onClick:c=>{r.length!==0&&(a(c.currentTarget),s.on())},children:t(wr,{})}),t(Cr,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:e,open:n,onClose:()=>{a(null),s.off()},PaperProps:{style:{maxHeight:Aa*4.5,width:"20ch"}},children:r})]})}function qa({deleteClient:r,editClient:e}){return[{field:"name",headerName:"Cliente",description:"Nome do cliente",editable:!0,flex:1,renderCell:R},{field:"email",headerName:"Email",description:"Email do cliente",editable:!0,flex:1,renderCell:R},{field:"requests",headerName:"Pedidos",description:"Pedidos do cliente",align:"right",filterable:!1,flex:1,valueFormatter:n=>{const s=n.value;let o="";return s==null||s.forEach((i,c)=>{s[c].title===s[s.length-1].title?o+=i.title:o+=i.title+", "}),o},renderCell:n=>{var s,o;return t(Na,{children:(o=(s=n==null?void 0:n.row)==null?void 0:s.requests)==null?void 0:o.map(i=>t(Xe,{children:t(R,{value:i.title})},i.id))})}},{field:"createdAt",headerName:"Adicionado em",type:"date",editable:!0,valueFormatter:n=>pe(n.value),renderCell:({formattedValue:n})=>t(R,{value:n}),description:"Data de cria\xE7\xE3o do cliente",flex:1},{field:"actions",headerName:"A\xE7\xF5es",headerAlign:"center",align:"center",width:75,sortable:!1,filterable:!1,disableExport:!0,disableColumnMenu:!0,disableReorder:!0,renderCell:n=>t(Me,g({validations:{deleteValidation:je.delete,editValidation:je.edit},editDocument:e,deleteDocument:r},n))}]}const Ra=Pe({palette:{primary:{main:"#1976d2"}}},De);function Oa(){const[r,e]=f.exports.useState([]),[a,n]=f.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:s}=ce(),o={page:a.page,pageSize:a.pageSize},{data:i,isFetching:c,error:l}=et(o,""),{mutateAsync:u,isLoading:v}=ua(),{mutateAsync:d,isLoading:m}=da(),P=qa({deleteClient:u,editClient:d});return f.exports.useEffect(()=>{!i||(e(i.table),n(x=>w(g({},x),{rowCount:i.quantity})))},[i]),f.exports.useEffect(()=>{l&&s({message:l.response.data.meta.cause,severity:"error"})},[l]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:Ra,children:t(Ne,w(g({},a),{rows:r,columns:P,pagination:!0,paginationMode:"server",onPageChange:x=>n(y=>w(g({},y),{page:x})),onPageSizeChange:x=>n(y=>w(g({},y),{pageSize:x})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(x,y)=>{y.defaultMuiPrevented=!0},onRowEditStop:(x,y)=>{y.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Te},loading:c||v||m,localeText:Oe}))})})}function Ta(){return t(G,{children:h(p,{sx:Ee.panelContainer,children:[t(Da,{}),t(Oa,{})]})})}class Fa{async create(e){const a=T().shape({basePrice:V().strict().positive("O pre\xE7o base deve ser maior do que 0").required("Descreva o pre\xE7o base"),name:E().min(3,"O nome deve conter pelo menos 3 letras").max(50,"O limite do nome \xE9 50 letras").required("O nome \xE9 obrigat\xF3rio")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),name:E().min(3,"O nome precisa ter pelo menos 3 caracteres").max(50,"O nome apenas pode ter no m\xE1ximo 50 caracteres").required("Erro de valida\xE7\xE3o, faltou: Nome"),basePrice:V().strict().positive().required("Erro de valida\xE7\xE3o, faltou: Pre\xE7o Base"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var Ye=new Fa;function Ma(){const{getValues:r,reset:e,control:a}=K(),[n,s]=f.exports.useState(),{isLoading:o,mutate:i}=fa({onError({response:l}){s({message:l.data.meta.cause,show:!0})},onSuccess(){s({message:"",show:!1})}});return t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(J,{sx:{minHeight:"90vh"},elevation:5,children:h(p,{padding:2,children:[t(A,{style:{fontSize:"1.5rem"},variant:"h1",component:"h1",children:"Criar produto"}),h(p,{children:[t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"}),t(ve,{error:n})]}),h(p,{sx:{gridColumnGap:25},children:[t(O,{name:"name",control:a,defaultValue:"",render:({field:l})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:n?n.show:!1,label:"Nome do produto",autoComplete:"off",autoFocus:!0},l))}),t(O,{name:"basePrice",control:a,defaultValue:"",render:({field:l})=>t(He,{label:"Pre\xE7o base",error:n,required:!0,field:l})}),h(p,{display:"flex",gap:"5",children:[h(L,{onClick:async()=>{const l=r();l.basePrice=+l.basePrice;const u=await Ye.create(l);u===!0?(i(l),e({name:"",basePrice:""})):s({message:u.message,show:!0})},color:"primary",children:["Criar",t($e,{})]}),t(H,{loading:o})]})]})]})})})}function ka({deleteProduct:r,editProduct:e}){return[{field:"name",headerName:"Produto",flex:1,editable:!0,renderCell:R},{field:"basePrice",headerName:"Pre\xE7o base R$",type:"number",align:"left",headerAlign:"left",flex:1,editable:!0,valueFormatter:({value:n})=>we.format(Number(n)),renderEditCell:Be,renderCell:({formattedValue:n})=>t(R,{value:n})},{field:"createdAt",headerName:"Adicionado em",valueFormatter:n=>pe(n.value),renderCell:({formattedValue:n})=>t(R,{value:n}),type:"date",flex:1,editable:!0},{field:"actions",headerName:"A\xE7\xF5es",align:"center",headerAlign:"center",width:75,sortable:!1,filterable:!1,disableExport:!0,disableColumnMenu:!0,disableReorder:!0,renderCell:n=>t(Me,g({validations:{deleteValidation:Ye.delete,editValidation:Ye.edit},editDocument:e,deleteDocument:r},n))}]}const La=Pe({palette:{primary:{main:"#1976d2"}}},De);function Ia(){const[r,e]=f.exports.useState([]),[a,n]=f.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:s}=ce(),o={page:a.page,pageSize:a.pageSize},{data:i,isFetching:c,error:l}=tt(o,""),{mutateAsync:u,isLoading:v}=ha(),{mutateAsync:d,isLoading:m}=pa(),P=ka({deleteProduct:u,editProduct:d});return f.exports.useEffect(()=>{!i||(e(i.table),n(x=>w(g({},x),{rowCount:i.quantity})))},[i]),f.exports.useEffect(()=>{l&&s({message:l.response.data.meta.cause,severity:"error"})},[l]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:La,children:t(Ne,w(g({},a),{rows:r,columns:P,pagination:!0,paginationMode:"server",onPageChange:x=>n(y=>w(g({},y),{page:x})),onPageSizeChange:x=>n(y=>w(g({},y),{pageSize:x})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(x,y)=>{y.defaultMuiPrevented=!0},onRowEditStop:(x,y)=>{y.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Te},loading:c||v||m,localeText:Oe}))})})}function Va(){return h(p,{sx:Ee.panelContainer,children:[t(Ma,{}),t(Ia,{})]})}function $a(){const[r,e]=f.exports.useState(!0),[a,n]=f.exports.useState({first:"",last:""}),[s,o]=f.exports.useState({message:"",show:!1,severity:"success"}),{setAccount:i,account:c}=Re(),{isLoading:l,mutate:u}=$r({onError({response:d}){n({first:c.firstName,last:c.lastName}),o({message:d.data.meta.cause,show:!0,severity:"error"})},onSuccess(d){i({email:c.email,firstName:a.first,lastName:a.last,role:c.role}),o({message:d.message,show:d.data,severity:"success"}),e(!0)}});f.exports.useEffect(()=>{n({first:c.firstName,last:c.lastName})},[]);const v=async()=>{const d={firstName:a.first,lastName:a.last};if(d.firstName===c.firstName&&d.lastName===c.lastName)return;const m=await B.changeNames(d);m===!0?u(d):o({message:m.message,show:!0,severity:"error"})};return t(G,{children:h(p,{sx:w(g({},Ee.panelContainer),{height:"90vh",justifyContent:"center",alignItems:"center"}),children:[h(p,{display:"grid",gap:5,sx:{height:"80%",width:"90%",padding:3,gridTemplateColumns:"1fr 1fr"},children:[h(J,{sx:{padding:3},elevation:3,children:[h(p,{sx:{marginBottom:3},children:[t(A,{variant:"h4",gutterBottom:!0,component:"div",children:"Conta"}),h("div",{children:[t(A,{variant:"subtitle1",gutterBottom:!0,component:"div",children:"Nome:"}),h(A,{children:[c.firstName," ",c.lastName]})]})]}),h(p,{children:[t(A,{variant:"subtitle1",gutterBottom:!0,component:"div",children:"Email:"}),t(A,{children:c.email})]})]}),h(J,{sx:{padding:3,position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:3,children:[h(p,{children:[t(p,{sx:{position:"absolute",top:0,right:0,transform:"translate(50%, -50%)"},children:t(fe,{onClick:()=>e(!r),size:"large",children:r?t(br,{fontSize:"large"}):t(Sr,{fontSize:"large"})})}),t(F,{variant:"outlined",margin:"normal",disabled:r,required:!0,fullWidth:!0,defaultValue:c.firstName,onChange:d=>n(m=>w(g({},m),{first:d.target.value})),name:"firstName",label:"Primeiro nome",autoComplete:"off",autoFocus:!0}),t(F,{variant:"outlined",margin:"normal",disabled:r,required:!0,fullWidth:!0,defaultValue:c.lastName,onChange:d=>n(m=>w(g({},m),{last:d.target.value})),name:"lastName",label:"\xDAltimo nome",autoComplete:"off",autoFocus:!0}),h(p,{sx:{display:"flex",justifyContent:"space-between"},children:[t(L,{onClick:v,disabled:r,color:"primary",children:"Salvar altera\xE7\xF5es"}),t(L,{onClick:()=>{n({first:c.firstName,last:c.lastName}),e(!0)},disabled:r,color:"error",children:"Cancelar"})]})]}),t(p,{children:t(L,{disabled:r,color:"primary",to:"/panel/account/changepassword",component:_,children:"Mudar senha"})})]})]}),t(p,{sx:{position:"absolute"},children:t(H,{loading:l})}),t(Ve,{open:s.show,onClose:()=>o({message:"",show:!1,severity:"error"}),autoHideDuration:5e3,children:t(xe,{severity:s.severity,children:s.message})})]})})}function Qa({account:r}){const{getValues:e,control:a}=K(),[n,s]=f.exports.useState(),[o,i]=f.exports.useState(),[c,l]=f.exports.useState(!1),u=ae(),{mutate:v}=M(X.resetPassword,{onError({response:m}){s({message:m.data.meta.cause,show:!0}),i({message:"",show:!1})},onSuccess(m){i({message:m.message,show:!0}),setTimeout(()=>{u.push("/panel")},1e3),s(Lr)}}),d=async()=>{const{password:m,confirmPassword:P}=e(),x=await B.changePassword({password:m,confirmPassword:P});x===!0?v({email:r.email,password:m}):s({message:x.message,show:!0})};return t(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"},component:"form",className:"form",method:"POST",children:h(J,{sx:{padding:3},elevation:3,children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Trocar senha"})}),t(O,{control:a,defaultValue:"",name:"password",render:({field:m})=>t(F,g({error:n?n.show:!1,type:c?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Nova senha"},m))}),t(O,{control:a,defaultValue:"",name:"confirmPassword",render:({field:m})=>t(F,g({error:n?n.show:!1,type:c?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirme a senha"},m))}),t(ve,{error:n}),t(Ve,{open:o==null?void 0:o.show,autoHideDuration:6e3,children:t(xe,{severity:"success",sx:{width:"100%"},children:o==null?void 0:o.message})}),h(p,{display:"flex",alignItems:"center",marginY:1,children:[t(Ie,{checked:c,color:"primary",onChange:()=>{l(!c)}}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]}),t(L,{onClick:d,color:"primary",children:"Trocar"})]})})}class _a{async create(e){const a=T().shape({phoneNumber:E().phone("BR",void 0,"O n\xFAmero n\xE3o est\xE1 dentro dos padr\xF5es")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),phoneNumber:E().phone("BR",void 0,"O n\xFAmero n\xE3o est\xE1 dentro dos padr\xF5es").required("Descreva o n\xFAmero"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var Je=new _a;class Wa{constructor(){de(this,"User",{async editRole(e){return(await D.put(b.admin.user,e)).data},async delete({id:e}){return(await D.delete(`${b.admin.user}/${e}`)).data},async get(e,a=""){return(await D.get(b.admin.user,{params:w(g({},e),{search:a})})).data.data}});de(this,"AccountTie",{async create(e){return(await D.post(b.admin.accountTie,e)).data},async edit(e){return(await D.put(b.admin.accountTie,e)).data},async delete({id:e}){return(await D.delete(`${b.admin.accountTie}/${e}`)).data},async get(e,a=""){return(await D.get(b.admin.accountTie,{params:w(g({},e),{search:a})})).data.data}})}}const ue=new Wa,ie="admin-accountie";function Lt(r,e=""){return Se([ie,r],()=>ue.AccountTie.get(r,e),{refetchOnWindowFocus:!1,initialData(){const a=N.getQueryData(ie);return a||{quantity:25,table:[]}}})}async function bt(){N.refetchQueries(ie)}function za(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,s)=>{e&&e(a,n,s),bt()}}else r={onSuccess:(e,a,n)=>{bt()}};return M(ue.AccountTie.create,r)}async function St(r){const[[,e]]=N.getQueriesData(ie);if(e){const a=e;a.table=e.table.filter(n=>n.id!==r),N.setQueryData(ie,a)}}function Ua(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,s)=>{e&&e(a,n,s),St(n.id)}}else r={onSuccess:(e,a,n)=>{St(a.id)}};return M(ue.AccountTie.delete,r)}async function Pt(r){const[[,e]]=N.getQueriesData(ie);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(ie,a)}}function Ba(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),Pt(l)}}else r={onSuccess:(i,c,l)=>{Pt(c)}};const e=M(ue.AccountTie.edit,r),a=e.mutate,n=e.mutateAsync,s=i=>{const u=i,{account:c}=u,l=k(u,["account"]);return a(l)},o=i=>{const u=i,{account:c}=u,l=k(u,["account"]);return n(l)};return e.mutate=s,e.mutateAsync=o,e}function Ga(){const{getValues:r,reset:e,control:a}=K(),[n,s]=f.exports.useState(),{isLoading:o,mutate:i}=za({onError({response:l}){s({message:l.data.meta.cause,show:!0})},onSuccess(){s({message:"",show:!1})}});return t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(J,{sx:{minHeight:"90vh"},elevation:5,children:h(p,{padding:2,children:[t(A,{style:{fontSize:"1.5rem"},variant:"h1",component:"h1",children:"Criar n\xFAmero"}),h(p,{children:[t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"}),t(ve,{error:n})]}),h(p,{sx:{gridColumnGap:25},children:[t(O,{name:"phoneNumber",control:a,defaultValue:"",render:({field:l})=>t(Mt,{label:"N\xFAmero de telefone",error:n,required:!0,field:l})}),h(p,{display:"flex",gap:"5",children:[h(L,{onClick:async()=>{const l=r(),u=await Je.create(l);u===!0?(i(l),e({phoneNumber:""})):s({message:u.message,show:!0})},color:"primary",children:["Criar",t($e,{})]}),t(H,{loading:o})]})]})]})})})}function Ha({deleteAccountTie:r,editAccountTie:e}){return[{field:"phoneNumber",headerName:"N\xFAmero de telefone",flex:1,renderCell:R,headerAlign:"left",align:"left"},{field:"account",headerName:"Nome | Email",description:"Nome e email do usu\xE1rio vinculado a este n\xFAmero",flex:1,valueFormatter:n=>{const s=n.value;return s?`${s.firstName} ${s.lastName} | ${s.email}`:"Nenhuma conta vinculada"},renderCell:({formattedValue:n})=>t(R,{value:n})},{field:"createdAt",headerName:"Adicionado em",valueFormatter:n=>pe(n.value),renderCell:({formattedValue:n})=>t(R,{value:n}),type:"date",flex:1,editable:!0},{field:"actions",headerName:"A\xE7\xF5es",width:75,headerAlign:"center",align:"center",filterable:!1,disableExport:!0,sortable:!1,disableColumnMenu:!0,disableReorder:!0,renderCell:n=>t(Me,g({validations:{deleteValidation:Je.delete,editValidation:Je.edit},editDocument:e,deleteDocument:r},n))}]}const ja=Pe({palette:{primary:{main:"#1976d2"}}},De);function Ya(){const[r,e]=f.exports.useState([]),[a,n]=f.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:s}=ce(),o={page:a.page,pageSize:a.pageSize},{data:i,isFetching:c,error:l}=Lt(o,""),{mutateAsync:u,isLoading:v}=Ua(),{mutateAsync:d,isLoading:m}=Ba(),P=Ha({deleteAccountTie:u,editAccountTie:d});return f.exports.useEffect(()=>{!i||(e(i.table),n(x=>w(g({},x),{rowCount:i.quantity})))},[i]),f.exports.useEffect(()=>{l&&s({message:l.response.data.meta.cause,severity:"error"})},[l]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:ja,children:t(Ne,w(g({},a),{rows:r,columns:P,pagination:!0,paginationMode:"server",onPageChange:x=>n(y=>w(g({},y),{page:x})),onPageSizeChange:x=>n(y=>w(g({},y),{pageSize:x})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(x,y)=>{y.defaultMuiPrevented=!0},onRowEditStop:(x,y)=>{y.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Te},loading:c||v||m,localeText:Oe}))})})}function Ja(){return t(G,{children:h(p,{sx:Ee.panelContainer,children:[t(Ga,{}),t(Ya,{})]})})}function Ka({accountTies:r,deleteUser:e,editUser:a}){return[{field:"firstName",headerName:"Nome",flex:1,renderCell:R},{field:"lastName",headerName:"Sobrenome",flex:1,renderCell:R},{field:"email",headerName:"Email",flex:1,renderCell:R},{field:"accountTie_id",headerName:"V\xEDnculo",type:"singleSelect",flex:1,editable:!0,valueFormatter:s=>{var o;return((o=r.find(({id:i})=>i===s.value))==null?void 0:o.phoneNumber)||""},renderCell:s=>t(R,{value:s.formattedValue}),valueOptions:s=>r.filter(i=>{var c;if(!i.account||((c=s.row)==null?void 0:c.accountTie_id)===i.id)return i}).map(i=>({value:i.id,label:i.phoneNumber}))},{field:"confirmedEmail",headerName:"Confirmou email",flex:1,renderCell:s=>t(R,{value:s.formattedValue}),valueFormatter:({value:s})=>Boolean(s)?"Confirmado":"N\xE3o confirmado"},{field:"createdAt",headerName:"Adicionado em",type:"date",flex:1,valueFormatter:s=>pe(s.value),renderCell:s=>t(R,{value:s.formattedValue})},{field:"role",headerName:"Cargo",type:"singleSelect",description:"Condi\xE7\xE3o do pedido",flex:1,editable:!0,renderCell:s=>t(R,{value:s.formattedValue}),valueFormatter:({value:s})=>{const o=Ue.find(i=>i.code===s);return o==null?void 0:o.type},valueOptions:Ue.map(({code:s,type:o})=>({value:s,label:o}))},{field:"actions",headerName:"A\xE7\xF5es",headerAlign:"center",align:"center",width:75,sortable:!1,filterable:!1,disableColumnMenu:!0,disableReorder:!0,renderCell:s=>t(Me,g({validations:{deleteValidation:B.delete,editValidation:B.edit},editDocument:a,deleteDocument:e},s))}]}const ge="admin-user";function Xa(r,e=""){return Se([ge,r],()=>ue.User.get(r,e),{initialData(){const a=N.getQueryData(ge);return a||{quantity:25,table:[]}},keepPreviousData:!0,refetchOnWindowFocus:!1})}async function Dt(r){const[[,e]]=N.getQueriesData(ge);if(e){const a=e.table.filter(n=>n.id!==r);N.setQueryData(ge,a)}}function Za(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,s)=>{e&&e(a,n,s),Dt(n.id)}}else r={onSuccess:(e,a,n)=>{Dt(a.id)}};return M(ue.User.delete,r)}async function At(r){const[[,e]]=N.getQueriesData(ge);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(ge,a)}}function en(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),At(l)}}else r={onSuccess:(i,c,l)=>{At(c)}};const e=M(ue.User.editRole,r),a=e.mutate,n=e.mutateAsync,s=i=>{const{id:c,role:l,accountTie_id:u}=i;return a({id:c,role:l,accountTie_id:u})},o=i=>{const{id:c,role:l,accountTie_id:u}=i;return n({id:c,role:l,accountTie_id:u})};return e.mutate=s,e.mutateAsync=o,e}const tn=Pe({palette:{primary:{main:"#1976d2"}}},De);function rn(){const[r,e]=f.exports.useState([]),[a,n]=f.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:s}=ce(),o={page:a.page,pageSize:a.pageSize},{data:i,refetch:c}=Lt(),{data:l,isFetching:u,error:v}=Xa(o,""),{mutateAsync:d,isLoading:m}=Za(),{mutateAsync:P,isLoading:x}=en({onSuccess:()=>c()}),y=Ka({accountTies:(i==null?void 0:i.table)||[],deleteUser:d,editUser:P});return f.exports.useEffect(()=>{!l||(e(l.table),n(S=>w(g({},S),{rowCount:l.quantity})))},[l]),f.exports.useEffect(()=>{v&&s({message:v.response.data.meta.cause,severity:"error"})},[v]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:tn,children:t(Ne,w(g({},a),{rows:r,columns:y,pagination:!0,paginationMode:"server",onPageChange:S=>n(C=>w(g({},C),{page:S})),onPageSizeChange:S=>n(C=>w(g({},C),{pageSize:S})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(S,C)=>{C.defaultMuiPrevented=!0},onRowEditStop:(S,C)=>{C.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Te},loading:u||m||x,localeText:Oe}))})})}function an(){return t(G,{children:t(p,{sx:Ee.panelContainer,children:t(rn,{})})})}function nn(){const{account:r}=Re();return h(p,{children:[t(ea,{}),t($,{path:"/panel/account/changepassword",exact:!0,children:t(Qa,{account:r})}),t($,{path:"/panel",exact:!0,children:t(Sa,{})}),t($,{path:"/panel/clients",exact:!0,children:t(Ta,{})}),t($,{path:"/panel/products",exact:!0,children:t(Va,{})}),t($,{path:"/panel/account",exact:!0,children:t($a,{})}),h(ta,{path:"/panel/admin",children:[t($,{path:"/panel/admin/accountties",children:t(Ja,{})}),t($,{path:"/panel/admin/users",children:t(an,{})})]})]})}function on(){const[r,e]=f.exports.useState();return f.exports.useEffect(()=>{e(sessionStorage.getItem("account"))},[]),t(J,{style:{height:"100vh",marginTop:0,marginBottom:0},children:h(p,{style:{height:"100%"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[t(A,{variant:"h4",children:"404"}),t(A,{variant:"subtitle1",children:"Page Not Found | 404"}),t(L,{color:"secondary","aria-label":"home",href:r?"/panel":"/login",children:t(Pr,{})})]})})}function sn({message:r,vertical:e,horizontal:a,miliseconds:n=3e3,children:s}){const[o,i]=le(!1);return f.exports.useEffect(()=>{r&&r.message!==""&&i.on()},[r]),t(Ve,{anchorOrigin:{vertical:e,horizontal:a},onClose:()=>i.off(),autoHideDuration:n,open:o,children:t(xe,{severity:r==null?void 0:r.severity,sx:{width:"100%"},children:s})})}function ln(){const r=ae(),{message:e}=ce();return f.exports.useEffect(()=>{Y.get("token")&&r.push("/panel")},[Y.get("token")]),h("div",{className:"App",children:[h(Dr,{children:[t($,{path:"/",exact:!0,children:t(z,{component:_,to:"/login",children:"Login"})}),t(kr,{path:"/panel",children:t($,{path:["/panel","/panel/clients","/panel/products","/panel/account/changepassword","/panel/account"],component:nn})}),t($,{path:["/login","/register","/forget","/confirmregistration","/resendemail"],component:Zr}),t($,{path:"*",component:on})]}),t(sn,{message:e,vertical:"bottom",horizontal:"center",children:e.message})]})}Ar.render(t(Nr.StrictMode,{children:t(qr,{client:N,children:t(Rr,{children:t(Mr,{children:t(ga,{children:t(ln,{})})})})})}),document.getElementById("root"));
