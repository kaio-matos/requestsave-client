var kt=Object.defineProperty,It=Object.defineProperties;var Vt=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var _e=(r,e,a)=>e in r?kt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,g=(r,e)=>{for(var a in e||(e={}))nt.call(e,a)&&_e(r,a,e[a]);if(Me)for(var a of Me(e))ot.call(e,a)&&_e(r,a,e[a]);return r},w=(r,e)=>It(r,Vt(e));var L=(r,e)=>{var a={};for(var n in r)nt.call(r,n)&&e.indexOf(n)<0&&(a[n]=r[n]);if(r!=null&&Me)for(var n of Me(r))e.indexOf(n)<0&&ot.call(r,n)&&(a[n]=r[n]);return a};var de=(r,e,a)=>(_e(r,typeof e!="symbol"?e+"":e,a),a);import{r as h,j as t,S as Le,A as xe,B as p,C as $t,a as Qt,u as re,b as M,R as $,c as f,F as G,T as A,L as z,d as T,e as E,f as st,g as V,h as J,i as be,k as ke,l as O,m as F,n as k,o as Ie,G as W,p as _,q as _t,s as Wt,t as zt,v as Ut,w as Bt,x as Gt,N as Je,y as Ht,P as Y,z as it,D as lt,E as ct,H as ut,I as jt,J as Yt,K as Jt,M as Kt,O as Xt,Q as Zt,U as er,V as tr,W as rr,X as ar,Y as Se,Z as fe,_ as nr,$ as or,a0 as sr,a1 as ir,a2 as lr,a3 as cr,a4 as ur,a5 as dr,a6 as mr,a7 as he,a8 as Pe,a9 as De,aa as Ae,ab as Ne,ac as qe,ad as At,ae as Nt,af as qt,ag as Rt,ah as fr,ai as hr,aj as Ke,ak as pr,al as gr,am as xr,an as vr,ao as yr,ap as Ve,aq as Er,ar as wr,as as Cr,at as br,au as Sr,av as Pr,aw as Dr,ax as Ar,ay as Nr,az as qr}from"./vendor.063aaafd.js";const Rr=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}};Rr();function ce(r){const[e,a]=h.exports.useState(r),n=h.exports.useRef({toggle(){a(s=>!s)},on(){a(!0)},off(){a(!1)}});return[e,n.current]}function Or({message:r,vertical:e,horizontal:a,miliseconds:n=3e3,children:o}){const[s,i]=ce(!1);return h.exports.useEffect(()=>{r&&r.message!==""&&i.on()},[r]),t(Le,{anchorOrigin:{vertical:e,horizontal:a},onClose:()=>i.off(),autoHideDuration:n,open:s,children:t(xe,{severity:r==null?void 0:r.severity,sx:{width:"100%"},children:o})})}function H({loading:r}){return t(p,{display:"flex",justifyContent:"center",marginTop:2,children:t($t,{style:r?{opacity:1}:{opacity:0},variant:"indeterminate"})})}const Tr="https://requestsave-server.herokuapp.com/api",D=Qt.create({baseURL:Tr,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"*/*",crossDomain:!0}});D.defaults.withCredentials=!0;const U="account",dt="panel",b={account:{login:`${U}/login`,logout:`${U}/logout`,delete:`${U}`,edit:`${U}`,register:`${U}/register`,confirmRegistration:`${U}/confirmregistration`,resendRegisterConfirmation:`${U}/resendregisterconfirmation`,checkJWT:`${U}/checktoken`,forget:`${U}/forgetpassword`,forgetResetpassword:`${U}/forgetresetpassword`,resetpassword:`${U}/resetpassword`},admin:{user:`${dt}/user`,accountTie:`${dt}/accounttie`},models:{request:"/panel/request",client:"/panel/client",product:"/panel/product"}};class Fr{async login(e){return(await D.post(b.account.login,e)).data}async forgetPasswordEmail(e){return(await D.post(b.account.forget,e)).data}async forgetResetpassword(e){return(await D.post(b.account.forgetResetpassword,e)).data}async resetPassword(e){return(await D.post(b.account.resetpassword,e)).data}async register(e){return(await D.post(b.account.register,e)).data}async confirmRegistration(e){return(await D.get(b.account.confirmRegistration,{params:e?g({},e):{}})).data}async resendRegisterEmail(e){return(await D.post(b.account.resendRegisterConfirmation,e)).data}async delete(){return(await D.delete(b.account.delete)).data}async editDocument(e){return(await D.put(b.account.edit,e)).data}async logout(){return(await D.post(b.account.logout)).data}async checkJWT(){return(await D.post(b.account.checkJWT)).data}}const K=new Fr,Ot=h.exports.createContext({});function Mr({children:r}){const[e,a]=h.exports.useState({}),n=re();h.exports.useEffect(()=>{const i=localStorage.getItem("account");i&&a(JSON.parse(i))},[]),h.exports.useEffect(()=>{localStorage.setItem("account",JSON.stringify(e))},[e]);function o(){localStorage.removeItem("account"),n.push("/login")}function s(i){!i||(a(i),n.push("/panel"))}return t(Ot.Provider,{value:{account:e,setAccount:a,logout:o,login:s},children:r})}const ae=()=>h.exports.useContext(Ot),Tt=h.exports.createContext({});function Lr({children:r}){const[e,a]=h.exports.useState({severity:"error",message:""});return t(Tt.Provider,{value:{message:e,setMessage:a},children:r})}const ne=()=>h.exports.useContext(Tt);function kr(r){const{logout:e}=ae(),{setMessage:a}=ne(),u=r,{children:n}=u,o=L(u,["children"]),{isLoading:s,isSuccess:i,mutate:c}=M(K.checkJWT,{onError:({response:v})=>{e(),a({severity:"error",message:v.data.meta.cause})}});h.exports.useEffect(()=>{c()},[history]);function l({location:v}){return f(G,{children:[s?t(H,{loading:s}):"",i&&!s?n:""]})}return t($,w(g({},o),{children:l}))}const Ir={message:"",show:!1};function ve({error:r}){const[e,a]=ce(!1),n=5e3;return h.exports.useEffect(()=>{r&&r.show&&e===!1&&(a.on(),setTimeout(()=>{a.off()},n))},[r]),t(xe,{style:e?{opacity:1}:{opacity:0},severity:"error",children:e?r==null?void 0:r.message:"_________"})}function ye(){return f(A,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xA9 ",t(z,{color:"inherit",href:"#",children:"Website"})," ",new Date().getFullYear(),"."]})}var Ft=(r=>(r.USER="USER",r.ADMIN="ADMIN",r))(Ft||{});const ze=[{code:"USER",type:"Usu\xE1rio"},{code:"ADMIN",type:"Administrador"}];var Q=(r=>(r.TODO="TODO",r.GRAPHIC="GRAPHIC",r.DEALING="DEALING",r.CANCELLED="CANCELLED",r.COMPLETED="COMPLETED",r))(Q||{});const Ce=[{code:"TODO",type:"A fazer",color:"brown"},{code:"GRAPHIC",type:"Gr\xE1fica",color:"yellow"},{code:"DEALING",type:"Negociando",color:"blue"},{code:"CANCELLED",type:"Cancelado",color:"red"},{code:"COMPLETED",type:"Completo",color:"green"}],Re={noRowsLabel:"Sem linhas",noResultsOverlayLabel:"Nenhum resultado encontrado.",errorOverlayDefaultLabel:"Um erro ocorreu.",columnMenuLabel:"Op\xE7\xF5es",columnMenuShowColumns:"Mostrar Colunas",columnMenuFilter:"Filtrar",columnMenuHideColumn:"Esconder",columnMenuUnsort:"Desordenar",columnMenuSortAsc:"Organizar ASC",columnMenuSortDesc:"Organizar DESC",columnsPanelTextFieldLabel:"Encontrar coluna",columnsPanelTextFieldPlaceholder:"T\xEDtulo da coluna",columnsPanelDragIconLabel:"Reordenar coluna",columnsPanelShowAllButton:"Mostrar todos",columnsPanelHideAllButton:"Esconder todos",toolbarColumns:"Colunas",toolbarColumnsLabel:"Selecionar colunas",toolbarFilters:"Filtros",toolbarFiltersLabel:"Mostrar filtros",toolbarFiltersTooltipHide:"Esconder filtros",toolbarFiltersTooltipShow:"Mostrar filtros",filterPanelAddFilter:"Adicionar filtro",filterPanelDeleteIconLabel:"Apagar filtro",filterPanelOperators:"Operadores",filterPanelOperatorAnd:"E",filterPanelOperatorOr:"Ou",filterPanelColumns:"Coluna",filterPanelInputLabel:"Valor",filterPanelInputPlaceholder:"Valor do filtro",filterOperatorContains:"cont\xE9m",filterOperatorEquals:"igual",filterOperatorStartsWith:"come\xE7a com",filterOperatorEndsWith:"termina com",filterOperatorIs:"\xE9",filterOperatorNot:"n\xE3o \xE9",filterOperatorAfter:"depois",filterOperatorOnOrAfter:"\xE9 em ou depois",filterOperatorBefore:"antes",filterOperatorOnOrBefore:"\xE9 em ou antes",filterOperatorIsEmpty:"campo em branco",filterOperatorIsNotEmpty:"campo n\xE3o est\xE1 em branco",toolbarDensity:"Densidade",toolbarDensityLabel:"Densidade",toolbarDensityCompact:"Compacto",toolbarDensityStandard:"Padr\xE3o",toolbarDensityComfortable:"Confort\xE1vel",toolbarExport:"Exportar",toolbarExportLabel:"Exportar",toolbarExportCSV:"Baixar como CSV"},We=6;class Vr{async login(e){if(e.email.toLowerCase()==="admin"&&e.password.toLowerCase()==="admin")return!0;const a=T({email:E().email("Descreva um email v\xE1lido").min(3,"O email deve ser maior ou igual a 6 caracteres").max(100).required("O email \xE9 obrigat\xF3ria"),password:E().min(We,"O email deve ser maior ou igual a 6 caracteres").max(200).required("O email \xE9 obrigat\xF3ria")});try{return await a.validate(e),!0}catch(n){return n}}async changeNames(e){const a=T({firstName:E().min(3,"O nome deve ter pelo menos 3 letras").required(),lastName:E().min(3,"O nome deve ter pelo menos 3 letras").required()});try{return await a.validate(e),!0}catch(n){return n}}async changePassword(e){const a=T({password:E().min(We,"A senha deve ser maior ou igual a 6 caracteres").max(200).required("A senha \xE9 obrigat\xF3ria"),confirmPassword:E().oneOf([st("password"),null],"As senhas devem ser iguais")});try{return await a.validate(e),!0}catch(n){return n}}async register(e){const a=T({firstName:E().required("Descreva o primeiro nome"),lastName:E().required("Descreva o sobrenome"),email:E().email("Descreva um email v\xE1lido").required("Descreva o email"),password:E().required("Descreva a senha"),phoneNumber:E().phone("BR",void 0,"O n\xFAmero n\xE3o est\xE1 dentro dos padr\xF5es").required("Descreva o n\xFAmero")});try{return await a.validate(e),!0}catch(n){return n}}async resendRegisterEmail(e){const a=T({email:E().email("Descreva um email v\xE1lido").required("Descreva seu email")});try{return await a.validate(e),!0}catch(n){return n}}async confirmRegistration(e){const a=T({email:E().email("O email recebido \xE9 inv\xE1lido").required("Houve um erro: Faltou email de confirma\xE7\xE3o"),token:E().required("Houve um erro: Faltou token de confirma\xE7\xE3o")});try{return await a.validate(e),!0}catch(n){return n}}async forgetPasswordEmail(e){const a=T({email:E().email("O email descrito \xE9 inv\xE1lido").required("Por favor descreva o email")});try{return await a.validate(e),!0}catch(n){return n}}async forgetPasswordCheckCode(e){const a=T({code:E().length(7,"O c\xF3digo deve ter pelo menos 7 caracteres").required("Por favor descreva o c\xF3digo")});try{return await a.validate(e),!0}catch(n){return n}}async forgetResetpassword(e){const a=T({email:E().email("O email descrito \xE9 inv\xE1lido").required("Descreva o email"),code:E().required("\xC9 necess\xE1rio o c\xF3digo para o reset de senha"),password:E().min(We,"A senha deve ser maior ou igual a 6 caracteres").max(200).required("A senha \xE9 obrigat\xF3ria"),confirmPassword:E().oneOf([st("password"),null],"As senhas devem ser iguais")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),accountTie_id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID do V\xEDnculo"),firstName:E().required("Erro de valida\xE7\xE3o, faltou: Primeiro nome"),lastName:E().required("Erro de valida\xE7\xE3o, faltou: Sobrenome"),email:E().email("Escreva um email v\xE1lido").required("Erro de valida\xE7\xE3o, faltou: Email"),role:E().equals(ze.map(n=>n.code),"O cargo pode ser apenas: Administrador ou Usu\xE1rio").required("Erro de valida\xE7\xE3o, faltou: Cargo")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var B=new Vr;function $r(r){return M(K.login,r)}function Qr(r){return M(K.editDocument,r)}function _r(r){return M(K.register,r)}function Wr(r){return M(K.resendRegisterEmail,r)}function zr(r){return M(K.confirmRegistration,r)}function Ur(r){return M(K.forgetPasswordEmail,r)}function Br(r){return M(K.forgetResetpassword,r)}function Gr(){const[r,e]=h.exports.useState(!1),[a,n]=h.exports.useState(),o=re(),{login:s}=ae(),{control:i,getValues:c}=J(),{isLoading:l,mutate:u}=$r({onError({response:x}){n({message:x.data.meta.cause,show:!0}),o.push("/login")},onSuccess(x){s(x.data),n({message:"",show:!1})}}),v=async()=>{const{email:x,password:y}=c(),S=await B.login({email:x,password:y});S===!0?u({email:x,password:y}):n({message:S.message,show:!0})},d=x=>{if(x.key==="Enter")return v()},m=()=>{e(!r)},P=()=>(document.addEventListener("keydown",d),function(){document.removeEventListener("keydown",d)});return h.exports.useEffect(P),f(p,{className:"paper",children:[t(be,{className:"avatar",children:t(ke,{})}),t(A,{component:"h1",variant:"h5",children:"Entrar"}),t(O,{control:i,defaultValue:"",name:"email",render:({field:x})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email",autoFocus:!0},x))}),t(O,{control:i,defaultValue:"",name:"password",render:({field:x})=>t(F,g({type:r?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Senha",id:"password",autoComplete:"current-password"},x))}),t(k,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:v,children:"Entrar"}),f(p,{display:"flex",justifySelf:"flex-start",alignItems:"center",width:"100%",children:[t(Ie,{checked:r,color:"primary",onChange:m}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]}),f(p,{marginBottom:2,children:[t(ve,{error:a}),t(H,{loading:l})]}),f(W,{container:!0,justifyContent:"center",spacing:5,children:[t(W,{item:!0,children:t(z,{component:_,to:"/forget",variant:"body2",children:"Esqueceu a senha?"})}),t(W,{item:!0,sm:5,style:{textAlign:"center"},children:t(z,{component:_,to:"/resendemail",variant:"body2",children:"N\xE3o confirmou o email? Enviar novamente"})}),t(W,{item:!0,children:t(z,{component:_,to:"/register",variant:"body2",children:"Criar conta"})})]}),t(p,{style:{position:"absolute",bottom:50},children:t(ye,{})})]})}function Hr(r,e){return e[r]?e[r].step:t(G,{})}function jr({components:r}){const[e,a]=h.exports.useState(0),n=()=>{r[e]&&r[e].onClick(()=>{a(s=>s+1===r.length?s:s+1)})},o=()=>{a(s=>s-1)};return f(p,{marginY:3,children:[t(_t,{activeStep:e,alternativeLabel:!0,children:r.map(({label:s})=>t(Wt,{children:t(zt,{children:s})},s))}),f("div",{children:[Hr(e,r),f("div",{children:[t(k,{disabled:e===0,onClick:o,className:"backButton",children:"Voltar"}),t(k,{variant:"contained",color:"primary",onClick:n,children:e===r.length-1?"Finalizar":"Pr\xF3ximo"})]})]})]})}function Xe(n){var o=n,{message:r,children:e}=o,a=L(o,["message","children"]);const[s,i]=ce(!1),c=5e3;return h.exports.useEffect(()=>{if(!(r==null?void 0:r.message)||s!==!1)return;i.on();const l=setTimeout(()=>{i.off()},c);return()=>clearTimeout(l)},[r]),t(xe,w(g({},a),{style:s?{opacity:1}:{opacity:0},severity:r==null?void 0:r.severity,children:e}))}function Yr(){const[r,e]=h.exports.useState(),[a,n]=h.exports.useState(!1),[o,s]=h.exports.useState({message:"",severity:"success"}),{control:i,getValues:c}=J(),l=re(),u=({response:q})=>{s({severity:"error",message:q.data.meta.cause})},{mutateAsync:v,isLoading:d}=Ur({onError:u,onSuccess(){r&&r(),s({severity:"success",message:"Email enviado com sucesso"})}}),{mutate:m,isLoading:P}=Br({onError:u,onSuccess(){s({severity:"success",message:"Senha alterada com sucesso"}),setTimeout(()=>{l.push("/login")},3e3)}}),x=q=>n(!a);function y(){return f(p,{component:"form",className:"form",method:"POST",children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Insira seu email"})}),t(O,{control:i,defaultValue:"",name:"email",render:({field:q})=>t(F,g({error:(o==null?void 0:o.severity)==="error",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",autoComplete:"email",autoFocus:!0},q))})]})}function S(){return f(p,{component:"form",className:"form",method:"POST",children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Insira o c\xF3digo que enviamos para o seu email"})}),t(O,{control:i,defaultValue:"",name:"code",render:({field:q})=>t(F,g({error:(o==null?void 0:o.severity)==="error",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"C\xF3digo",autoComplete:"code",autoFocus:!0},q))})]})}function C(){return f(p,{component:"form",className:"form",method:"POST",children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Insira sua nova senha"})}),t(O,{control:i,defaultValue:"",name:"password",render:({field:q})=>t(F,g({error:(o==null?void 0:o.severity)==="error",type:a?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Nova senha"},q))}),t(O,{control:i,defaultValue:"",name:"confirmPassword",render:({field:q})=>t(F,g({error:(o==null?void 0:o.severity)==="error",type:a?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirme a senha"},q))}),f(p,{display:"flex",alignItems:"center",marginY:1,children:[t(Ie,{checked:a,color:"primary",onChange:x}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]})]})}const I=async q=>{const j=c().email,ee=await B.forgetPasswordEmail({email:j});if(ee!==!0)return s({severity:"error",message:ee.message});await v({email:j}),e(q)},oe=async q=>{const j=c().code,ee=await B.forgetPasswordCheckCode({code:j});if(ee!==!0)return s({severity:"error",message:ee.message});e(q),s({message:"O c\xF3digo est\xE1 dentro dos padr\xF5es",severity:"success"})},X=async q=>{const at=c(),{confirmPassword:j,code:ee}=at,tt=L(at,["confirmPassword","code"]),rt=await B.forgetResetpassword(w(g({},tt),{confirmPassword:j,code:ee}));if(rt!==!0)return s({severity:"error",message:rt.message});m(w(g({},tt),{token:ee})),e(q)};return f("div",{children:[t(p,{position:"absolute",m:2,children:t(Ut,{component:_,to:"/login",color:"primary","aria-label":"Voltar",size:"small",children:t(Bt,{fontSize:"small"})})}),f(p,{className:"paper",children:[t(be,{className:"avatar",children:t(ke,{})}),t(A,{component:"h1",variant:"h5",children:"Mudar senha"}),t(jr,{components:[{step:t(y,{}),label:"Insira seu email",onClick:q=>I(q)},{step:t(S,{}),label:"Confirme o c\xF3digo",onClick:q=>oe(q)},{step:t(C,{}),label:"Altere sua senha",onClick:q=>X(q)}]}),t(Xe,{message:o,children:o.message}),t(H,{loading:d||P}),t(p,{style:{position:"absolute",bottom:50},children:t(ye,{})})]})]})}function Jr(){return f(p,{className:"paper",sx:{height:"90%",justifyContent:"center",alignItems:"center"},children:[t(p,{display:"flex",justifyContent:"center",children:t(be,{className:"avatar",children:t(Gt,{})})}),f(A,{component:"h1",variant:"h6",children:["Email enviado com sucesso,",t("br",{}),"cheque sua caixa de entrada."]}),f(p,{sx:{display:"flex",gap:2},children:[t(z,{to:"/resendemail",component:_,children:t(k,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",children:"Enviar email novamente"})}),t(z,{to:"/login",component:_,children:t(k,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",children:"Entrar"})})]}),t(p,{style:{position:"absolute",bottom:50},children:t(ye,{})})]})}function Mt({label:r,required:e,field:a}){const v=a,{onChange:n,ref:o}=v,s=L(v,["onChange","ref"]),[i,c]=h.exports.useState(""),l=h.exports.useRef(null),u=h.exports.forwardRef(function(m,P){const S=m,{onChange:x}=S,y=L(S,["onChange"]);return t(Je,w(g({},y),{getInputRef:P,onValueChange:C=>{x({target:{name:m.name,value:C.formattedValue}})},type:"tel",format:"(##) #####-####",mask:""}))});return h.exports.useEffect(()=>{var d;if(i){const m=(d=l.current)==null?void 0:d.children[1].children[0];m==null||m.focus()}},[i]),t(F,g({ref:l,variant:"outlined",margin:"normal",fullWidth:!0,type:"text",label:r,autoComplete:"off",required:e,onChange:d=>{c(d.target.value),n(d)},InputProps:{inputComponent:u}},s))}T().shape({firstName:E().required(),lastName:E().required(),email:E().email().required(),password:E().required(),phoneNumber:E().length(15).required()});function Kr(){const[r,e]=h.exports.useState(!1),[a,n]=h.exports.useState(!1),[o,s]=h.exports.useState(),{control:i,getValues:c}=J(),{mutate:l,isLoading:u}=_r({onError({response:m}){n(!1),s({message:m.data.meta.cause,show:!0})},onSuccess(m){n(!0),s({message:"",show:!1})}}),v=m=>{e(!r)},d=async()=>{const m=c(),P=await B.register(m);if(P!==!0)return s({message:P.message,show:!0});if(m.password!==m.confirmPassword)return s({message:"As duas senhas n\xE3o est\xE3o iguais",show:!0});if(m.password.length<6)return s({message:"A senha deve ser maior que 6 caracteres",show:!0});const S=m,{confirmPassword:x}=S,y=L(S,["confirmPassword"]);l(y)};return h.exports.useEffect(()=>{const m=P=>{if(P.key==="Enter")return d()};return document.addEventListener("keydown",m),function(){document.removeEventListener("keydown",m)}}),t(G,{children:a?t(Jr,{}):f(p,{className:"paper",children:[t(be,{className:"avatar",children:t(ke,{})}),t(A,{component:"h1",variant:"h5",children:"Registrar"}),f(p,{component:"form",className:"form",method:"POST",style:{position:"relative"},children:[t(O,{control:i,defaultValue:"",name:"firstName",render:({field:m})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"Primeiro Nome",autoComplete:"firstName",autoFocus:!0},m))}),t(O,{control:i,defaultValue:"",name:"lastName",render:({field:m})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Sobrenome",autoComplete:"lastName"},m))}),t(O,{control:i,defaultValue:"",name:"email",render:({field:m})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email"},m))}),t(O,{name:"phoneNumber",control:i,defaultValue:"",render:({field:m})=>t(Mt,{label:"N\xFAmero de telefone",error:{message:"",show:!1},required:!0,field:m})}),t(O,{control:i,defaultValue:"",name:"password",render:({field:m})=>t(F,g({type:r?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Senha",id:"password",autoComplete:"current-password"},m))}),t(O,{control:i,defaultValue:"",name:"confirmPassword",render:({field:m})=>t(F,g({type:r?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirmar senha",autoComplete:"current-password"},m))}),f(p,{display:"flex",justifySelf:"flex-start",alignItems:"center",children:[t(Ie,{checked:r,color:"primary",onChange:v}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]}),t(k,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:d,children:"Registrar"}),f(p,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:2,children:[t(ve,{error:o}),t(H,{loading:u})]}),t(W,{container:!0,children:t(W,{item:!0,children:t(z,{component:_,to:"/login",variant:"body2",children:"Entrar"})})}),t(p,{style:{position:"absolute",bottom:25},children:t(ye,{})})]})]})})}function Xr(){const[r,e]=h.exports.useState({severity:"error",message:""}),{mutate:a,isLoading:n}=zr({onError({response:s}){e({severity:"error",message:s.data.meta.cause})},onSuccess(){e({severity:"success",message:"Email confirmado com sucesso"})}}),o=re();return h.exports.useEffect(()=>{(async()=>{const i=new URLSearchParams(o.location.search),c=i.get("email"),l=i.get("token"),u={email:c,token:l},v=await B.confirmRegistration(u);if(v!==!0)return e({severity:"error",message:v.message});a(u)})()},[o.location.search]),t("div",{className:"paper",style:{justifyContent:"center",height:"100vh",marginTop:0,marginBottom:0},children:n?t(H,{loading:n}):f("div",{children:[t(Xe,{sx:{marginY:2},message:r,children:t(A,{fontSize:"1.3rem",component:"h1",children:r.message})}),t(z,{to:"/login",component:_,children:t(k,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",children:"Entrar"})}),t(p,{style:{position:"absolute",bottom:50},children:t(ye,{})})]})})}function Zr(){const[r,e]=h.exports.useState({severity:"error",message:""}),{control:a,getValues:n}=J(),{mutate:o,isLoading:s,isSuccess:i}=Wr({onError({response:u}){e({severity:"error",message:u.data.meta.cause})},onSuccess(){e({severity:"success",message:"Email enviado com sucesso"})}}),c=re(),l=async()=>{const u=n(),v=await B.resendRegisterEmail(u);if(v!==!0)return e({severity:"error",message:v.message});o(u)};return h.exports.useEffect(()=>{const u=v=>{if(v.key==="Enter")return l()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)}),h.exports.useEffect(()=>{if(!i)return;const u=setTimeout(()=>{c.push("/login")},5e3);return()=>clearTimeout(u)},[i]),f(p,{className:"paper",children:[t(be,{className:"avatar",children:t(ke,{})}),t(A,{component:"h1",variant:"h5",children:"Reenviar email de verifica\xE7\xE3o"}),f(p,{component:"form",className:"form",method:"POST",style:{position:"relative"},children:[t(O,{control:a,defaultValue:"",name:"email",render:({field:u})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email",autoFocus:!0},u))}),t(k,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:l,children:"Reenviar email de confirma\xE7\xE3o"}),f(p,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:1,children:[t(H,{loading:s}),t(Xe,{message:r,children:r.message})]}),f(W,{container:!0,children:[t(W,{item:!0,children:t(z,{component:_,to:"/login",variant:"body2",children:"Entrar"})}),t(W,{item:!0,marginX:2,children:t(ye,{})})]})]})]})}function ea(){return f(W,{container:!0,component:"main",className:"root",children:[t(Ht,{}),t(W,{item:!0,xs:!1,sm:4,md:7,className:"image"}),f(W,{item:!0,xs:12,sm:8,md:5,component:Y,elevation:6,square:!0,children:[t($,{path:"/login",children:t(Gr,{})}),t($,{path:"/register",children:t(Kr,{})}),t($,{path:"/forget",children:t(Yr,{})}),t($,{path:"/confirmregistration",children:t(Xr,{})}),t($,{path:"/resendemail",children:t(Zr,{})})]})]})}const me=(r,e,a)=>({label:r,icon:e,link:a});function ta(){const{account:r,logout:e}=ae(),a=(r==null?void 0:r.role)==="ADMIN",n=[me("Painel",t(Xt,{}),"/panel"),me("Clientes",t(Yt,{}),"/panel/clients"),me("Produtos",t(Jt,{}),"/panel/products"),me("Conta",t(Kt,{}),"/panel/account")];function o(){const i=[me("Usu\xE1rios",t(Zt,{}),"/panel/admin/users"),me("N\xFAmeros",t(er,{}),"/panel/admin/accountties")];return t(p,{children:t(it,{sx:{display:"flex"},children:i.map((c,l)=>t(z,{to:c.link,component:_,children:f(lt,{button:!0,sx:{padding:"0.3rem 1rem !important",width:"100%"},children:[t(ct,{children:c.icon}),t(ut,{primary:c.label})]})},c.label))})})}function s(){return f(p,{role:"presentation",sx:{display:"flex",justifyContent:"space-between"},children:[t(it,{sx:{display:"flex"},children:n.map((i,c)=>t(z,{to:i.link,component:_,children:f(lt,{button:!0,sx:{padding:"0.3rem 1rem !important",width:"100%"},children:[t(ct,{children:i.icon}),t(ut,{primary:i.label})]})},i.label))}),a?t(o,{}):"",t(k,{startIcon:t(jt,{}),variant:"text",color:"error",onClick:e,sx:{padding:"0.3rem 1rem !important",width:"fit-content"},children:"Sair"})]})}return t(s,{})}function ra(r){const[e,a]=ce(!1),{account:n}=ae(),o=re(),l=r,{children:s}=l,i=L(l,["children"]);h.exports.useEffect(()=>{async function u(){(n==null?void 0:n.role)?(n==null?void 0:n.role)===Ft.ADMIN?a.on():(a.off(),o.push("/panel")):(a.off(),o.push("/login"))}u()},[o,n==null?void 0:n.role]);function c({location:u}){return t(G,{children:e?s:""})}return t($,w(g({},i),{children:c}))}function Oe(){return t(tr,{children:t("div",{style:{position:"absolute",top:0,width:"100%"},children:t(rr,{})})})}const N=new ar;class aa{constructor(){de(this,"action",b.models.request)}async createDocument(e){return(await D.post(b.models.request,e)).data}async deleteDocument({id:e}){return(await D.delete(`${b.models.request}/${e}`)).data}async editDocument(n){var o=n,{id:e}=o,a=L(o,["id"]);return(await D.put(`${b.models.request}/${e}`,a)).data}async getDocument(e,a=""){return(await D.get(b.models.request,{params:w(g({},e),{search:a})})).data.data}}const Te=new aa,te="requests";function na(r,e="",a){return Se([te,r,e],()=>Te.getDocument(r,e),g({initialData:()=>{const n=N.getQueryData(te);return n||{quantity:0,table:[]}},refetchOnWindowFocus:!1,keepPreviousData:!0},a))}function oa(r){N.prefetchQuery([te,r],()=>Te.getDocument(r))}async function mt(){N.refetchQueries(te)}function sa(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),mt()}}else r={onSuccess:(e,a,n)=>{mt()}};return M(Te.createDocument,r)}async function ft(r){const[[,e]]=N.getQueriesData(te);if(e){const a=e;a.table=e.table.filter(n=>n.id!==r),N.setQueryData(te,a)}}function ia(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),ft(n.id)}}else r={onSuccess:(e,a,n)=>{ft(a.id)}};return M(Te.deleteDocument,r)}async function ht(r){const[[,e]]=N.getQueriesData(te);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(te,a)}}function la(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),ht(l)}}else r={onSuccess:(i,c,l)=>{ht(c)}};const e=M(Te.editDocument,r),a=e.mutate,n=e.mutateAsync,o=i=>{const v=i,{product:c,client:l}=v,u=L(v,["product","client"]);return a(u)},s=i=>{const v=i,{product:c,client:l}=v,u=L(v,["product","client"]);return n(u)};return e.mutate=o,e.mutateAsync=s,e}class ca{constructor(){de(this,"action",b.models.client)}async createDocument(e){return(await D.post(b.models.client,e)).data}async deleteDocument({id:e}){return(await D.delete(`${b.models.client}/${e}`)).data}async editDocument(n){var o=n,{id:e}=o,a=L(o,["id"]);return(await D.put(`${b.models.client}/${e}`,a)).data}async getDocument(e,a=""){return(await D.get(b.models.client,{params:w(g({},e),{search:a})})).data.data}}const $e=new ca,se="clients";function Ze(r,e=""){return Se([se,r],()=>$e.getDocument(r,e),{initialData(){const a=N.getQueryData(se);return a||{quantity:25,table:[]}},keepPreviousData:!0,refetchOnWindowFocus:!1})}async function pt(r){N.refetchQueries(se)}function ua(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),pt(a.data)}}else r={onSuccess:(e,a,n)=>{pt(e.data)}};return M($e.createDocument,r)}async function gt(r){const[[,e]]=N.getQueriesData(se);if(e){const a=e.table.filter(n=>n.id!==r);N.setQueryData(se,a)}}function da(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),gt(n.id)}}else r={onSuccess:(e,a,n)=>{gt(a.id)}};return M($e.deleteDocument,r)}async function xt(r){const[[,e]]=N.getQueriesData(se);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(se,a)}}function ma(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),xt(l)}}else r={onSuccess:(i,c,l)=>{xt(c)}};const e=M($e.editDocument,r),a=e.mutate,n=e.mutateAsync,o=i=>{const u=i,{requests:c}=u,l=L(u,["requests"]);return a(l)},s=i=>{const u=i,{requests:c}=u,l=L(u,["requests"]);return n(l)};return e.mutate=o,e.mutateAsync=s,e}class fa{constructor(){de(this,"action",b.models.product)}async createDocument(e){return(await D.post(b.models.product,e)).data}async deleteDocument({id:e}){return(await D.delete(`${b.models.product}/${e}`)).data}async editDocument(n){var o=n,{id:e}=o,a=L(o,["id"]);return(await D.put(`${b.models.product}/${e}`,a)).data}async getDocument(e,a=""){return(await D.get(b.models.product,{params:w(g({},e),{search:a})})).data.data}}const Qe=new fa,ie="products";function et(r,e=""){return Se([ie,r],()=>Qe.getDocument(r,e),{refetchOnWindowFocus:!1,initialData(){const a=N.getQueryData(ie);return a||{quantity:25,table:[]}}})}async function vt(r){N.refetchQueries(ie)}function ha(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),vt(a.data)}}else r={onSuccess:(e,a,n)=>{vt(e.data)}};return M(Qe.createDocument,r)}async function yt(r){const[[,e]]=N.getQueriesData(ie);if(e){const a=e;a.table=e.table.filter(n=>n.id!==r),N.setQueryData(ie,a)}}function pa(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),yt(n.id)}}else r={onSuccess:(e,a,n)=>{yt(a.id)}};return M(Qe.deleteDocument,r)}async function Et(r){const[[,e]]=N.getQueriesData(ie);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(ie,a)}}function ga(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),Et(l)}}else r={onSuccess:(i,c,l)=>{Et(c)}};const e=M(Qe.editDocument,r),a=e.mutate,n=e.mutateAsync,o=i=>{const u=i,{requests:c}=u,l=L(u,["requests"]);return a(l)},s=i=>{const u=i,{requests:c}=u,l=L(u,["requests"]);return n(l)};return e.mutate=o,e.mutateAsync=s,e}function Fe(r){const{api:e,id:a,editDocument:n,deleteDocument:o,validations:s}=r,{setMessage:i}=ne(),[c,l]=ce(!1),u=e.getRowMode(a)==="edit",v=y=>{y.stopPropagation(),e.setRowMode(a,"edit")},d=async y=>{y.stopPropagation();const S=e.getRow(a);e.commitRowChange(a);const C=e.getRow(a);if(C===null)return;const I=await s.editValidation(C);if(I!==!0)return i({message:I.message,severity:"error"});if(JSON.stringify(S)===JSON.stringify(C))return e.setRowMode(a,"view");try{const oe=await n(C);e.setRowMode(a,"view"),i({message:oe.message,severity:"success"})}catch(oe){const{response:X}=oe;e.updateRows([g({},S)]),i({message:X.data.meta.cause,severity:"error"})}},m=y=>{y.stopPropagation(),l.toggle()},P=async()=>{const y=e.getRow(a);try{const S=await s.deleteValidation({id:a});if(S!==!0)return i({message:S.message,severity:"error"});const C=await o({id:a});e.setRowMode(a,"view"),e.updateRows([{id:a,_action:"delete"}]),i({message:C.message,severity:"success"})}catch(S){const{response:C}=S;e.updateRows([g({},y)]),i({message:C.data.meta.cause,severity:"error"})}},x=y=>{y.stopPropagation(),e.setRowMode(a,"view"),e.getRow(a).isNew&&e.updateRows([{id:a,_action:"delete"}])};return u?f(G,{children:[t(fe,{color:"primary",size:"small","aria-label":"save",onClick:d,children:t(nr,{fontSize:"small"})}),t(fe,{color:"inherit",size:"small","aria-label":"cancel",onClick:x,children:t(or,{fontSize:"small"})})]}):f(G,{children:[t(fe,{color:"primary",size:"small","aria-label":"Editar",onClick:v,children:t(sr,{fontSize:"small"})}),t(fe,{color:"inherit",size:"small","aria-label":"Deletar",onClick:m,children:t(ir,{fontSize:"small"})}),t(lr,{open:c,onClose:()=>{},children:f(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"3px solid #47474741",boxShadow:24,p:4},children:[t(A,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Voc\xEA tem certeza que quer apagar este item?"}),f(p,{display:"flex",sx:{justifyContent:"space-between"},children:[t(k,{onClick:P,color:"error",startIcon:t(cr,{color:"error"}),children:"Apagar"}),t(k,{onClick:m,color:"primary",startIcon:t(ur,{}),children:"Cancelar"})]})]})})]})}function R({params:r,value:e}){return t(dr,{title:e||(r?r.row[r.field]:""),children:t("span",{className:"table-cell-trucate",children:e||(r?r.row[r.field]:"")})})}const we=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});function Ue(r){const{id:e,api:a,field:n,value:o}=r;return t(Je,{style:{border:"none",outline:"none",fontSize:"1rem"},value:o,onValueChange:s=>{a.setEditCellValue({id:e,field:n,value:s.floatValue})},thousandSeparator:".",decimalSeparator:",",allowNegative:!1,maxLength:20})}const pe=r=>r?mr(new Date(r),"dd/MM/yyyy"):"";class xa{async create(e){const a=T().shape({expiresIn:he().required("Selecione uma data"),product_id:E().required("Selecione um produto"),client_id:E().required("Selecione um cliente"),status:E().equals(Ce.map(n=>n.code)).required("Selecione um status"),paidOut:V().moreThan(-1,"O valor pago deve ser maior ou igual \xE0 0 ").required("Descreva o valor pago, se n\xE3o foi pago escreva 0"),price:V().moreThan(0,"O pre\xE7o deve ser maior que 0").required("Descreva o pre\xE7o do pedido"),title:E().min(3,"O t\xEDtulo deve conter pelo menos 3 letras").max(50).required("Descreva o t\xEDtulo")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T().shape({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),product_id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID do produto"),client_id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID do cliente"),title:E().min(3,"O t\xEDtulo precisa ter pelo menos 3 caracteres").max(50,"O t\xEDtulo apenas pode ter no m\xE1ximo 50 caracteres").required("Erro de valida\xE7\xE3o, faltou: T\xEDtulo"),status:E().equals(Ce.map(n=>n.code)).required("Selecione um status"),paidOut:V().moreThan(-1,"O valor pago deve ser maior ou igual \xE0 0 ").required("Descreva o valor pago, se n\xE3o foi pago escreva 0"),price:V().moreThan(0,"O pre\xE7o deve ser maior que 0").required("Descreva o pre\xE7o do pedido"),expiresIn:he().required("Erro de valida\xE7\xE3o, faltou: Expira em"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var Be=new xa;function va({clients:r,products:e,deleteRequest:a,editRequest:n}){return[{field:"client_id",headerName:"Cliente",type:"singleSelect",description:"Cliente que fez o pedido",flex:1,editable:!0,valueFormatter:s=>{var i;return((i=r.find(({id:c})=>c===s.value))==null?void 0:i.name)||""},renderCell:s=>t(R,{value:s.formattedValue}),valueOptions:r.map(({id:s,name:i})=>({value:s,label:i}))},{field:"title",headerName:"T\xEDtulo",description:"T\xEDtulo do pedido",minWidth:140,flex:1,editable:!0,renderCell:R},{field:"product_id",headerName:"Produto",type:"singleSelect",description:"Produto escolhido pelo cliente",flex:1,editable:!0,valueFormatter:s=>{var i;return((i=e.find(({id:c})=>c===s.value))==null?void 0:i.name)||""},renderCell:s=>t(R,{value:s.formattedValue}),valueOptions:e.map(({id:s,name:i})=>({value:s,label:i}))},{field:"createdAt",headerName:"In\xEDcio",type:"date",description:"Data de cria\xE7\xE3o do pedido",hide:!0,editable:!0,flex:1,valueFormatter:s=>pe(s.value),renderCell:({formattedValue:s})=>t(R,{value:s})},{field:"expiresIn",headerName:"Final",type:"date",description:"Prazo final do pedido",flex:1,editable:!0,valueFormatter:s=>pe(s.value),renderCell:({formattedValue:s})=>t(R,{value:s})},{field:"price",headerName:"Pre\xE7o",type:"number",description:"Pre\xE7o cobrado",headerAlign:"left",align:"left",flex:1,editable:!0,renderEditCell:Ue,valueFormatter:({value:s})=>we.format(Number(s)),renderCell:({formattedValue:s})=>t(R,{value:s})},{field:"paidOut",headerName:"Pago",type:"number",description:"Valor adiantado pelo cliente",headerAlign:"left",align:"left",flex:1,editable:!0,renderEditCell:Ue,valueFormatter:({value:s})=>we.format(Number(s)),renderCell:({formattedValue:s})=>t(R,{value:s})},{field:"balance",headerName:"Saldo",type:"number",description:"Valor que ainda falta ser pago",headerAlign:"left",align:"left",flex:1,valueFormatter:({value:s})=>we.format(Number(s)),renderCell:({formattedValue:s})=>t(R,{value:s})},{field:"status",headerName:"Status",type:"singleSelect",description:"Condi\xE7\xE3o do pedido",flex:1,editable:!0,valueFormatter:s=>{const i=s.value,c=Ce.find(u=>u.code===i);return c?c.type:"A fazer"},renderCell:({formattedValue:s})=>t(R,{value:s}),valueOptions:Ce.map(({code:s,type:i})=>({value:s,label:i}))},{field:"actions",headerName:"A\xE7\xF5es",width:75,headerAlign:"center",align:"center",disableExport:!0,sortable:!1,filterable:!1,disableColumnMenu:!0,disableReorder:!0,renderCell:s=>t(Fe,g({validations:{deleteValidation:Be.delete,editValidation:Be.edit},editDocument:n,deleteDocument:a},s))}]}const ya=Pe({palette:{primary:{main:"#1976d2"}}},De);function Ea(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:o}=ne(),s={page:a.page,pageSize:a.pageSize},{error:i,data:c,isFetching:l}=na(s,"",{onSuccess:C=>{e(C.table),n(I=>w(g({},I),{rowCount:C.quantity}))}}),{data:u}=Ze(),{data:v}=et(),{mutateAsync:d,isLoading:m}=ia(),{mutateAsync:P,isLoading:x}=la(),y=va({clients:(u==null?void 0:u.table)||[],products:(v==null?void 0:v.table)||[],deleteRequest:d,editRequest:P});h.exports.useEffect(()=>{!l&&oa(s),c&&e(c.table)},[a.page,a.pageSize]),h.exports.useEffect(()=>{i&&o({message:i.response.data.meta.cause,severity:"error"})},[i]);const S=C=>{const I=new Date(C.row.expiresIn),oe=C.row.status,X=new Date;let Z="",q="",j="";switch(I.getMonth()<X.getMonth()?q="expired_request":I.getMonth()===X.getMonth()&&(I.getDate()<X.getDate()?q="expired_request":I.getDate()===X.getDate()&&(j="warning_request")),oe){case Q.TODO:Z="status_"+Q.TODO;break;case Q.GRAPHIC:Z="status_"+Q.GRAPHIC;break;case Q.DEALING:Z="status_"+Q.DEALING;break;case Q.CANCELLED:Z="status_"+Q.CANCELLED;break;case Q.COMPLETED:Z="status_"+Q.COMPLETED;break;default:Z=""}return`${Z} ${q} ${j}`};return t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:ya,children:t(Ne,w(g({},a),{rows:r,columns:y,pagination:!0,paginationMode:"server",onPageChange:C=>n(I=>w(g({},I),{page:C})),onPageSizeChange:C=>n(I=>w(g({},I),{pageSize:C})),editMode:"row",onRowEditStart:(C,I)=>{I.defaultMuiPrevented=!0},onRowEditStop:(C,I)=>{I.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Oe},loading:l||m||x,localeText:Re,getRowClassName:S,disableSelectionOnClick:!0}))})})}function Ge({label:r,required:e,field:a}){const v=a,{onChange:n,ref:o}=v,s=L(v,["onChange","ref"]),[i,c]=h.exports.useState(""),l=h.exports.useRef(null),u=h.exports.forwardRef(function(m,P){const S=m,{onChange:x}=S,y=L(S,["onChange"]);return t(Je,w(g({},y),{getInputRef:P,onValueChange:C=>{x({target:{name:m.name,value:C.value}})},thousandSeparator:".",decimalSeparator:",",allowNegative:!1,isNumericString:!0,maxLength:20}))});return h.exports.useEffect(()=>{var d;if(i){const m=(d=l.current)==null?void 0:d.children[1].children[1];m==null||m.focus()}},[i]),t(F,g({ref:l,variant:"outlined",margin:"normal",fullWidth:!0,type:"text",label:r,autoComplete:"off",required:e,onChange:d=>{c(d.target.value),n(d)},InputProps:{startAdornment:t(At,{position:"start",children:"R$"}),inputComponent:u}},s))}function wt({label:r,items:e,nameKey:a,idKey:n,field:o}){const[s,i]=h.exports.useState([]),[c,l]=h.exports.useState(""),u=h.exports.useRef(null);h.exports.useEffect(()=>{e&&i(e)},[e]),h.exports.useEffect(()=>{if(!e)return;const d=e.filter(m=>m[a].includes(c));i(d)},[c]);const v=d=>{const m=d.currentTarget.value;l(m),d.currentTarget.focus()};return f(Nt,{sx:{display:"flex",justifyContent:"space-between"},margin:"normal",variant:"outlined",fullWidth:!0,required:!0,children:[t(qt,{id:r,children:r}),f(Rt,w(g({labelId:r,label:r},o),{children:[t(fr,{onClick:d=>d.stopPropagation(),onKeyDown:d=>d.stopPropagation(),children:t(F,{variant:"outlined",required:!0,ref:u,fullWidth:!0,autoComplete:"off",name:"search",id:"search",value:c,onChange:v,autoFocus:!0,InputProps:{startAdornment:t(At,{position:"start",children:t(hr,{})})}})}),s.map(d=>t(Ke,{onFocus:()=>{var P;const m=(P=u.current)==null?void 0:P.children[0].children[1];m==null||m.focus()},className:"searchMenu-items",value:d[n],children:f(pr,{sx:{display:"flex",justifyContent:"space-between"},children:[f("span",{children:[d[a]," "]}),"\xA0\xA0",t("span",{children:d.basePrice?f("small",{children:["Pre\xE7o base ",we.format(Number(d.basePrice))]}):""})]})},d[n]))]}))]})}function wa({name:r,setValue:e}){const[a,n]=h.exports.useState(),[o,s]=h.exports.useState();return h.exports.useEffect(()=>{e(r,new Date),n(new Date)},[]),t(gr,{dateAdapter:xr,locale:vr,children:t(yr,{onError:i=>{if(i)return s({message:"Data inv\xE1lida",show:!0})},value:a,onChange:i=>{n(i),e(r,i),s({message:"",show:!1})},renderInput:i=>t(F,w(g({},i),{margin:"normal",autoComplete:"off",required:!0,fullWidth:!0,helperText:o==null?void 0:o.message}))})})}function Ca({error:r,vertical:e,horizontal:a,miliseconds:n}){const[o,s]=ce(!1);return h.exports.useEffect(()=>{r&&r.show&&s.on()},[r]),t(Le,{anchorOrigin:{vertical:e,horizontal:a},onClose:()=>s.off(),autoHideDuration:n,open:o,children:t(xe,{severity:"error",sx:{width:"100%"},children:r==null?void 0:r.message})})}function ba(){const{control:r,setValue:e,getValues:a,reset:n}=J(),[o,s]=h.exports.useState(),{isLoading:i,mutate:c}=sa({onError({response:d}){s({message:d.data.meta.cause,show:!0})},onSuccess(){s({message:"",show:!1})}}),{data:l}=Ze(),{data:u}=et(),v=async()=>{const d=a();d.paidOut=d.paidOut?Number(d.paidOut):0,d.price=d.price?Number(d.price):0;const m=await Be.create(d);m===!0?(c(d),n({client_id:"",title:"",product_id:"",status:Q.TODO,price:"",paidOut:"",expiresIn:d.expiresIn})):s({message:m.message,show:!0})};return h.exports.useEffect(()=>{e("status",Q.TODO)},[e]),t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(Y,{sx:{minHeight:"90vh"},elevation:5,children:f(p,{padding:2,children:[t(A,{style:{fontSize:"1.4rem"},variant:"h1",component:"h1",children:"Criar pedido"}),t(p,{children:t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"})}),f(p,{children:[t(O,{name:"title",control:r,defaultValue:"",render:({field:d})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"T\xEDtulo",autoComplete:"off",autoFocus:!0},d))}),t(O,{name:"price",control:r,render:({field:d})=>t(Ge,{label:"Pre\xE7o",error:o,required:!0,field:d})}),t(O,{name:"paidOut",control:r,render:({field:d})=>t(Ge,{label:"Pago",error:o,required:!1,field:d})}),t(O,{name:"status",control:r,render:({field:d})=>{const x=d,{value:m}=x,P=L(x,["value"]);return f(Nt,{margin:"normal",variant:"outlined",fullWidth:!0,required:!0,sx:{display:"flex",flexDirection:"column"},children:[t(qt,{id:"status",children:"Status"}),t(Rt,w(g({defaultValue:"",labelId:"status",id:"status",label:"Status",value:m||"TODO"},P),{children:Ce.map(y=>t(Ke,{value:y.code,children:y.type},y.type))}))]})}}),t(O,{name:"client_id",control:r,defaultValue:"",render:({field:d})=>t(wt,{label:"Cliente",items:(l==null?void 0:l.table)||[],nameKey:"name",idKey:"id",field:d})}),t(O,{name:"product_id",control:r,defaultValue:"",render:({field:d})=>t(wt,{label:"Produto",items:(u==null?void 0:u.table)||[],nameKey:"name",idKey:"id",field:d})}),t(wa,{name:"expiresIn",setValue:e})]}),f(p,{display:"flex",gap:"5",children:[f(k,{onClick:v,color:"primary",children:["Criar",t(Ve,{})]}),t(H,{loading:i})]}),t(Ca,{miliseconds:1500,error:o,vertical:"bottom",horizontal:"left"})]})})})}const Ee={panelContainer:{display:"flex",gap:"2rem"}};function Sa(){return f(p,{sx:Ee.panelContainer,children:[t(ba,{}),t(Ea,{})]})}class Pa{async create(e){const a=T().shape({name:E().min(3,"O nome precisa ter pelo menos 3 caracteres").max(50).required("O nome \xE9 obrigat\xF3rio"),email:E().email("Descreva o email corretamente")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),name:E().min(3,"O nome precisa ter pelo menos 3 caracteres").max(50,"O nome apenas pode ter no m\xE1ximo 50 caracteres").required("Erro de valida\xE7\xE3o, faltou: Nome"),email:E().email("Descreva o email corretamente"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var He=new Pa;function Da(){const{control:r,getValues:e,reset:a}=J(),[n,o]=h.exports.useState(),{isLoading:s,mutate:i}=ua({onError({response:l}){o({message:l.data.meta.cause,show:!0})},onSuccess(){o({message:"",show:!1})}});return t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(Y,{sx:{minHeight:"90vh"},elevation:5,children:f(p,{padding:2,children:[t(A,{style:{fontSize:"1.5rem"},variant:"h1",component:"h1",children:"Criar cliente"}),f(p,{children:[t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"}),t(ve,{error:n})]}),f(p,{sx:{columnGap:25},children:[t(O,{control:r,defaultValue:"",name:"name",render:({field:l})=>t(F,g({error:n?n.show:!1,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Nome do cliente",autoComplete:"off",autoFocus:!0},l))}),t(O,{control:r,defaultValue:"",name:"email",render:({field:l})=>t(F,g({variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email do cliente",autoComplete:"off"},l))}),f(k,{onClick:async()=>{const l=e(),u=await He.create(l);u===!0?(i(l),a({name:"",email:""})):o({message:u.message,show:!0})},color:"primary",children:["Criar",t(Ve,{})]}),t(H,{loading:s})]})]})})})}const Aa=48;function Na({children:r}){const[e,a]=h.exports.useState(null),[n,o]=ce(!1);return f(G,{children:[t(fe,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":n?"true":void 0,"aria-haspopup":"true",onClick:c=>{r.length!==0&&(a(c.currentTarget),o.on())},children:t(Er,{})}),t(wr,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:e,open:n,onClose:()=>{a(null),o.off()},PaperProps:{style:{maxHeight:Aa*4.5,width:"20ch"}},children:r})]})}function qa({deleteClient:r,editClient:e}){return[{field:"name",headerName:"Cliente",description:"Nome do cliente",editable:!0,flex:1,renderCell:R},{field:"email",headerName:"Email",description:"Email do cliente",editable:!0,flex:1,renderCell:R},{field:"requests",headerName:"Pedidos",description:"Pedidos do cliente",align:"right",filterable:!1,flex:1,valueFormatter:n=>{const o=n.value;let s="";return o==null||o.forEach((i,c)=>{o[c].title===o[o.length-1].title?s+=i.title:s+=i.title+", "}),s},renderCell:n=>{var o,s;return t(Na,{children:(s=(o=n==null?void 0:n.row)==null?void 0:o.requests)==null?void 0:s.map(i=>t(Ke,{children:t(R,{value:i.title})},i.id))})}},{field:"createdAt",headerName:"Adicionado em",type:"date",editable:!0,valueFormatter:n=>pe(n.value),renderCell:({formattedValue:n})=>t(R,{value:n}),description:"Data de cria\xE7\xE3o do cliente",flex:1},{field:"actions",headerName:"A\xE7\xF5es",headerAlign:"center",align:"center",width:75,sortable:!1,filterable:!1,disableExport:!0,disableColumnMenu:!0,disableReorder:!0,renderCell:n=>t(Fe,g({validations:{deleteValidation:He.delete,editValidation:He.edit},editDocument:e,deleteDocument:r},n))}]}const Ra=Pe({palette:{primary:{main:"#1976d2"}}},De);function Oa(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:o}=ne(),s={page:a.page,pageSize:a.pageSize},{data:i,isFetching:c,error:l}=Ze(s,""),{mutateAsync:u,isLoading:v}=da(),{mutateAsync:d,isLoading:m}=ma(),P=qa({deleteClient:u,editClient:d});return h.exports.useEffect(()=>{!i||(e(i.table),n(x=>w(g({},x),{rowCount:i.quantity})))},[i]),h.exports.useEffect(()=>{l&&o({message:l.response.data.meta.cause,severity:"error"})},[l]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:Ra,children:t(Ne,w(g({},a),{rows:r,columns:P,pagination:!0,paginationMode:"server",onPageChange:x=>n(y=>w(g({},y),{page:x})),onPageSizeChange:x=>n(y=>w(g({},y),{pageSize:x})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(x,y)=>{y.defaultMuiPrevented=!0},onRowEditStop:(x,y)=>{y.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Oe},loading:c||v||m,localeText:Re}))})})}function Ta(){return t(G,{children:f(p,{sx:Ee.panelContainer,children:[t(Da,{}),t(Oa,{})]})})}class Fa{async create(e){const a=T().shape({basePrice:V().strict().positive("O pre\xE7o base deve ser maior do que 0").required("Descreva o pre\xE7o base"),name:E().min(3,"O nome deve conter pelo menos 3 letras").max(50,"O limite do nome \xE9 50 letras").required("O nome \xE9 obrigat\xF3rio")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),name:E().min(3,"O nome precisa ter pelo menos 3 caracteres").max(50,"O nome apenas pode ter no m\xE1ximo 50 caracteres").required("Erro de valida\xE7\xE3o, faltou: Nome"),basePrice:V().strict().positive().required("Erro de valida\xE7\xE3o, faltou: Pre\xE7o Base"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var je=new Fa;function Ma(){const{getValues:r,reset:e,control:a}=J(),[n,o]=h.exports.useState(),{isLoading:s,mutate:i}=ha({onError({response:l}){o({message:l.data.meta.cause,show:!0})},onSuccess(){o({message:"",show:!1})}});return t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(Y,{sx:{minHeight:"90vh"},elevation:5,children:f(p,{padding:2,children:[t(A,{style:{fontSize:"1.5rem"},variant:"h1",component:"h1",children:"Criar produto"}),f(p,{children:[t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"}),t(ve,{error:n})]}),f(p,{sx:{gridColumnGap:25},children:[t(O,{name:"name",control:a,defaultValue:"",render:({field:l})=>t(F,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:n?n.show:!1,label:"Nome do produto",autoComplete:"off",autoFocus:!0},l))}),t(O,{name:"basePrice",control:a,defaultValue:"",render:({field:l})=>t(Ge,{label:"Pre\xE7o base",error:n,required:!0,field:l})}),f(p,{display:"flex",gap:"5",children:[f(k,{onClick:async()=>{const l=r();l.basePrice=+l.basePrice;const u=await je.create(l);u===!0?(i(l),e({name:"",basePrice:""})):o({message:u.message,show:!0})},color:"primary",children:["Criar",t(Ve,{})]}),t(H,{loading:s})]})]})]})})})}function La({deleteProduct:r,editProduct:e}){return[{field:"name",headerName:"Produto",flex:1,editable:!0,renderCell:R},{field:"basePrice",headerName:"Pre\xE7o base R$",type:"number",align:"left",headerAlign:"left",flex:1,editable:!0,valueFormatter:({value:n})=>we.format(Number(n)),renderEditCell:Ue,renderCell:({formattedValue:n})=>t(R,{value:n})},{field:"createdAt",headerName:"Adicionado em",valueFormatter:n=>pe(n.value),renderCell:({formattedValue:n})=>t(R,{value:n}),type:"date",flex:1,editable:!0},{field:"actions",headerName:"A\xE7\xF5es",align:"center",headerAlign:"center",width:75,sortable:!1,filterable:!1,disableExport:!0,disableColumnMenu:!0,disableReorder:!0,renderCell:n=>t(Fe,g({validations:{deleteValidation:je.delete,editValidation:je.edit},editDocument:e,deleteDocument:r},n))}]}const ka=Pe({palette:{primary:{main:"#1976d2"}}},De);function Ia(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:o}=ne(),s={page:a.page,pageSize:a.pageSize},{data:i,isFetching:c,error:l}=et(s,""),{mutateAsync:u,isLoading:v}=pa(),{mutateAsync:d,isLoading:m}=ga(),P=La({deleteProduct:u,editProduct:d});return h.exports.useEffect(()=>{!i||(e(i.table),n(x=>w(g({},x),{rowCount:i.quantity})))},[i]),h.exports.useEffect(()=>{l&&o({message:l.response.data.meta.cause,severity:"error"})},[l]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:ka,children:t(Ne,w(g({},a),{rows:r,columns:P,pagination:!0,paginationMode:"server",onPageChange:x=>n(y=>w(g({},y),{page:x})),onPageSizeChange:x=>n(y=>w(g({},y),{pageSize:x})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(x,y)=>{y.defaultMuiPrevented=!0},onRowEditStop:(x,y)=>{y.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Oe},loading:c||v||m,localeText:Re}))})})}function Va(){return f(p,{sx:Ee.panelContainer,children:[t(Ma,{}),t(Ia,{})]})}function $a(){const[r,e]=h.exports.useState(!0),[a,n]=h.exports.useState({first:"",last:""}),[o,s]=h.exports.useState({message:"",show:!1,severity:"success"}),{setAccount:i,account:c}=ae(),{isLoading:l,mutate:u}=Qr({onError({response:d}){n({first:c.firstName,last:c.lastName}),s({message:d.data.meta.cause,show:!0,severity:"error"})},onSuccess(d){i({email:c.email,firstName:a.first,lastName:a.last,role:c.role}),s({message:d.message,show:d.data,severity:"success"}),e(!0)}});h.exports.useEffect(()=>{n({first:c.firstName,last:c.lastName})},[]);const v=async()=>{const d={firstName:a.first,lastName:a.last};if(d.firstName===c.firstName&&d.lastName===c.lastName)return;const m=await B.changeNames(d);m===!0?u(d):s({message:m.message,show:!0,severity:"error"})};return t(G,{children:f(p,{sx:w(g({},Ee.panelContainer),{height:"90vh",justifyContent:"center",alignItems:"center"}),children:[f(p,{display:"grid",gap:5,sx:{height:"80%",width:"90%",padding:3,gridTemplateColumns:"1fr 1fr"},children:[f(Y,{sx:{padding:3},elevation:3,children:[f(p,{sx:{marginBottom:3},children:[t(A,{variant:"h4",gutterBottom:!0,component:"div",children:"Conta"}),f("div",{children:[t(A,{variant:"subtitle1",gutterBottom:!0,component:"div",children:"Nome:"}),f(A,{children:[c.firstName," ",c.lastName]})]})]}),f(p,{children:[t(A,{variant:"subtitle1",gutterBottom:!0,component:"div",children:"Email:"}),t(A,{children:c.email})]})]}),f(Y,{sx:{padding:3,position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:3,children:[f(p,{children:[t(p,{sx:{position:"absolute",top:0,right:0,transform:"translate(50%, -50%)"},children:t(fe,{onClick:()=>e(!r),size:"large",children:r?t(Cr,{fontSize:"large"}):t(br,{fontSize:"large"})})}),t(F,{variant:"outlined",margin:"normal",disabled:r,required:!0,fullWidth:!0,defaultValue:c.firstName,onChange:d=>n(m=>w(g({},m),{first:d.target.value})),name:"firstName",label:"Primeiro nome",autoComplete:"off",autoFocus:!0}),t(F,{variant:"outlined",margin:"normal",disabled:r,required:!0,fullWidth:!0,defaultValue:c.lastName,onChange:d=>n(m=>w(g({},m),{last:d.target.value})),name:"lastName",label:"\xDAltimo nome",autoComplete:"off",autoFocus:!0}),f(p,{sx:{display:"flex",justifyContent:"space-between"},children:[t(k,{onClick:v,disabled:r,color:"primary",children:"Salvar altera\xE7\xF5es"}),t(k,{onClick:()=>{n({first:c.firstName,last:c.lastName}),e(!0)},disabled:r,color:"error",children:"Cancelar"})]})]}),t(p,{children:t(k,{disabled:r,color:"primary",to:"/panel/account/changepassword",component:_,children:"Mudar senha"})})]})]}),t(p,{sx:{position:"absolute"},children:t(H,{loading:l})}),t(Le,{open:o.show,onClose:()=>s({message:"",show:!1,severity:"error"}),autoHideDuration:5e3,children:t(xe,{severity:o.severity,children:o.message})})]})})}function Qa({account:r}){const{getValues:e,control:a}=J(),[n,o]=h.exports.useState(),[s,i]=h.exports.useState(),[c,l]=h.exports.useState(!1),u=re(),{mutate:v}=M(K.resetPassword,{onError({response:m}){o({message:m.data.meta.cause,show:!0}),i({message:"",show:!1})},onSuccess(m){i({message:m.message,show:!0}),setTimeout(()=>{u.push("/panel")},1e3),o(Ir)}}),d=async()=>{const{password:m,confirmPassword:P}=e(),x=await B.changePassword({password:m,confirmPassword:P});x===!0?v({email:r.email,password:m}):o({message:x.message,show:!0})};return t(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"},component:"form",className:"form",method:"POST",children:f(Y,{sx:{padding:3},elevation:3,children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Trocar senha"})}),t(O,{control:a,defaultValue:"",name:"password",render:({field:m})=>t(F,g({error:n?n.show:!1,type:c?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Nova senha"},m))}),t(O,{control:a,defaultValue:"",name:"confirmPassword",render:({field:m})=>t(F,g({error:n?n.show:!1,type:c?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirme a senha"},m))}),t(ve,{error:n}),t(Le,{open:s==null?void 0:s.show,autoHideDuration:6e3,children:t(xe,{severity:"success",sx:{width:"100%"},children:s==null?void 0:s.message})}),f(p,{display:"flex",alignItems:"center",marginY:1,children:[t(Ie,{checked:c,color:"primary",onChange:()=>{l(!c)}}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]}),t(k,{onClick:d,color:"primary",children:"Trocar"})]})})}class _a{async create(e){const a=T().shape({phoneNumber:E().phone("BR",void 0,"O n\xFAmero n\xE3o est\xE1 dentro dos padr\xF5es")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),phoneNumber:E().phone("BR",void 0,"O n\xFAmero n\xE3o est\xE1 dentro dos padr\xF5es").required("Descreva o n\xFAmero"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=T({id:V().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var Ye=new _a;class Wa{constructor(){de(this,"User",{async editRole(e){return(await D.put(b.admin.user,e)).data},async delete({id:e}){return(await D.delete(`${b.admin.user}/${e}`)).data},async get(e,a=""){return(await D.get(b.admin.user,{params:w(g({},e),{search:a})})).data.data}});de(this,"AccountTie",{async create(e){return(await D.post(b.admin.accountTie,e)).data},async edit(e){return(await D.put(b.admin.accountTie,e)).data},async delete({id:e}){return(await D.delete(`${b.admin.accountTie}/${e}`)).data},async get(e,a=""){return(await D.get(b.admin.accountTie,{params:w(g({},e),{search:a})})).data.data}})}}const ue=new Wa,le="admin-accountie";function Lt(r,e=""){return Se([le,r],()=>ue.AccountTie.get(r,e),{refetchOnWindowFocus:!1,initialData(){const a=N.getQueryData(le);return a||{quantity:25,table:[]}}})}async function Ct(){N.refetchQueries(le)}function za(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),Ct()}}else r={onSuccess:(e,a,n)=>{Ct()}};return M(ue.AccountTie.create,r)}async function bt(r){const[[,e]]=N.getQueriesData(le);if(e){const a=e;a.table=e.table.filter(n=>n.id!==r),N.setQueryData(le,a)}}function Ua(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),bt(n.id)}}else r={onSuccess:(e,a,n)=>{bt(a.id)}};return M(ue.AccountTie.delete,r)}async function St(r){const[[,e]]=N.getQueriesData(le);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(le,a)}}function Ba(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),St(l)}}else r={onSuccess:(i,c,l)=>{St(c)}};const e=M(ue.AccountTie.edit,r),a=e.mutate,n=e.mutateAsync,o=i=>{const u=i,{account:c}=u,l=L(u,["account"]);return a(l)},s=i=>{const u=i,{account:c}=u,l=L(u,["account"]);return n(l)};return e.mutate=o,e.mutateAsync=s,e}function Ga(){const{getValues:r,reset:e,control:a}=J(),[n,o]=h.exports.useState(),{isLoading:s,mutate:i}=za({onError({response:l}){o({message:l.data.meta.cause,show:!0})},onSuccess(){o({message:"",show:!1})}});return t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(Y,{sx:{minHeight:"90vh"},elevation:5,children:f(p,{padding:2,children:[t(A,{style:{fontSize:"1.5rem"},variant:"h1",component:"h1",children:"Criar n\xFAmero"}),f(p,{children:[t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"}),t(ve,{error:n})]}),f(p,{sx:{gridColumnGap:25},children:[t(O,{name:"phoneNumber",control:a,defaultValue:"",render:({field:l})=>t(Mt,{label:"N\xFAmero de telefone",error:n,required:!0,field:l})}),f(p,{display:"flex",gap:"5",children:[f(k,{onClick:async()=>{const l=r(),u=await Ye.create(l);u===!0?(i(l),e({phoneNumber:""})):o({message:u.message,show:!0})},color:"primary",children:["Criar",t(Ve,{})]}),t(H,{loading:s})]})]})]})})})}function Ha({deleteAccountTie:r,editAccountTie:e}){return[{field:"phoneNumber",headerName:"N\xFAmero de telefone",flex:1,renderCell:R,headerAlign:"left",align:"left"},{field:"account",headerName:"Nome | Email",description:"Nome e email do usu\xE1rio vinculado a este n\xFAmero",flex:1,valueFormatter:n=>{const o=n.value;return o?`${o.firstName} ${o.lastName} | ${o.email}`:"Nenhuma conta vinculada"},renderCell:({formattedValue:n})=>t(R,{value:n})},{field:"createdAt",headerName:"Adicionado em",valueFormatter:n=>pe(n.value),renderCell:({formattedValue:n})=>t(R,{value:n}),type:"date",flex:1,editable:!0},{field:"actions",headerName:"A\xE7\xF5es",width:75,headerAlign:"center",align:"center",filterable:!1,disableExport:!0,sortable:!1,disableColumnMenu:!0,disableReorder:!0,renderCell:n=>t(Fe,g({validations:{deleteValidation:Ye.delete,editValidation:Ye.edit},editDocument:e,deleteDocument:r},n))}]}const ja=Pe({palette:{primary:{main:"#1976d2"}}},De);function Ya(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:o}=ne(),s={page:a.page,pageSize:a.pageSize},{data:i,isFetching:c,error:l}=Lt(s,""),{mutateAsync:u,isLoading:v}=Ua(),{mutateAsync:d,isLoading:m}=Ba(),P=Ha({deleteAccountTie:u,editAccountTie:d});return h.exports.useEffect(()=>{!i||(e(i.table),n(x=>w(g({},x),{rowCount:i.quantity})))},[i]),h.exports.useEffect(()=>{l&&o({message:l.response.data.meta.cause,severity:"error"})},[l]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:ja,children:t(Ne,w(g({},a),{rows:r,columns:P,pagination:!0,paginationMode:"server",onPageChange:x=>n(y=>w(g({},y),{page:x})),onPageSizeChange:x=>n(y=>w(g({},y),{pageSize:x})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(x,y)=>{y.defaultMuiPrevented=!0},onRowEditStop:(x,y)=>{y.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Oe},loading:c||v||m,localeText:Re}))})})}function Ja(){return t(G,{children:f(p,{sx:Ee.panelContainer,children:[t(Ga,{}),t(Ya,{})]})})}function Ka({accountTies:r,deleteUser:e,editUser:a}){return[{field:"firstName",headerName:"Nome",flex:1,renderCell:R},{field:"lastName",headerName:"Sobrenome",flex:1,renderCell:R},{field:"email",headerName:"Email",flex:1,renderCell:R},{field:"accountTie_id",headerName:"V\xEDnculo",type:"singleSelect",flex:1,editable:!0,valueFormatter:o=>{var s;return((s=r.find(({id:i})=>i===o.value))==null?void 0:s.phoneNumber)||""},renderCell:o=>t(R,{value:o.formattedValue}),valueOptions:o=>r.filter(i=>{var c;if(!i.account||((c=o.row)==null?void 0:c.accountTie_id)===i.id)return i}).map(i=>({value:i.id,label:i.phoneNumber}))},{field:"confirmedEmail",headerName:"Confirmou email",flex:1,renderCell:o=>t(R,{value:o.formattedValue}),valueFormatter:({value:o})=>Boolean(o)?"Confirmado":"N\xE3o confirmado"},{field:"createdAt",headerName:"Adicionado em",type:"date",flex:1,valueFormatter:o=>pe(o.value),renderCell:o=>t(R,{value:o.formattedValue})},{field:"role",headerName:"Cargo",type:"singleSelect",description:"Condi\xE7\xE3o do pedido",flex:1,editable:!0,renderCell:o=>t(R,{value:o.formattedValue}),valueFormatter:({value:o})=>{const s=ze.find(i=>i.code===o);return s==null?void 0:s.type},valueOptions:ze.map(({code:o,type:s})=>({value:o,label:s}))},{field:"actions",headerName:"A\xE7\xF5es",headerAlign:"center",align:"center",width:75,sortable:!1,filterable:!1,disableColumnMenu:!0,disableReorder:!0,renderCell:o=>t(Fe,g({validations:{deleteValidation:B.delete,editValidation:B.edit},editDocument:a,deleteDocument:e},o))}]}const ge="admin-user";function Xa(r,e=""){return Se([ge,r],()=>ue.User.get(r,e),{initialData(){const a=N.getQueryData(ge);return a||{quantity:25,table:[]}},keepPreviousData:!0,refetchOnWindowFocus:!1})}async function Pt(r){const[[,e]]=N.getQueriesData(ge);if(e){const a=e.table.filter(n=>n.id!==r);N.setQueryData(ge,a)}}function Za(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),Pt(n.id)}}else r={onSuccess:(e,a,n)=>{Pt(a.id)}};return M(ue.User.delete,r)}async function Dt(r){const[[,e]]=N.getQueriesData(ge);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(ge,a)}}function en(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),Dt(l)}}else r={onSuccess:(i,c,l)=>{Dt(c)}};const e=M(ue.User.editRole,r),a=e.mutate,n=e.mutateAsync,o=i=>{const{id:c,role:l,accountTie_id:u}=i;return a({id:c,role:l,accountTie_id:u})},s=i=>{const{id:c,role:l,accountTie_id:u}=i;return n({id:c,role:l,accountTie_id:u})};return e.mutate=o,e.mutateAsync=s,e}const tn=Pe({palette:{primary:{main:"#1976d2"}}},De);function rn(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),{setMessage:o}=ne(),s={page:a.page,pageSize:a.pageSize},{data:i,refetch:c}=Lt(),{data:l,isFetching:u,error:v}=Xa(s,""),{mutateAsync:d,isLoading:m}=Za(),{mutateAsync:P,isLoading:x}=en({onSuccess:()=>c()}),y=Ka({accountTies:(i==null?void 0:i.table)||[],deleteUser:d,editUser:P});return h.exports.useEffect(()=>{!l||(e(l.table),n(S=>w(g({},S),{rowCount:l.quantity})))},[l]),h.exports.useEffect(()=>{v&&o({message:v.response.data.meta.cause,severity:"error"})},[v]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:tn,children:t(Ne,w(g({},a),{rows:r,columns:y,pagination:!0,paginationMode:"server",onPageChange:S=>n(C=>w(g({},C),{page:S})),onPageSizeChange:S=>n(C=>w(g({},C),{pageSize:S})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(S,C)=>{C.defaultMuiPrevented=!0},onRowEditStop:(S,C)=>{C.defaultMuiPrevented=!0},components:{Toolbar:qe,LoadingOverlay:Oe},loading:u||m||x,localeText:Re}))})})}function an(){return t(G,{children:t(p,{sx:Ee.panelContainer,children:t(rn,{})})})}function nn(){const{account:r}=ae();return f(p,{children:[t(ta,{}),t($,{path:"/panel/account/changepassword",exact:!0,children:t(Qa,{account:r})}),t($,{path:"/panel",exact:!0,children:t(Sa,{})}),t($,{path:"/panel/clients",exact:!0,children:t(Ta,{})}),t($,{path:"/panel/products",exact:!0,children:t(Va,{})}),t($,{path:"/panel/account",exact:!0,children:t($a,{})}),f(ra,{path:"/panel/admin",children:[t($,{path:"/panel/admin/accountties",children:t(Ja,{})}),t($,{path:"/panel/admin/users",children:t(an,{})})]})]})}function on(){const{account:r}=ae();return t(Y,{style:{height:"100vh",marginTop:0,marginBottom:0},children:f(p,{style:{height:"100%"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[t(A,{variant:"h4",children:"404"}),t(A,{variant:"subtitle1",children:"Page Not Found | 404"}),t(k,{color:"secondary","aria-label":"home",href:r?"/panel":"/login",children:t(Sr,{})})]})})}function sn(){const r=re(),{account:e}=ae(),{message:a}=ne();return h.exports.useEffect(()=>{e.firstName&&r.push("/panel")},[e]),f("div",{className:"App",children:[f(Pr,{children:[t($,{path:"/",exact:!0,children:t(z,{component:_,to:"/login",children:"Login"})}),t(kr,{path:"/panel",children:t($,{path:["/panel","/panel/clients","/panel/products","/panel/account/changepassword","/panel/account"],component:nn})}),t($,{path:["/login","/register","/forget","/confirmregistration","/resendemail"],component:ea}),t($,{path:"*",component:on})]}),t(Or,{message:a,vertical:"bottom",horizontal:"center",children:a.message})]})}Dr.render(t(Ar.StrictMode,{children:t(Nr,{client:N,children:t(qr,{children:t(Mr,{children:t(Lr,{children:t(sn,{})})})})})}),document.getElementById("root"));
