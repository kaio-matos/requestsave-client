var kt=Object.defineProperty,It=Object.defineProperties;var Vt=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var ze=(r,e,a)=>e in r?kt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,g=(r,e)=>{for(var a in e||(e={}))nt.call(e,a)&&ze(r,a,e[a]);if(Me)for(var a of Me(e))ot.call(e,a)&&ze(r,a,e[a]);return r},w=(r,e)=>It(r,Vt(e));var O=(r,e)=>{var a={};for(var n in r)nt.call(r,n)&&e.indexOf(n)<0&&(a[n]=r[n]);if(r!=null&&Me)for(var n of Me(r))e.indexOf(n)<0&&ot.call(r,n)&&(a[n]=r[n]);return a};var X=(r,e,a)=>(ze(r,typeof e!="symbol"?e+"":e,a),a);import{r as h,j as t,S as Le,A as ge,B as p,C as $t,a as Qt,u as ne,b as k,R as _,c as f,F as j,T as A,L as H,d as L,e as E,f as st,g as $,h as ee,i as Ce,k as ke,l as F,m as M,n as V,o as Ie,G,p as U,q as _t,s as zt,t as Wt,v as Ut,w as Bt,x as Gt,N as Ve,y as Ht,P as Z,z as it,D as lt,E as ct,H as ut,I as jt,J as Yt,K as Kt,M as Jt,O as Xt,Q as Zt,U as er,V as tr,W as rr,X as re,Y as ar,Z as nr,_ as or,$ as sr,a0 as Se,a1 as ir,a2 as lr,a3 as cr,a4 as ur,a5 as dr,a6 as mr,a7 as hr,a8 as fr,a9 as pr,aa as he,ab as Pe,ac as De,ad as Ae,ae as Ne,af as At,ag as Nt,ah as qt,ai as Rt,aj as gr,ak as xr,al as Je,am as vr,an as yr,ao as Er,ap as wr,aq as br,ar as $e,as as Cr,at as Sr,au as Pr,av as Dr,aw as Ar,ax as Nr,ay as qr,az as Rr,aA as Tr,aB as Fr}from"./vendor.d95b2f88.js";const Or=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}};Or();function ue(r){const[e,a]=h.exports.useState(r),n=h.exports.useRef({toggle(){a(s=>!s)},on(){a(!0)},off(){a(!1)}});return[e,n.current]}function Mr({message:r,vertical:e,horizontal:a,miliseconds:n=3e3,children:o}){const[s,i]=ue(!1);return h.exports.useEffect(()=>{r&&r.message!==""&&i.on()},[r]),t(Le,{anchorOrigin:{vertical:e,horizontal:a},onClose:()=>i.off(),autoHideDuration:n,open:s,children:t(ge,{severity:r==null?void 0:r.severity,sx:{width:"100%"},children:o})})}function J({loading:r}){return t(p,{display:"flex",justifyContent:"center",marginTop:2,children:t($t,{style:r?{opacity:1}:{opacity:0},variant:"indeterminate"})})}const Lr="https://requestsave-server.herokuapp.com/api",D=Qt.create({baseURL:Lr,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"*/*",crossDomain:!0}});D.defaults.withCredentials=!0;const Y="account",dt="panel",C={account:{login:`${Y}/login`,logout:`${Y}/logout`,delete:`${Y}`,edit:`${Y}`,register:`${Y}/register`,confirmRegistration:`${Y}/confirmregistration`,resendRegisterConfirmation:`${Y}/resendregisterconfirmation`,checkJWT:`${Y}/checktoken`,forget:`${Y}/forgetpassword`,forgetResetpassword:`${Y}/forgetresetpassword`,resetpassword:`${Y}/resetpassword`},admin:{user:`${dt}/user`,accountTie:`${dt}/accounttie`},models:{request:"/panel/request",client:"/panel/client",product:"/panel/product"}};class kr{constructor(){X(this,"Register",{async sendEmail(e){return(await D.post(C.account.register,e)).data},async resendEmail(e){return(await D.post(C.account.resendRegisterConfirmation,e)).data},async confirmEmail(e){return(await D.get(C.account.confirmRegistration,{params:e?g({},e):{}})).data}});X(this,"Auth",{async logout(){return(await D.post(C.account.logout)).data},async edit(e){return(await D.put(C.account.edit,e)).data},async resetPassword(e){return(await D.post(C.account.resetpassword,e)).data},async delete(){return(await D.delete(C.account.delete)).data},async checkJWT(){return(await D.post(C.account.checkJWT)).data}});X(this,"ForgetPassword",{async sendEmail(e){return(await D.post(C.account.forget,e)).data},async reset(e){return(await D.post(C.account.forgetResetpassword,e)).data}})}async login(e){return(await D.post(C.account.login,e)).data}}const te=new kr,Tt=h.exports.createContext({});function Ir({children:r}){const[e,a]=h.exports.useState({}),n=ne();h.exports.useEffect(()=>{const i=localStorage.getItem("account");i&&a(JSON.parse(i))},[]),h.exports.useEffect(()=>{localStorage.setItem("account",JSON.stringify(e))},[e]);function o(){localStorage.removeItem("account"),n.push("/login")}function s(i){!i||(a(i),n.push("/panel"))}return t(Tt.Provider,{value:{account:e,setAccount:a,logout:o,login:s},children:r})}const oe=()=>h.exports.useContext(Tt),Ft=h.exports.createContext({});function Vr({children:r}){const[e,a]=h.exports.useState({severity:"error",message:""});return t(Ft.Provider,{value:{message:e,setMessage:a},children:r})}const se=()=>h.exports.useContext(Ft);function $r(r){const{logout:e}=oe(),{setMessage:a}=se(),u=r,{children:n}=u,o=O(u,["children"]),{isLoading:s,isSuccess:i,mutate:c}=k(te.Auth.checkJWT,{onError:({response:x})=>{e(),a({severity:"error",message:x.data.meta.cause})}});h.exports.useEffect(()=>{c()},[history]);function l({location:x}){return f(j,{children:[s?t(J,{loading:s}):"",i&&!s?n:""]})}return t(_,w(g({},o),{children:l}))}const Qr={message:"",show:!1};function xe({error:r}){const[e,a]=ue(!1),n=5e3;return h.exports.useEffect(()=>{r&&r.show&&e===!1&&(a.on(),setTimeout(()=>{a.off()},n))},[r]),t(ge,{style:e?{opacity:1}:{opacity:0},severity:"error",children:e?r==null?void 0:r.message:"_________"})}function ve(){return f(A,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xA9 ",t(H,{color:"inherit",href:"#",children:"Website"})," ",new Date().getFullYear(),"."]})}var Ot=(r=>(r.USER="USER",r.ADMIN="ADMIN",r))(Ot||{});const Ue=[{code:"USER",type:"Usu\xE1rio"},{code:"ADMIN",type:"Administrador"}];var W=(r=>(r.TODO="TODO",r.GRAPHIC="GRAPHIC",r.DEALING="DEALING",r.CANCELLED="CANCELLED",r.COMPLETED="COMPLETED",r))(W||{});const be=[{code:"TODO",type:"A fazer",color:"brown"},{code:"GRAPHIC",type:"Gr\xE1fica",color:"yellow"},{code:"DEALING",type:"Negociando",color:"blue"},{code:"CANCELLED",type:"Cancelado",color:"red"},{code:"COMPLETED",type:"Completo",color:"green"}],qe={noRowsLabel:"Sem linhas",noResultsOverlayLabel:"Nenhum resultado encontrado.",errorOverlayDefaultLabel:"Um erro ocorreu.",columnMenuLabel:"Op\xE7\xF5es",columnMenuShowColumns:"Mostrar Colunas",columnMenuFilter:"Filtrar",columnMenuHideColumn:"Esconder",columnMenuUnsort:"Desordenar",columnMenuSortAsc:"Organizar ASC",columnMenuSortDesc:"Organizar DESC",columnsPanelTextFieldLabel:"Encontrar coluna",columnsPanelTextFieldPlaceholder:"T\xEDtulo da coluna",columnsPanelDragIconLabel:"Reordenar coluna",columnsPanelShowAllButton:"Mostrar todos",columnsPanelHideAllButton:"Esconder todos",toolbarColumns:"Colunas",toolbarColumnsLabel:"Selecionar colunas",toolbarFilters:"Filtros",toolbarFiltersLabel:"Mostrar filtros",toolbarFiltersTooltipHide:"Esconder filtros",toolbarFiltersTooltipShow:"Mostrar filtros",filterPanelAddFilter:"Adicionar filtro",filterPanelDeleteIconLabel:"Apagar filtro",filterPanelOperators:"Operadores",filterPanelOperatorAnd:"E",filterPanelOperatorOr:"Ou",filterPanelColumns:"Coluna",filterPanelInputLabel:"Valor",filterPanelInputPlaceholder:"Valor do filtro",filterOperatorContains:"cont\xE9m",filterOperatorEquals:"igual",filterOperatorStartsWith:"come\xE7a com",filterOperatorEndsWith:"termina com",filterOperatorIs:"\xE9",filterOperatorNot:"n\xE3o \xE9",filterOperatorAfter:"depois",filterOperatorOnOrAfter:"\xE9 em ou depois",filterOperatorBefore:"antes",filterOperatorOnOrBefore:"\xE9 em ou antes",filterOperatorIsEmpty:"campo em branco",filterOperatorIsNotEmpty:"campo n\xE3o est\xE1 em branco",toolbarDensity:"Densidade",toolbarDensityLabel:"Densidade",toolbarDensityCompact:"Compacto",toolbarDensityStandard:"Padr\xE3o",toolbarDensityComfortable:"Confort\xE1vel",toolbarExport:"Exportar",toolbarExportLabel:"Exportar",toolbarExportCSV:"Baixar como CSV"},We=6;class _r{async login(e){if(e.email.toLowerCase()==="admin"&&e.password.toLowerCase()==="admin")return!0;const a=L({email:E().email("Descreva um email v\xE1lido").min(3,"O email deve ser maior ou igual a 6 caracteres").max(100).required("O email \xE9 obrigat\xF3ria"),password:E().min(We,"O email deve ser maior ou igual a 6 caracteres").max(200).required("O email \xE9 obrigat\xF3ria")});try{return await a.validate(e),!0}catch(n){return n}}async changeNames(e){const a=L({firstName:E().min(3,"O nome deve ter pelo menos 3 letras").required(),lastName:E().min(3,"O nome deve ter pelo menos 3 letras").required()});try{return await a.validate(e),!0}catch(n){return n}}async changePassword(e){const a=L({password:E().min(We,"A senha deve ser maior ou igual a 6 caracteres").max(200).required("A senha \xE9 obrigat\xF3ria"),confirmPassword:E().oneOf([st("password"),null],"As senhas devem ser iguais")});try{return await a.validate(e),!0}catch(n){return n}}async register(e){const a=L({firstName:E().required("Descreva o primeiro nome"),lastName:E().required("Descreva o sobrenome"),email:E().email("Descreva um email v\xE1lido").required("Descreva o email"),password:E().required("Descreva a senha"),phoneNumber:E().phone("BR",void 0,"O n\xFAmero n\xE3o est\xE1 dentro dos padr\xF5es").required("Descreva o n\xFAmero")});try{return await a.validate(e),!0}catch(n){return n}}async resendRegisterEmail(e){const a=L({email:E().email("Descreva um email v\xE1lido").required("Descreva seu email")});try{return await a.validate(e),!0}catch(n){return n}}async confirmRegistration(e){const a=L({email:E().email("O email recebido \xE9 inv\xE1lido").required("Houve um erro: Faltou email de confirma\xE7\xE3o"),token:E().required("Houve um erro: Faltou token de confirma\xE7\xE3o")});try{return await a.validate(e),!0}catch(n){return n}}async forgetPasswordEmail(e){const a=L({email:E().email("O email descrito \xE9 inv\xE1lido").required("Por favor descreva o email")});try{return await a.validate(e),!0}catch(n){return n}}async forgetPasswordCheckCode(e){const a=L({code:E().length(7,"O c\xF3digo deve ter pelo menos 7 caracteres").required("Por favor descreva o c\xF3digo")});try{return await a.validate(e),!0}catch(n){return n}}async forgetResetpassword(e){const a=L({email:E().email("O email descrito \xE9 inv\xE1lido").required("Descreva o email"),code:E().required("\xC9 necess\xE1rio o c\xF3digo para o reset de senha"),password:E().min(We,"A senha deve ser maior ou igual a 6 caracteres").max(200).required("A senha \xE9 obrigat\xF3ria"),confirmPassword:E().oneOf([st("password"),null],"As senhas devem ser iguais")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=L({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),accountTie_id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID do V\xEDnculo"),firstName:E().required("Erro de valida\xE7\xE3o, faltou: Primeiro nome"),lastName:E().required("Erro de valida\xE7\xE3o, faltou: Sobrenome"),email:E().email("Escreva um email v\xE1lido").required("Erro de valida\xE7\xE3o, faltou: Email"),role:E().equals(Ue.map(n=>n.code),"O cargo pode ser apenas: Administrador ou Usu\xE1rio").required("Erro de valida\xE7\xE3o, faltou: Cargo")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=L({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var K=new _r;function zr(r){return k(te.login,r)}function Wr(r){return k(te.Auth.edit,r)}function Ur(r){return k(te.Register.sendEmail,r)}function Br(r){return k(te.Register.resendEmail,r)}function Gr(r){return k(te.Register.confirmEmail,r)}function Hr(r){return k(te.ForgetPassword.sendEmail,r)}function jr(r){return k(te.ForgetPassword.reset,r)}function Yr(){const[r,e]=h.exports.useState(!1),[a,n]=h.exports.useState(),o=ne(),{login:s}=oe(),{control:i,getValues:c}=ee(),{isLoading:l,mutate:u}=zr({onError({response:b}){n({message:b.data.meta.cause,show:!0}),o.push("/login")},onSuccess(b){s(b.data),n({message:"",show:!1})}}),x=async()=>{const{email:b,password:S}=c(),v=await K.login({email:b,password:S});v===!0?u({email:b,password:S}):n({message:v.message,show:!0})},m=b=>{if(b.key==="Enter")return x()},d=()=>{e(!r)},P=()=>(document.addEventListener("keydown",m),function(){document.removeEventListener("keydown",m)});return h.exports.useEffect(P),f(p,{className:"paper",children:[t(Ce,{className:"avatar",children:t(ke,{})}),t(A,{component:"h1",variant:"h5",children:"Entrar"}),t(F,{control:i,defaultValue:"",name:"email",render:({field:b})=>t(M,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email",autoFocus:!0},b))}),t(F,{control:i,defaultValue:"",name:"password",render:({field:b})=>t(M,g({type:r?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Senha",id:"password",autoComplete:"current-password"},b))}),t(V,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:x,children:"Entrar"}),f(p,{display:"flex",justifySelf:"flex-start",alignItems:"center",width:"100%",children:[t(Ie,{checked:r,color:"primary",onChange:d}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]}),f(p,{marginBottom:2,children:[t(xe,{error:a}),t(J,{loading:l})]}),f(G,{container:!0,justifyContent:"center",spacing:5,children:[t(G,{item:!0,children:t(H,{component:U,to:"/forget",variant:"body2",children:"Esqueceu a senha?"})}),t(G,{item:!0,sm:5,style:{textAlign:"center"},children:t(H,{component:U,to:"/resendemail",variant:"body2",children:"N\xE3o confirmou o email? Enviar novamente"})}),t(G,{item:!0,children:t(H,{component:U,to:"/register",variant:"body2",children:"Criar conta"})})]}),t(p,{style:{position:"absolute",bottom:50},children:t(ve,{})})]})}function Kr(r,e){return e[r]?e[r].step:t(j,{})}function Jr({components:r}){const[e,a]=h.exports.useState(0),n=()=>{r[e]&&r[e].onClick(()=>{a(s=>s+1===r.length?s:s+1)})},o=()=>{a(s=>s-1)};return f(p,{marginY:3,children:[t(_t,{activeStep:e,alternativeLabel:!0,children:r.map(({label:s})=>t(zt,{children:t(Wt,{children:s})},s))}),f("div",{children:[Kr(e,r),f("div",{children:[t(V,{disabled:e===0,onClick:o,className:"backButton",children:"Voltar"}),t(V,{variant:"contained",color:"primary",onClick:n,children:e===r.length-1?"Finalizar":"Pr\xF3ximo"})]})]})]})}function Xe(n){var o=n,{message:r,children:e}=o,a=O(o,["message","children"]);const[s,i]=ue(!1),c=5e3;return h.exports.useEffect(()=>{if(!(r==null?void 0:r.message)||s!==!1)return;i.on();const l=setTimeout(()=>{i.off()},c);return()=>clearTimeout(l)},[r]),t(ge,w(g({},a),{style:s?{opacity:1}:{opacity:0},severity:r==null?void 0:r.severity,children:e}))}function Xr(){const[r,e]=h.exports.useState(),[a,n]=h.exports.useState(!1),[o,s]=h.exports.useState({message:"",severity:"success"}),{control:i,getValues:c}=ee(),l=ne(),u=({response:R})=>{s({severity:"error",message:R.data.meta.cause})},{mutateAsync:x,isLoading:m}=Hr({onError:u,onSuccess(){r&&r(),s({severity:"success",message:"Email enviado com sucesso"})}}),{mutate:d,isLoading:P}=jr({onError:u,onSuccess(){s({severity:"success",message:"Senha alterada com sucesso"}),setTimeout(()=>{l.push("/login")},3e3)}}),b=R=>n(!a);function S(){return f(p,{component:"form",className:"form",method:"POST",children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Insira seu email"})}),t(F,{control:i,defaultValue:"",name:"email",render:({field:R})=>t(M,g({error:(o==null?void 0:o.severity)==="error",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",autoComplete:"email",autoFocus:!0},R))})]})}function v(){return f(p,{component:"form",className:"form",method:"POST",children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Insira o c\xF3digo que enviamos para o seu email"})}),t(F,{control:i,defaultValue:"",name:"code",render:({field:R})=>t(M,g({error:(o==null?void 0:o.severity)==="error",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"C\xF3digo",autoComplete:"code",autoFocus:!0},R))})]})}function y(){return f(p,{component:"form",className:"form",method:"POST",children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Insira sua nova senha"})}),t(F,{control:i,defaultValue:"",name:"password",render:({field:R})=>t(M,g({error:(o==null?void 0:o.severity)==="error",type:a?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Nova senha"},R))}),t(F,{control:i,defaultValue:"",name:"confirmPassword",render:({field:R})=>t(M,g({error:(o==null?void 0:o.severity)==="error",type:a?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirme a senha"},R))}),f(p,{display:"flex",alignItems:"center",marginY:1,children:[t(Ie,{checked:a,color:"primary",onChange:b}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]})]})}const Q=async R=>{const z=c().email,B=await K.forgetPasswordEmail({email:z});if(B!==!0)return s({severity:"error",message:B.message});await x({email:z}),e(R)},q=async R=>{const z=c().code,B=await K.forgetPasswordCheckCode({code:z});if(B!==!0)return s({severity:"error",message:B.message});e(R),s({message:"O c\xF3digo est\xE1 dentro dos padr\xF5es",severity:"success"})},I=async R=>{const at=c(),{confirmPassword:z,code:B}=at,Ee=O(at,["confirmPassword","code"]),rt=await K.forgetResetpassword(w(g({},Ee),{confirmPassword:z,code:B}));if(rt!==!0)return s({severity:"error",message:rt.message});d(w(g({},Ee),{token:B})),e(R)};return f("div",{children:[t(p,{position:"absolute",m:2,children:t(Ut,{component:U,to:"/login",color:"primary","aria-label":"Voltar",size:"small",children:t(Bt,{fontSize:"small"})})}),f(p,{className:"paper",children:[t(Ce,{className:"avatar",children:t(ke,{})}),t(A,{component:"h1",variant:"h5",children:"Mudar senha"}),t(Jr,{components:[{step:t(S,{}),label:"Insira seu email",onClick:R=>Q(R)},{step:t(v,{}),label:"Confirme o c\xF3digo",onClick:R=>q(R)},{step:t(y,{}),label:"Altere sua senha",onClick:R=>I(R)}]}),t(Xe,{message:o,children:o.message}),t(J,{loading:m||P}),t(p,{style:{position:"absolute",bottom:50},children:t(ve,{})})]})]})}function Zr(){return f(p,{className:"paper",sx:{height:"90%",justifyContent:"center",alignItems:"center"},children:[t(p,{display:"flex",justifyContent:"center",children:t(Ce,{className:"avatar",children:t(Gt,{})})}),f(A,{component:"h1",variant:"h6",children:["Email enviado com sucesso,",t("br",{}),"cheque sua caixa de entrada."]}),f(p,{sx:{display:"flex",gap:2},children:[t(H,{to:"/resendemail",component:U,children:t(V,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",children:"Enviar email novamente"})}),t(H,{to:"/login",component:U,children:t(V,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",children:"Entrar"})})]}),t(p,{style:{position:"absolute",bottom:50},children:t(ve,{})})]})}function Mt({label:r,required:e,field:a}){const x=a,{onChange:n,ref:o}=x,s=O(x,["onChange","ref"]),[i,c]=h.exports.useState(""),l=h.exports.useRef(null),u=h.exports.forwardRef(function(d,P){const v=d,{onChange:b}=v,S=O(v,["onChange"]);return t(Ve,w(g({},S),{getInputRef:P,onValueChange:y=>{b({target:{name:d.name,value:y.formattedValue}})},type:"tel",format:"(##) #####-####",mask:""}))});return h.exports.useEffect(()=>{var m;if(i){const d=(m=l.current)==null?void 0:m.children[1].children[0];d==null||d.focus()}},[i]),t(M,g({ref:l,variant:"outlined",margin:"normal",fullWidth:!0,type:"text",label:r,autoComplete:"off",required:e,onChange:m=>{c(m.target.value),n(m)},InputProps:{inputComponent:u}},s))}L().shape({firstName:E().required(),lastName:E().required(),email:E().email().required(),password:E().required(),phoneNumber:E().length(15).required()});function ea(){const[r,e]=h.exports.useState(!1),[a,n]=h.exports.useState(!1),[o,s]=h.exports.useState(),{control:i,getValues:c}=ee(),{mutate:l,isLoading:u}=Ur({onError({response:d}){n(!1),s({message:d.data.meta.cause,show:!0})},onSuccess(d){n(!0),s({message:"",show:!1})}}),x=d=>{e(!r)},m=async()=>{const d=c(),P=await K.register(d);if(P!==!0)return s({message:P.message,show:!0});if(d.password!==d.confirmPassword)return s({message:"As duas senhas n\xE3o est\xE3o iguais",show:!0});if(d.password.length<6)return s({message:"A senha deve ser maior que 6 caracteres",show:!0});const v=d,{confirmPassword:b}=v,S=O(v,["confirmPassword"]);l(S)};return h.exports.useEffect(()=>{const d=P=>{if(P.key==="Enter")return m()};return document.addEventListener("keydown",d),function(){document.removeEventListener("keydown",d)}}),t(j,{children:a?t(Zr,{}):f(p,{className:"paper",children:[t(Ce,{className:"avatar",children:t(ke,{})}),t(A,{component:"h1",variant:"h5",children:"Registrar"}),f(p,{component:"form",className:"form",method:"POST",style:{position:"relative"},children:[t(F,{control:i,defaultValue:"",name:"firstName",render:({field:d})=>t(M,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"Primeiro Nome",autoComplete:"firstName",autoFocus:!0},d))}),t(F,{control:i,defaultValue:"",name:"lastName",render:({field:d})=>t(M,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Sobrenome",autoComplete:"lastName"},d))}),t(F,{control:i,defaultValue:"",name:"email",render:({field:d})=>t(M,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email"},d))}),t(F,{name:"phoneNumber",control:i,defaultValue:"",render:({field:d})=>t(Mt,{label:"N\xFAmero de telefone",error:{message:"",show:!1},required:!0,field:d})}),t(F,{control:i,defaultValue:"",name:"password",render:({field:d})=>t(M,g({type:r?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Senha",id:"password",autoComplete:"current-password"},d))}),t(F,{control:i,defaultValue:"",name:"confirmPassword",render:({field:d})=>t(M,g({type:r?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirmar senha",autoComplete:"current-password"},d))}),f(p,{display:"flex",justifySelf:"flex-start",alignItems:"center",children:[t(Ie,{checked:r,color:"primary",onChange:x}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]}),t(V,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:m,children:"Registrar"}),f(p,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:2,children:[t(xe,{error:o}),t(J,{loading:u})]}),t(G,{container:!0,children:t(G,{item:!0,children:t(H,{component:U,to:"/login",variant:"body2",children:"Entrar"})})}),t(p,{style:{position:"absolute",bottom:25},children:t(ve,{})})]})]})})}function ta(){const[r,e]=h.exports.useState({severity:"error",message:""}),{mutate:a,isLoading:n}=Gr({onError({response:s}){e({severity:"error",message:s.data.meta.cause})},onSuccess(){e({severity:"success",message:"Email confirmado com sucesso"})}}),o=ne();return h.exports.useEffect(()=>{(async()=>{const i=new URLSearchParams(o.location.search),c=i.get("email"),l=i.get("token"),u={email:c,token:l},x=await K.confirmRegistration(u);if(x!==!0)return e({severity:"error",message:x.message});a(u)})()},[o.location.search]),t("div",{className:"paper",style:{justifyContent:"center",height:"100vh",marginTop:0,marginBottom:0},children:n?t(J,{loading:n}):f("div",{children:[t(Xe,{sx:{marginY:2},message:r,children:t(A,{fontSize:"1.3rem",component:"h1",children:r.message})}),t(H,{to:"/login",component:U,children:t(V,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",children:"Entrar"})}),t(p,{style:{position:"absolute",bottom:50},children:t(ve,{})})]})})}function ra(){const[r,e]=h.exports.useState({severity:"error",message:""}),{control:a,getValues:n}=ee(),{mutate:o,isLoading:s,isSuccess:i}=Br({onError({response:u}){e({severity:"error",message:u.data.meta.cause})},onSuccess(){e({severity:"success",message:"Email enviado com sucesso"})}}),c=ne(),l=async()=>{const u=n(),x=await K.resendRegisterEmail(u);if(x!==!0)return e({severity:"error",message:x.message});o(u)};return h.exports.useEffect(()=>{const u=x=>{if(x.key==="Enter")return l()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)}),h.exports.useEffect(()=>{if(!i)return;const u=setTimeout(()=>{c.push("/login")},5e3);return()=>clearTimeout(u)},[i]),f(p,{className:"paper",children:[t(Ce,{className:"avatar",children:t(ke,{})}),t(A,{component:"h1",variant:"h5",children:"Reenviar email de verifica\xE7\xE3o"}),f(p,{component:"form",className:"form",method:"POST",style:{position:"relative"},children:[t(F,{control:a,defaultValue:"",name:"email",render:({field:u})=>t(M,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",autoComplete:"email",autoFocus:!0},u))}),t(V,{fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:l,children:"Reenviar email de confirma\xE7\xE3o"}),f(p,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:1,children:[t(J,{loading:s}),t(Xe,{message:r,children:r.message})]}),f(G,{container:!0,children:[t(G,{item:!0,children:t(H,{component:U,to:"/login",variant:"body2",children:"Entrar"})}),t(G,{item:!0,marginX:2,children:t(ve,{})})]})]})]})}function aa(){return f(G,{container:!0,component:"main",className:"root",children:[t(Ht,{}),t(G,{item:!0,xs:!1,sm:4,md:7,className:"image"}),f(G,{item:!0,xs:12,sm:8,md:5,component:Z,elevation:6,square:!0,children:[t(_,{path:"/login",children:t(Yr,{})}),t(_,{path:"/register",children:t(ea,{})}),t(_,{path:"/forget",children:t(Xr,{})}),t(_,{path:"/confirmregistration",children:t(ta,{})}),t(_,{path:"/resendemail",children:t(ra,{})})]})]})}const me=(r,e,a)=>({label:r,icon:e,link:a});function na(){const{account:r,logout:e}=oe(),a=(r==null?void 0:r.role)==="ADMIN",n=[me("Painel",t(Xt,{}),"/panel"),me("Clientes",t(Yt,{}),"/panel/clients"),me("Produtos",t(Kt,{}),"/panel/products"),me("Conta",t(Jt,{}),"/panel/account")];function o(){const i=[me("Usu\xE1rios",t(Zt,{}),"/panel/admin/users"),me("N\xFAmeros",t(er,{}),"/panel/admin/accountties")];return t(p,{children:t(it,{sx:{display:"flex"},children:i.map((c,l)=>t(H,{to:c.link,component:U,children:f(lt,{button:!0,sx:{padding:"0.3rem 1rem !important",width:"100%"},children:[t(ct,{children:c.icon}),t(ut,{primary:c.label})]})},c.label))})})}function s(){return f(p,{role:"presentation",sx:{display:"flex",justifyContent:"space-between"},children:[t(it,{sx:{display:"flex"},children:n.map((i,c)=>t(H,{to:i.link,component:U,children:f(lt,{button:!0,sx:{padding:"0.3rem 1rem !important",width:"100%"},children:[t(ct,{children:i.icon}),t(ut,{primary:i.label})]})},i.label))}),a?t(o,{}):"",t(V,{startIcon:t(jt,{}),variant:"text",color:"error",onClick:e,sx:{padding:"0.3rem 1rem !important",width:"fit-content"},children:"Sair"})]})}return t(s,{})}function oa(r){const[e,a]=ue(!1),{account:n}=oe(),o=ne(),l=r,{children:s}=l,i=O(l,["children"]);h.exports.useEffect(()=>{async function u(){(n==null?void 0:n.role)?(n==null?void 0:n.role)===Ot.ADMIN?a.on():(a.off(),o.push("/panel")):(a.off(),o.push("/login"))}u()},[o,n==null?void 0:n.role]);function c({location:u}){return t(j,{children:e?s:""})}return t(_,w(g({},i),{children:c}))}function Re(){return t(tr,{children:t("div",{style:{position:"absolute",top:0,width:"100%"},children:t(rr,{})})})}function sa(r){const[e,a]=h.exports.useState("");return h.exports.useEffect(()=>{a(r.value)},[r.value]),t(p,{sx:{p:.5,pb:0},children:t(M,{variant:"standard",placeholder:"Pesquisar...",autoComplete:"off",value:e,onKeyDown:n=>{n.key==="Enter"&&r.handleSearch(e)},onChange:n=>a(n.currentTarget.value),InputProps:{endAdornment:f(j,{children:[t(re,{title:"Apagar","aria-label":"Apagar",size:"small",style:{visibility:e?"visible":"hidden"},onClick:r.clearSearch,children:t(ar,{fontSize:"small"})}),t(re,{title:"Pesquisar","aria-label":"Pesquisar",size:"small",onClick:()=>r.handleSearch(e),children:t(nr,{fontSize:"small"})})]})},sx:{width:{xs:1,sm:"auto"},m:n=>n.spacing(1,.5,1.5),"& .MuiSvgIcon-root":{mr:.5},"& .MuiInput-underline:before":{borderBottom:1,borderColor:"divider"},"& .MuiInput-underline:hover:before":{borderColor:"divider"}}})})}function Te(r){return f(p,{sx:{display:"flex",justifyContent:"space-between"},children:[t(or,{}),t(sa,g({},r))]})}const N=new sr;class ia{constructor(){X(this,"route",C.models.request)}async createDocument(e){return(await D.post(C.models.request,e)).data}async deleteDocument({id:e}){return(await D.delete(`${C.models.request}/${e}`)).data}async editDocument(n){var o=n,{id:e}=o,a=O(o,["id"]);return(await D.put(`${C.models.request}/${e}`,a)).data}async getDocument(e,a=""){return(await D.get(C.models.request,{params:w(g({},e),{search:a})})).data.data}}const Fe=new ia,ae="requests";function la(r,e="",a){return Se([ae,r,e],()=>Fe.getDocument(r,e),g({initialData:()=>{const n=N.getQueryData(ae);return n||{quantity:0,table:[]}},keepPreviousData:!0},a))}function ca(r){N.prefetchQuery([ae,r],()=>Fe.getDocument(r))}async function mt(){N.refetchQueries(ae)}function ua(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),mt()}}else r={onSuccess:(e,a,n)=>{mt()}};return k(Fe.createDocument,r)}async function ht(r){const[[,e]]=N.getQueriesData(ae);if(e){const a=e;a.table=e.table.filter(n=>n.id!==r),N.setQueryData(ae,a)}}function da(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),ht(n.id)}}else r={onSuccess:(e,a,n)=>{ht(a.id)}};return k(Fe.deleteDocument,r)}async function ft(r){const[[,e]]=N.getQueriesData(ae);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(ae,a)}}function ma(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),ft(l)}}else r={onSuccess:(i,c,l)=>{ft(c)}};const e=k(Fe.editDocument,r),a=e.mutate,n=e.mutateAsync,o=i=>{const x=i,{product:c,client:l}=x,u=O(x,["product","client"]);return a(u)},s=i=>{const x=i,{product:c,client:l}=x,u=O(x,["product","client"]);return n(u)};return e.mutate=o,e.mutateAsync=s,e}class ha{constructor(){X(this,"route",C.models.client)}async createDocument(e){return(await D.post(C.models.client,e)).data}async deleteDocument({id:e}){return(await D.delete(`${C.models.client}/${e}`)).data}async editDocument(n){var o=n,{id:e}=o,a=O(o,["id"]);return(await D.put(`${C.models.client}/${e}`,a)).data}async getDocument(e,a=""){return(await D.get(C.models.client,{params:w(g({},e),{search:a})})).data.data}}const Qe=new ha,ie="clients";function Ze(r,e=""){return Se([ie,r,e],()=>Qe.getDocument(r,e),{initialData(){const a=N.getQueryData(ie);return a||{quantity:25,table:[]}},keepPreviousData:!0})}async function pt(r){N.refetchQueries(ie)}function fa(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),pt(a.data)}}else r={onSuccess:(e,a,n)=>{pt(e.data)}};return k(Qe.createDocument,r)}async function gt(r){const[[,e]]=N.getQueriesData(ie);if(e){const a=e.table.filter(n=>n.id!==r);N.setQueryData(ie,a)}}function pa(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),gt(n.id)}}else r={onSuccess:(e,a,n)=>{gt(a.id)}};return k(Qe.deleteDocument,r)}async function xt(r){const[[,e]]=N.getQueriesData(ie);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(ie,a)}}function ga(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),xt(l)}}else r={onSuccess:(i,c,l)=>{xt(c)}};const e=k(Qe.editDocument,r),a=e.mutate,n=e.mutateAsync,o=i=>{const u=i,{requests:c}=u,l=O(u,["requests"]);return a(l)},s=i=>{const u=i,{requests:c}=u,l=O(u,["requests"]);return n(l)};return e.mutate=o,e.mutateAsync=s,e}class xa{constructor(){X(this,"route",C.models.product)}async createDocument(e){return(await D.post(C.models.product,e)).data}async deleteDocument({id:e}){return(await D.delete(`${C.models.product}/${e}`)).data}async editDocument(n){var o=n,{id:e}=o,a=O(o,["id"]);return(await D.put(`${C.models.product}/${e}`,a)).data}async getDocument(e,a=""){return(await D.get(C.models.product,{params:w(g({},e),{search:a})})).data.data}}const _e=new xa,le="products";function et(r,e=""){return Se([le,r,e],()=>_e.getDocument(r,e),{initialData(){const a=N.getQueryData(le);return a||{quantity:25,table:[]}},keepPreviousData:!0})}async function vt(r){N.refetchQueries(le)}function va(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),vt(a.data)}}else r={onSuccess:(e,a,n)=>{vt(e.data)}};return k(_e.createDocument,r)}async function yt(r){const[[,e]]=N.getQueriesData(le);if(e){const a=e;a.table=e.table.filter(n=>n.id!==r),N.setQueryData(le,a)}}function ya(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),yt(n.id)}}else r={onSuccess:(e,a,n)=>{yt(a.id)}};return k(_e.deleteDocument,r)}async function Et(r){const[[,e]]=N.getQueriesData(le);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(le,a)}}function Ea(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),Et(l)}}else r={onSuccess:(i,c,l)=>{Et(c)}};const e=k(_e.editDocument,r),a=e.mutate,n=e.mutateAsync,o=i=>{const u=i,{requests:c}=u,l=O(u,["requests"]);return a(l)},s=i=>{const u=i,{requests:c}=u,l=O(u,["requests"]);return n(l)};return e.mutate=o,e.mutateAsync=s,e}function Oe(r){const{api:e,id:a,editDocument:n,deleteDocument:o,validations:s}=r,{setMessage:i}=se(),[c,l]=ue(!1),u=e.getRowMode(a)==="edit",x=S=>{S.stopPropagation(),e.setRowMode(a,"edit")},m=async S=>{S.stopPropagation();const v=e.getRow(a);e.commitRowChange(a);const y=e.getRow(a);if(y===null)return;const Q=await s.editValidation(y);if(Q!==!0)return i({message:Q.message,severity:"error"});if(JSON.stringify(v)===JSON.stringify(y))return e.setRowMode(a,"view");try{const q=await n(y);e.setRowMode(a,"view"),i({message:q.message,severity:"success"})}catch(q){const{response:I}=q;e.updateRows([g({},v)]),i({message:I.data.meta.cause,severity:"error"})}},d=S=>{S.stopPropagation(),l.toggle()},P=async()=>{const S=e.getRow(a);try{const v=await s.deleteValidation({id:a});if(v!==!0)return i({message:v.message,severity:"error"});const y=await o({id:a});e.setRowMode(a,"view"),e.updateRows([{id:a,_action:"delete"}]),i({message:y.message,severity:"success"})}catch(v){const{response:y}=v;e.updateRows([g({},S)]),i({message:y.data.meta.cause,severity:"error"})}},b=S=>{S.stopPropagation(),e.setRowMode(a,"view"),e.getRow(a).isNew&&e.updateRows([{id:a,_action:"delete"}])};return u?f(j,{children:[t(re,{color:"primary",size:"small","aria-label":"save",onClick:m,children:t(ir,{fontSize:"small"})}),t(re,{color:"inherit",size:"small","aria-label":"cancel",onClick:b,children:t(lr,{fontSize:"small"})})]}):f(j,{children:[t(re,{color:"primary",size:"small","aria-label":"Editar",onClick:x,children:t(cr,{fontSize:"small"})}),t(re,{color:"inherit",size:"small","aria-label":"Deletar",onClick:d,children:t(ur,{fontSize:"small"})}),t(dr,{open:c,onClose:()=>{},children:f(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"3px solid #47474741",boxShadow:24,p:4},children:[t(A,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Voc\xEA tem certeza que quer apagar este item?"}),f(p,{display:"flex",sx:{justifyContent:"space-between"},children:[t(V,{onClick:P,color:"error",startIcon:t(mr,{color:"error"}),children:"Apagar"}),t(V,{onClick:d,color:"primary",startIcon:t(hr,{}),children:"Cancelar"})]})]})})]})}function T({params:r,value:e}){return t(fr,{title:e||(r?r.row[r.field]:""),children:t("span",{className:"table-cell-trucate",children:e||(r?r.row[r.field]:"")})})}const we=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});function Be(r){const{id:e,api:a,field:n,value:o}=r;return t(Ve,{style:{border:"none",outline:"none",fontSize:"1rem"},value:o,onValueChange:s=>{a.setEditCellValue({id:e,field:n,value:s.floatValue})},thousandSeparator:".",decimalSeparator:",",allowNegative:!1,maxLength:20})}const fe=r=>r?pr(new Date(r),"dd/MM/yyyy"):"";class wa{async create(e){const a=L().shape({expiresIn:he().required("Selecione uma data"),product_id:E().required("Selecione um produto"),client_id:E().required("Selecione um cliente"),status:E().equals(be.map(n=>n.code)).required("Selecione um status"),paidOut:$().moreThan(-1,"O valor pago deve ser maior ou igual \xE0 0 ").required("Descreva o valor pago, se n\xE3o foi pago escreva 0"),price:$().moreThan(0,"O pre\xE7o deve ser maior que 0").required("Descreva o pre\xE7o do pedido"),title:E().min(3,"O t\xEDtulo deve conter pelo menos 3 letras").max(50).required("Descreva o t\xEDtulo")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=L().shape({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),product_id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID do produto"),client_id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID do cliente"),title:E().min(3,"O t\xEDtulo precisa ter pelo menos 3 caracteres").max(50,"O t\xEDtulo apenas pode ter no m\xE1ximo 50 caracteres").required("Erro de valida\xE7\xE3o, faltou: T\xEDtulo"),status:E().equals(be.map(n=>n.code)).required("Selecione um status"),paidOut:$().moreThan(-1,"O valor pago deve ser maior ou igual \xE0 0 ").required("Descreva o valor pago, se n\xE3o foi pago escreva 0"),price:$().moreThan(0,"O pre\xE7o deve ser maior que 0").required("Descreva o pre\xE7o do pedido"),expiresIn:he().required("Erro de valida\xE7\xE3o, faltou: Expira em"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=L({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var Ge=new wa;function ba({clients:r,products:e,deleteRequest:a,editRequest:n}){return[{field:"client_id",headerName:"Cliente",type:"singleSelect",description:"Cliente que fez o pedido",flex:1,editable:!0,valueFormatter:s=>{var i;return((i=r.find(({id:c})=>c===s.value))==null?void 0:i.name)||""},renderCell:s=>t(T,{value:s.formattedValue}),valueOptions:r.map(({id:s,name:i})=>({value:s,label:i}))},{field:"title",headerName:"T\xEDtulo",description:"T\xEDtulo do pedido",editable:!0,filterable:!1,minWidth:140,flex:1,renderCell:T},{field:"product_id",headerName:"Produto",type:"singleSelect",description:"Produto escolhido pelo cliente",flex:1,editable:!0,valueFormatter:s=>{var i;return((i=e.find(({id:c})=>c===s.value))==null?void 0:i.name)||""},renderCell:s=>t(T,{value:s.formattedValue}),valueOptions:e.map(({id:s,name:i})=>({value:s,label:i}))},{field:"createdAt",headerName:"In\xEDcio",type:"date",description:"Data de cria\xE7\xE3o do pedido",hide:!0,editable:!0,flex:1,valueFormatter:s=>fe(s.value),renderCell:({formattedValue:s})=>t(T,{value:s})},{field:"expiresIn",headerName:"Final",type:"date",description:"Prazo final do pedido",flex:1,editable:!0,valueFormatter:s=>fe(s.value),renderCell:({formattedValue:s})=>t(T,{value:s})},{field:"price",headerName:"Pre\xE7o",type:"number",description:"Pre\xE7o cobrado",headerAlign:"left",align:"left",flex:1,editable:!0,renderEditCell:Be,valueFormatter:({value:s})=>we.format(Number(s)),renderCell:({formattedValue:s})=>t(T,{value:s})},{field:"paidOut",headerName:"Pago",type:"number",description:"Valor adiantado pelo cliente",headerAlign:"left",align:"left",flex:1,editable:!0,renderEditCell:Be,valueFormatter:({value:s})=>we.format(Number(s)),renderCell:({formattedValue:s})=>t(T,{value:s})},{field:"balance",headerName:"Saldo",type:"number",description:"Valor que ainda falta ser pago",headerAlign:"left",align:"left",flex:1,valueFormatter:({value:s})=>we.format(Number(s)),renderCell:({formattedValue:s})=>t(T,{value:s})},{field:"status",headerName:"Status",type:"singleSelect",description:"Condi\xE7\xE3o do pedido",flex:1,editable:!0,valueFormatter:s=>{const i=s.value,c=be.find(u=>u.code===i);return c?c.type:"A fazer"},renderCell:({formattedValue:s})=>t(T,{value:s}),valueOptions:be.map(({code:s,type:i})=>({value:s,label:i}))},{field:"actions",headerName:"A\xE7\xF5es",width:75,headerAlign:"center",align:"center",disableExport:!0,sortable:!1,filterable:!1,disableColumnMenu:!0,disableReorder:!0,renderCell:s=>t(Oe,g({validations:{deleteValidation:Ge.delete,editValidation:Ge.edit},editDocument:n,deleteDocument:a},s))}]}const Ca=Pe({palette:{primary:{main:"#1976d2"}}},De);function Sa(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),[o,s]=h.exports.useState(""),{setMessage:i}=se(),c={page:a.page,pageSize:a.pageSize},{error:l,data:u,isFetching:x}=la(c,o,{onSuccess:q=>{e(q.table),n(I=>w(g({},I),{rowCount:q.quantity}))}}),{data:m}=Ze(),{data:d}=et(),{mutateAsync:P,isLoading:b}=da(),{mutateAsync:S,isLoading:v}=ma(),y=ba({clients:(m==null?void 0:m.table)||[],products:(d==null?void 0:d.table)||[],deleteRequest:P,editRequest:S});h.exports.useEffect(()=>{!x&&ca(c),u&&e(u.table)},[a.page,a.pageSize]),h.exports.useEffect(()=>{l&&i({message:l.response.data.meta.cause,severity:"error"})},[l]);const Q=q=>{const I=new Date(q.row.expiresIn),tt=q.row.status,R=new Date;let z="",B="",Ee="";switch(I.getMonth()<R.getMonth()?B="expired_request":I.getMonth()===R.getMonth()&&(I.getDate()<R.getDate()?B="expired_request":I.getDate()===R.getDate()&&(Ee="warning_request")),tt){case W.TODO:z="status_"+W.TODO;break;case W.GRAPHIC:z="status_"+W.GRAPHIC;break;case W.DEALING:z="status_"+W.DEALING;break;case W.CANCELLED:z="status_"+W.CANCELLED;break;case W.COMPLETED:z="status_"+W.COMPLETED;break;default:z=""}return`${z} ${B} ${Ee}`};return t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:Ca,children:t(Ne,w(g({},a),{rows:r,columns:y,pagination:!0,paginationMode:"server",onPageChange:q=>n(I=>w(g({},I),{page:q})),onPageSizeChange:q=>n(I=>w(g({},I),{pageSize:q})),editMode:"row",onRowEditStart:(q,I)=>{I.defaultMuiPrevented=!0},onRowEditStop:(q,I)=>{I.defaultMuiPrevented=!0},components:{Toolbar:Te,LoadingOverlay:Re},componentsProps:{toolbar:{value:o,handleSearch:q=>s(q),clearSearch:()=>s("")}},loading:x||b||v,localeText:qe,getRowClassName:Q,disableSelectionOnClick:!0}))})})}function He({label:r,required:e,field:a}){const x=a,{onChange:n,ref:o}=x,s=O(x,["onChange","ref"]),[i,c]=h.exports.useState(""),l=h.exports.useRef(null),u=h.exports.forwardRef(function(d,P){const v=d,{onChange:b}=v,S=O(v,["onChange"]);return t(Ve,w(g({},S),{getInputRef:P,onValueChange:y=>{b({target:{name:d.name,value:y.value}})},thousandSeparator:".",decimalSeparator:",",allowNegative:!1,isNumericString:!0,maxLength:20}))});return h.exports.useEffect(()=>{var m;if(i){const d=(m=l.current)==null?void 0:m.children[1].children[1];d==null||d.focus()}},[i]),t(M,g({ref:l,variant:"outlined",margin:"normal",fullWidth:!0,type:"text",label:r,autoComplete:"off",required:e,onChange:m=>{c(m.target.value),n(m)},InputProps:{startAdornment:t(At,{position:"start",children:"R$"}),inputComponent:u}},s))}function wt({label:r,items:e,nameKey:a,idKey:n,field:o}){const[s,i]=h.exports.useState([]),[c,l]=h.exports.useState(""),u=h.exports.useRef(null);h.exports.useEffect(()=>{e&&i(e)},[e]),h.exports.useEffect(()=>{if(!e)return;const m=e.filter(d=>d[a].includes(c));i(m)},[c]);const x=m=>{const d=m.currentTarget.value;l(d),m.currentTarget.focus()};return f(Nt,{sx:{display:"flex",justifyContent:"space-between"},margin:"normal",variant:"outlined",fullWidth:!0,required:!0,children:[t(qt,{id:r,children:r}),f(Rt,w(g({labelId:r,label:r},o),{children:[t(gr,{onClick:m=>m.stopPropagation(),onKeyDown:m=>m.stopPropagation(),children:t(M,{variant:"outlined",required:!0,ref:u,fullWidth:!0,autoComplete:"off",name:"search",id:"search",value:c,onChange:x,autoFocus:!0,InputProps:{startAdornment:t(At,{position:"start",children:t(xr,{})})}})}),s.map(m=>t(Je,{onFocus:()=>{var P;const d=(P=u.current)==null?void 0:P.children[0].children[1];d==null||d.focus()},className:"searchMenu-items",value:m[n],children:f(vr,{sx:{display:"flex",justifyContent:"space-between"},children:[f("span",{children:[m[a]," "]}),"\xA0\xA0",t("span",{children:m.basePrice?f("small",{children:["Pre\xE7o base ",we.format(Number(m.basePrice))]}):""})]})},m[n]))]}))]})}function Pa({name:r,setValue:e}){const[a,n]=h.exports.useState(),[o,s]=h.exports.useState();return h.exports.useEffect(()=>{e(r,new Date),n(new Date)},[]),t(yr,{dateAdapter:Er,locale:wr,children:t(br,{onError:i=>{if(i)return s({message:"Data inv\xE1lida",show:!0})},value:a,onChange:i=>{n(i),e(r,i),s({message:"",show:!1})},renderInput:i=>t(M,w(g({},i),{margin:"normal",autoComplete:"off",required:!0,fullWidth:!0,helperText:o==null?void 0:o.message}))})})}function Da({error:r,vertical:e,horizontal:a,miliseconds:n}){const[o,s]=ue(!1);return h.exports.useEffect(()=>{r&&r.show&&s.on()},[r]),t(Le,{anchorOrigin:{vertical:e,horizontal:a},onClose:()=>s.off(),autoHideDuration:n,open:o,children:t(ge,{severity:"error",sx:{width:"100%"},children:r==null?void 0:r.message})})}function Aa(){const{control:r,setValue:e,getValues:a,reset:n}=ee(),[o,s]=h.exports.useState(),{isLoading:i,mutate:c}=ua({onError({response:m}){s({message:m.data.meta.cause,show:!0})},onSuccess(){s({message:"",show:!1})}}),{data:l}=Ze(),{data:u}=et(),x=async()=>{const m=a();m.paidOut=m.paidOut?Number(m.paidOut):0,m.price=m.price?Number(m.price):0;const d=await Ge.create(m);d===!0?(c(m),n({client_id:"",title:"",product_id:"",status:W.TODO,price:"",paidOut:"",expiresIn:m.expiresIn})):s({message:d.message,show:!0})};return h.exports.useEffect(()=>{e("status",W.TODO)},[e]),t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(Z,{sx:{minHeight:"90vh"},elevation:5,children:f(p,{padding:2,children:[t(A,{style:{fontSize:"1.4rem"},variant:"h1",component:"h1",children:"Criar pedido"}),t(p,{children:t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"})}),f(p,{children:[t(F,{name:"title",control:r,defaultValue:"",render:({field:m})=>t(M,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"T\xEDtulo",autoComplete:"off",autoFocus:!0},m))}),t(F,{name:"price",control:r,render:({field:m})=>t(He,{label:"Pre\xE7o",error:o,required:!0,field:m})}),t(F,{name:"paidOut",control:r,render:({field:m})=>t(He,{label:"Pago",error:o,required:!1,field:m})}),t(F,{name:"status",control:r,render:({field:m})=>{const b=m,{value:d}=b,P=O(b,["value"]);return f(Nt,{margin:"normal",variant:"outlined",fullWidth:!0,required:!0,sx:{display:"flex",flexDirection:"column"},children:[t(qt,{id:"status",children:"Status"}),t(Rt,w(g({defaultValue:"",labelId:"status",id:"status",label:"Status",value:d||"TODO"},P),{children:be.map(S=>t(Je,{value:S.code,children:S.type},S.type))}))]})}}),t(F,{name:"client_id",control:r,defaultValue:"",render:({field:m})=>t(wt,{label:"Cliente",items:(l==null?void 0:l.table)||[],nameKey:"name",idKey:"id",field:m})}),t(F,{name:"product_id",control:r,defaultValue:"",render:({field:m})=>t(wt,{label:"Produto",items:(u==null?void 0:u.table)||[],nameKey:"name",idKey:"id",field:m})}),t(Pa,{name:"expiresIn",setValue:e})]}),f(p,{display:"flex",gap:"5",children:[f(V,{onClick:x,color:"primary",children:["Criar",t($e,{})]}),t(J,{loading:i})]}),t(Da,{miliseconds:1500,error:o,vertical:"bottom",horizontal:"left"})]})})})}const ye={panelContainer:{display:"flex",gap:"2rem"}};function Na(){return f(p,{sx:ye.panelContainer,children:[t(Aa,{}),t(Sa,{})]})}class qa{async create(e){const a=L().shape({name:E().min(3,"O nome precisa ter pelo menos 3 caracteres").max(50).required("O nome \xE9 obrigat\xF3rio"),email:E().email("Descreva o email corretamente")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=L({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),name:E().min(3,"O nome precisa ter pelo menos 3 caracteres").max(50,"O nome apenas pode ter no m\xE1ximo 50 caracteres").required("Erro de valida\xE7\xE3o, faltou: Nome"),email:E().email("Descreva o email corretamente"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=L({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var je=new qa;function Ra(){const{control:r,getValues:e,reset:a}=ee(),[n,o]=h.exports.useState(),{isLoading:s,mutate:i}=fa({onError({response:l}){o({message:l.data.meta.cause,show:!0})},onSuccess(){o({message:"",show:!1})}});return t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(Z,{sx:{minHeight:"90vh"},elevation:5,children:f(p,{padding:2,children:[t(A,{style:{fontSize:"1.5rem"},variant:"h1",component:"h1",children:"Criar cliente"}),f(p,{children:[t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"}),t(xe,{error:n})]}),f(p,{sx:{columnGap:25},children:[t(F,{control:r,defaultValue:"",name:"name",render:({field:l})=>t(M,g({error:n?n.show:!1,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Nome do cliente",autoComplete:"off",autoFocus:!0},l))}),t(F,{control:r,defaultValue:"",name:"email",render:({field:l})=>t(M,g({variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email do cliente",autoComplete:"off"},l))}),f(V,{onClick:async()=>{const l=e(),u=await je.create(l);u===!0?(i(l),a({name:"",email:""})):o({message:u.message,show:!0})},color:"primary",children:["Criar",t($e,{})]}),t(J,{loading:s})]})]})})})}const Ta=48;function Fa({children:r}){const[e,a]=h.exports.useState(null),[n,o]=ue(!1);return f(j,{children:[t(re,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":n?"true":void 0,"aria-haspopup":"true",onClick:c=>{r.length!==0&&(a(c.currentTarget),o.on())},children:t(Cr,{})}),t(Sr,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:e,open:n,onClose:()=>{a(null),o.off()},PaperProps:{style:{maxHeight:Ta*4.5,width:"20ch"}},children:r})]})}function Oa({deleteClient:r,editClient:e}){return[{field:"name",headerName:"Cliente",description:"Nome do cliente",filterable:!1,editable:!0,flex:1,renderCell:T},{field:"email",headerName:"Email",description:"Email do cliente",editable:!0,flex:1,renderCell:T},{field:"requests",headerName:"Pedidos",description:"Pedidos do cliente",align:"right",filterable:!1,flex:1,valueFormatter:n=>{const o=n.value;let s="";return o==null||o.forEach((i,c)=>{o[c].title===o[o.length-1].title?s+=i.title:s+=i.title+", "}),s},renderCell:n=>{var o,s;return t(Fa,{children:(s=(o=n==null?void 0:n.row)==null?void 0:o.requests)==null?void 0:s.map(i=>t(Je,{children:t(T,{value:i.title})},i.id))})}},{field:"createdAt",headerName:"Adicionado em",type:"date",editable:!0,valueFormatter:n=>fe(n.value),renderCell:({formattedValue:n})=>t(T,{value:n}),description:"Data de cria\xE7\xE3o do cliente",flex:1},{field:"actions",headerName:"A\xE7\xF5es",headerAlign:"center",align:"center",width:75,sortable:!1,filterable:!1,disableExport:!0,disableColumnMenu:!0,disableReorder:!0,renderCell:n=>t(Oe,g({validations:{deleteValidation:je.delete,editValidation:je.edit},editDocument:e,deleteDocument:r},n))}]}const Ma=Pe({palette:{primary:{main:"#1976d2"}}},De);function La(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),[o,s]=h.exports.useState(""),{setMessage:i}=se(),c={page:a.page,pageSize:a.pageSize},{data:l,isFetching:u,error:x}=Ze(c,o),{mutateAsync:m,isLoading:d}=pa(),{mutateAsync:P,isLoading:b}=ga(),S=Oa({deleteClient:m,editClient:P});return h.exports.useEffect(()=>{!l||(e(l.table),n(v=>w(g({},v),{rowCount:l.quantity})))},[l]),h.exports.useEffect(()=>{x&&i({message:x.response.data.meta.cause,severity:"error"})},[x]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:Ma,children:t(Ne,w(g({},a),{rows:r,columns:S,pagination:!0,paginationMode:"server",onPageChange:v=>n(y=>w(g({},y),{page:v})),onPageSizeChange:v=>n(y=>w(g({},y),{pageSize:v})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(v,y)=>{y.defaultMuiPrevented=!0},onRowEditStop:(v,y)=>{y.defaultMuiPrevented=!0},components:{Toolbar:Te,LoadingOverlay:Re},componentsProps:{toolbar:{value:o,handleSearch:v=>s(v),clearSearch:()=>s("")}},loading:u||d||b,localeText:qe}))})})}function ka(){return t(j,{children:f(p,{sx:ye.panelContainer,children:[t(Ra,{}),t(La,{})]})})}class Ia{async create(e){const a=L().shape({basePrice:$().strict().positive("O pre\xE7o base deve ser maior do que 0").required("Descreva o pre\xE7o base"),name:E().min(3,"O nome deve conter pelo menos 3 letras").max(50,"O limite do nome \xE9 50 letras").required("O nome \xE9 obrigat\xF3rio")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=L({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),name:E().min(3,"O nome precisa ter pelo menos 3 caracteres").max(50,"O nome apenas pode ter no m\xE1ximo 50 caracteres").required("Erro de valida\xE7\xE3o, faltou: Nome"),basePrice:$().strict().positive().required("Erro de valida\xE7\xE3o, faltou: Pre\xE7o Base"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=L({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var Ye=new Ia;function Va(){const{getValues:r,reset:e,control:a}=ee(),[n,o]=h.exports.useState(),{isLoading:s,mutate:i}=va({onError({response:l}){o({message:l.data.meta.cause,show:!0})},onSuccess(){o({message:"",show:!1})}});return t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(Z,{sx:{minHeight:"90vh"},elevation:5,children:f(p,{padding:2,children:[t(A,{style:{fontSize:"1.5rem"},variant:"h1",component:"h1",children:"Criar produto"}),f(p,{children:[t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"}),t(xe,{error:n})]}),f(p,{sx:{gridColumnGap:25},children:[t(F,{name:"name",control:a,defaultValue:"",render:({field:l})=>t(M,g({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:n?n.show:!1,label:"Nome do produto",autoComplete:"off",autoFocus:!0},l))}),t(F,{name:"basePrice",control:a,defaultValue:"",render:({field:l})=>t(He,{label:"Pre\xE7o base",error:n,required:!0,field:l})}),f(p,{display:"flex",gap:"5",children:[f(V,{onClick:async()=>{const l=r();l.basePrice=+l.basePrice;const u=await Ye.create(l);u===!0?(i(l),e({name:"",basePrice:""})):o({message:u.message,show:!0})},color:"primary",children:["Criar",t($e,{})]}),t(J,{loading:s})]})]})]})})})}function $a({deleteProduct:r,editProduct:e}){return[{field:"name",headerName:"Produto",flex:1,filterable:!1,editable:!0,renderCell:T},{field:"basePrice",headerName:"Pre\xE7o base R$",type:"number",align:"left",headerAlign:"left",flex:1,editable:!0,valueFormatter:({value:n})=>we.format(Number(n)),renderEditCell:Be,renderCell:({formattedValue:n})=>t(T,{value:n})},{field:"createdAt",headerName:"Adicionado em",valueFormatter:n=>fe(n.value),renderCell:({formattedValue:n})=>t(T,{value:n}),type:"date",flex:1,editable:!0},{field:"actions",headerName:"A\xE7\xF5es",align:"center",headerAlign:"center",width:75,sortable:!1,filterable:!1,disableExport:!0,disableColumnMenu:!0,disableReorder:!0,renderCell:n=>t(Oe,g({validations:{deleteValidation:Ye.delete,editValidation:Ye.edit},editDocument:e,deleteDocument:r},n))}]}const Qa=Pe({palette:{primary:{main:"#1976d2"}}},De);function _a(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),[o,s]=h.exports.useState(""),{setMessage:i}=se(),c={page:a.page,pageSize:a.pageSize},{data:l,isFetching:u,error:x}=et(c,o),{mutateAsync:m,isLoading:d}=ya(),{mutateAsync:P,isLoading:b}=Ea(),S=$a({deleteProduct:m,editProduct:P});return h.exports.useEffect(()=>{!l||(e(l.table),n(v=>w(g({},v),{rowCount:l.quantity})))},[l]),h.exports.useEffect(()=>{x&&i({message:x.response.data.meta.cause,severity:"error"})},[x]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:Qa,children:t(Ne,w(g({},a),{rows:r,columns:S,pagination:!0,paginationMode:"server",onPageChange:v=>n(y=>w(g({},y),{page:v})),onPageSizeChange:v=>n(y=>w(g({},y),{pageSize:v})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(v,y)=>{y.defaultMuiPrevented=!0},onRowEditStop:(v,y)=>{y.defaultMuiPrevented=!0},components:{Toolbar:Te,LoadingOverlay:Re},componentsProps:{toolbar:{value:o,handleSearch:v=>s(v),clearSearch:()=>s("")}},loading:u||d||b,localeText:qe}))})})}function za(){return f(p,{sx:ye.panelContainer,children:[t(Va,{}),t(_a,{})]})}function Wa(){const[r,e]=h.exports.useState(!0),[a,n]=h.exports.useState({first:"",last:""}),[o,s]=h.exports.useState({message:"",show:!1,severity:"success"}),{setAccount:i,account:c}=oe(),{isLoading:l,mutate:u}=Wr({onError({response:m}){n({first:c.firstName,last:c.lastName}),s({message:m.data.meta.cause,show:!0,severity:"error"})},onSuccess(m){i({email:c.email,firstName:a.first,lastName:a.last,role:c.role}),s({message:m.message,show:m.data,severity:"success"}),e(!0)}});h.exports.useEffect(()=>{n({first:c.firstName,last:c.lastName})},[]);const x=async()=>{const m={firstName:a.first,lastName:a.last};if(m.firstName===c.firstName&&m.lastName===c.lastName)return;const d=await K.changeNames(m);d===!0?u(m):s({message:d.message,show:!0,severity:"error"})};return t(j,{children:f(p,{sx:w(g({},ye.panelContainer),{height:"90vh",justifyContent:"center",alignItems:"center"}),children:[f(p,{display:"grid",gap:5,sx:{height:"80%",width:"90%",padding:3,gridTemplateColumns:"1fr 1fr"},children:[f(Z,{sx:{padding:3},elevation:3,children:[f(p,{sx:{marginBottom:3},children:[t(A,{variant:"h4",gutterBottom:!0,component:"div",children:"Conta"}),f("div",{children:[t(A,{variant:"subtitle1",gutterBottom:!0,component:"div",children:"Nome:"}),f(A,{children:[c.firstName," ",c.lastName]})]})]}),f(p,{children:[t(A,{variant:"subtitle1",gutterBottom:!0,component:"div",children:"Email:"}),t(A,{children:c.email})]})]}),f(Z,{sx:{padding:3,position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-between"},elevation:3,children:[f(p,{children:[t(p,{sx:{position:"absolute",top:0,right:0,transform:"translate(50%, -50%)"},children:t(re,{onClick:()=>e(!r),size:"large",children:r?t(Pr,{fontSize:"large"}):t(Dr,{fontSize:"large"})})}),t(M,{variant:"outlined",margin:"normal",disabled:r,required:!0,fullWidth:!0,defaultValue:c.firstName,onChange:m=>n(d=>w(g({},d),{first:m.target.value})),name:"firstName",label:"Primeiro nome",autoComplete:"off",autoFocus:!0}),t(M,{variant:"outlined",margin:"normal",disabled:r,required:!0,fullWidth:!0,defaultValue:c.lastName,onChange:m=>n(d=>w(g({},d),{last:m.target.value})),name:"lastName",label:"\xDAltimo nome",autoComplete:"off",autoFocus:!0}),f(p,{sx:{display:"flex",justifyContent:"space-between"},children:[t(V,{onClick:x,disabled:r,color:"primary",children:"Salvar altera\xE7\xF5es"}),t(V,{onClick:()=>{n({first:c.firstName,last:c.lastName}),e(!0)},disabled:r,color:"error",children:"Cancelar"})]})]}),t(p,{children:t(V,{disabled:r,color:"primary",to:"/panel/account/changepassword",component:U,children:"Mudar senha"})})]})]}),t(p,{sx:{position:"absolute"},children:t(J,{loading:l})}),t(Le,{open:o.show,onClose:()=>s({message:"",show:!1,severity:"error"}),autoHideDuration:5e3,children:t(ge,{severity:o.severity,children:o.message})})]})})}function Ua({account:r}){const{getValues:e,control:a}=ee(),[n,o]=h.exports.useState(),[s,i]=h.exports.useState(),[c,l]=h.exports.useState(!1),u=ne(),{mutate:x}=k(te.Auth.resetPassword,{onError({response:d}){o({message:d.data.meta.cause,show:!0}),i({message:"",show:!1})},onSuccess(d){i({message:d.message,show:!0}),setTimeout(()=>{u.push("/panel")},1e3),o(Qr)}}),m=async()=>{const{password:d,confirmPassword:P}=e(),b=await K.changePassword({password:d,confirmPassword:P});b===!0?x({email:r.email,password:d}):o({message:b.message,show:!0})};return t(p,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"90vh"},component:"form",className:"form",method:"POST",children:f(Z,{sx:{padding:3},elevation:3,children:[t(p,{mt:3,children:t(A,{variant:"subtitle1",children:"Trocar senha"})}),t(F,{control:a,defaultValue:"",name:"password",render:({field:d})=>t(M,g({error:n?n.show:!1,type:c?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Nova senha"},d))}),t(F,{control:a,defaultValue:"",name:"confirmPassword",render:({field:d})=>t(M,g({error:n?n.show:!1,type:c?"text":"password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirme a senha"},d))}),t(xe,{error:n}),t(Le,{open:s==null?void 0:s.show,autoHideDuration:6e3,children:t(ge,{severity:"success",sx:{width:"100%"},children:s==null?void 0:s.message})}),f(p,{display:"flex",alignItems:"center",marginY:1,children:[t(Ie,{checked:c,color:"primary",onChange:()=>{l(!c)}}),t(A,{variant:"subtitle2",children:"Mostrar senha"})]}),t(V,{onClick:m,color:"primary",children:"Trocar"})]})})}class Ba{async create(e){const a=L().shape({phoneNumber:E().phone("BR",void 0,"O n\xFAmero n\xE3o est\xE1 dentro dos padr\xF5es")});try{return await a.validate(e),!0}catch(n){return n}}async edit(e){const a=L({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID"),phoneNumber:E().phone("BR",void 0,"O n\xFAmero n\xE3o est\xE1 dentro dos padr\xF5es").required("Descreva o n\xFAmero"),createdAt:he().required("Erro de valida\xE7\xE3o, faltou: Criado em")});try{return await a.validate(e),!0}catch(n){return n}}async delete(e){const a=L({id:$().positive().required("Erro de valida\xE7\xE3o, faltou: ID")});try{return await a.validate(e),!0}catch(n){return n}}}var Ke=new Ba;class Ga{constructor(){X(this,"User",{route:C.admin.user,async edit(n){var o=n,{id:e}=o,a=O(o,["id"]);return(await D.put(`${C.admin.user}/${e}`,a)).data},async delete({id:e}){return(await D.delete(`${C.admin.user}/${e}`)).data},async get(e,a=""){return(await D.get(C.admin.user,{params:w(g({},e),{search:a})})).data.data}});X(this,"AccountTie",{route:C.admin.accountTie,async create(e){return(await D.post(C.admin.accountTie,e)).data},async edit(n){var o=n,{id:e}=o,a=O(o,["id"]);return(await D.put(`${C.admin.accountTie}/${e}`,a)).data},async delete({id:e}){return(await D.delete(`${C.admin.accountTie}/${e}`)).data},async get(e,a=""){return(await D.get(C.admin.accountTie,{params:w(g({},e),{search:a})})).data.data}})}}const de=new Ga,ce="admin-accountie";function Lt(r,e=""){return Se([ce,r,e],()=>de.AccountTie.get(r,e),{initialData(){const a=N.getQueryData(ce);return a||{quantity:25,table:[]}},keepPreviousData:!0})}async function bt(){N.refetchQueries(ce)}function Ha(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),bt()}}else r={onSuccess:(e,a,n)=>{bt()}};return k(de.AccountTie.create,r)}async function Ct(r){const[[,e]]=N.getQueriesData(ce);if(e){const a=e;a.table=e.table.filter(n=>n.id!==r),N.setQueryData(ce,a)}}function ja(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),Ct(n.id)}}else r={onSuccess:(e,a,n)=>{Ct(a.id)}};return k(de.AccountTie.delete,r)}async function St(r){const[[,e]]=N.getQueriesData(ce);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(ce,a)}}function Ya(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),St(l)}}else r={onSuccess:(i,c,l)=>{St(c)}};const e=k(de.AccountTie.edit,r),a=e.mutate,n=e.mutateAsync,o=i=>{const u=i,{account:c}=u,l=O(u,["account"]);return a(l)},s=i=>{const u=i,{account:c}=u,l=O(u,["account"]);return n(l)};return e.mutate=o,e.mutateAsync=s,e}function Ka(){const{getValues:r,reset:e,control:a}=ee(),[n,o]=h.exports.useState(),{isLoading:s,mutate:i}=Ha({onError({response:l}){o({message:l.data.meta.cause,show:!0})},onSuccess(){o({message:"",show:!1})}});return t(p,{sx:{minWidth:"20rem",maxWidth:"30rem",width:"20vw"},children:t(Z,{sx:{minHeight:"90vh"},elevation:5,children:f(p,{padding:2,children:[t(A,{style:{fontSize:"1.5rem"},variant:"h1",component:"h1",children:"Criar n\xFAmero"}),f(p,{children:[t(A,{variant:"caption",display:"block",children:"Todos os campos com * s\xE3o obrigat\xF3rios"}),t(xe,{error:n})]}),f(p,{sx:{gridColumnGap:25},children:[t(F,{name:"phoneNumber",control:a,defaultValue:"",render:({field:l})=>t(Mt,{label:"N\xFAmero de telefone",error:n,required:!0,field:l})}),f(p,{display:"flex",gap:"5",children:[f(V,{onClick:async()=>{const l=r(),u=await Ke.create(l);u===!0?(i(l),e({phoneNumber:""})):o({message:u.message,show:!0})},color:"primary",children:["Criar",t($e,{})]}),t(J,{loading:s})]})]})]})})})}function Ja(r){const{id:e,api:a,field:n,value:o}=r;return t(Ve,{style:{border:"none",outline:"none",fontSize:"1rem"},value:o,onValueChange:s=>{a.setEditCellValue({id:e,field:n,value:s.formattedValue})},type:"tel",format:"(##) #####-####",mask:""})}function Xa({deleteAccountTie:r,editAccountTie:e}){return[{field:"phoneNumber",headerName:"N\xFAmero de telefone",flex:1,filterable:!1,editable:!0,renderCell:T,renderEditCell:Ja,headerAlign:"left",align:"left"},{field:"accountName",headerName:"Nome",description:"Nome do usu\xE1rio vinculado a este n\xFAmero",flex:1,renderCell:T},{field:"accountEmail",headerName:"Email",description:"Email do usu\xE1rio vinculado a este n\xFAmero",flex:1,renderCell:T},{field:"createdAt",headerName:"Adicionado em",valueFormatter:n=>fe(n.value),renderCell:({formattedValue:n})=>t(T,{value:n}),type:"date",flex:1,editable:!0},{field:"actions",headerName:"A\xE7\xF5es",width:75,headerAlign:"center",align:"center",filterable:!1,disableExport:!0,sortable:!1,disableColumnMenu:!0,disableReorder:!0,renderCell:n=>t(Oe,g({validations:{deleteValidation:Ke.delete,editValidation:Ke.edit},editDocument:e,deleteDocument:r},n))}]}const Za=Pe({palette:{primary:{main:"#1976d2"}}},De);function en(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),[o,s]=h.exports.useState(""),{setMessage:i}=se(),c={page:a.page,pageSize:a.pageSize},{data:l,isFetching:u,error:x}=Lt(c,o),{mutateAsync:m,isLoading:d}=ja(),{mutateAsync:P,isLoading:b}=Ya(),S=Xa({deleteAccountTie:m,editAccountTie:P});return h.exports.useEffect(()=>{if(!l)return;const v=l.table.map(q=>{var I=q,{account:y}=I,Q=O(I,["account"]);return g({accountName:`${y.firstName}  ${y.lastName}`,accountEmail:y.email},Q)});e(v),n(y=>w(g({},y),{rowCount:l.quantity}))},[l]),h.exports.useEffect(()=>{x&&i({message:x.response.data.meta.cause,severity:"error"})},[x]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:Za,children:t(Ne,w(g({},a),{rows:r,columns:S,pagination:!0,paginationMode:"server",onPageChange:v=>n(y=>w(g({},y),{page:v})),onPageSizeChange:v=>n(y=>w(g({},y),{pageSize:v})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(v,y)=>{y.defaultMuiPrevented=!0},onRowEditStop:(v,y)=>{y.defaultMuiPrevented=!0},components:{Toolbar:Te,LoadingOverlay:Re},componentsProps:{toolbar:{value:o,handleSearch:v=>s(v),clearSearch:()=>s("")}},loading:u||d||b,localeText:qe}))})})}function tn(){return t(j,{children:f(p,{sx:ye.panelContainer,children:[t(Ka,{}),t(en,{})]})})}function rn({accountTies:r,deleteUser:e,editUser:a}){return[{field:"firstName",headerName:"Nome",filterable:!1,flex:1,renderCell:T},{field:"lastName",headerName:"Sobrenome",filterable:!1,flex:1,renderCell:T},{field:"email",headerName:"Email",flex:1,renderCell:T},{field:"accountTie_id",headerName:"V\xEDnculo",type:"singleSelect",flex:1,editable:!0,valueFormatter:o=>{var s;return((s=r.find(({id:i})=>i===o.value))==null?void 0:s.phoneNumber)||""},renderCell:o=>t(T,{value:o.formattedValue}),valueOptions:o=>r.filter(i=>{var c;if(!i.account||((c=o.row)==null?void 0:c.accountTie_id)===i.id)return i}).map(i=>({value:i.id,label:i.phoneNumber}))},{field:"confirmedEmail",headerName:"Confirmou email",flex:1,renderCell:o=>t(T,{value:o.formattedValue}),valueFormatter:({value:o})=>Boolean(o)?"Confirmado":"N\xE3o confirmado"},{field:"createdAt",headerName:"Adicionado em",type:"date",flex:1,valueFormatter:o=>fe(o.value),renderCell:o=>t(T,{value:o.formattedValue})},{field:"role",headerName:"Cargo",type:"singleSelect",description:"Condi\xE7\xE3o do pedido",flex:1,editable:!0,renderCell:o=>t(T,{value:o.formattedValue}),valueFormatter:({value:o})=>{const s=Ue.find(i=>i.code===o);return s==null?void 0:s.type},valueOptions:Ue.map(({code:o,type:s})=>({value:o,label:s}))},{field:"actions",headerName:"A\xE7\xF5es",headerAlign:"center",align:"center",width:75,sortable:!1,filterable:!1,disableColumnMenu:!0,disableReorder:!0,renderCell:o=>t(Oe,g({validations:{deleteValidation:K.delete,editValidation:K.edit},editDocument:a,deleteDocument:e},o))}]}const pe="admin-user";function an(r,e=""){return Se([pe,r,e],()=>de.User.get(r,e),{initialData(){const a=N.getQueryData(pe);return a||{quantity:25,table:[]}},keepPreviousData:!0})}async function Pt(r){const[[,e]]=N.getQueriesData(pe);if(e){const a=e.table.filter(n=>n.id!==r);N.setQueryData(pe,a)}}function nn(r){if(r){const e=r.onSuccess;r.onSuccess=(a,n,o)=>{e&&e(a,n,o),Pt(n.id)}}else r={onSuccess:(e,a,n)=>{Pt(a.id)}};return k(de.User.delete,r)}async function Dt(r){const[[,e]]=N.getQueriesData(pe);if(e){const a=e;a.table=e.table.map(n=>n.id===r.id?r:n),N.setQueryData(pe,a)}}function on(r){if(r){const i=r.onSuccess;r.onSuccess=(c,l,u)=>{i&&i(c,l,u),Dt(l)}}else r={onSuccess:(i,c,l)=>{Dt(c)}};const e=k(de.User.edit,r),a=e.mutate,n=e.mutateAsync,o=i=>{const{id:c,role:l,accountTie_id:u}=i;return a({id:c,role:l,accountTie_id:u})},s=i=>{const{id:c,role:l,accountTie_id:u}=i;return n({id:c,role:l,accountTie_id:u})};return e.mutate=o,e.mutateAsync=s,e}const sn=Pe({palette:{primary:{main:"#1976d2"}}},De);function ln(){const[r,e]=h.exports.useState([]),[a,n]=h.exports.useState({page:0,pageSize:25,rowCount:0}),[o,s]=h.exports.useState(""),{setMessage:i}=se(),c={page:a.page,pageSize:a.pageSize},{data:l,refetch:u}=Lt(),{data:x,isFetching:m,error:d}=an(c,o),{mutateAsync:P,isLoading:b}=nn(),{mutateAsync:S,isLoading:v}=on({onSuccess:()=>u()}),y=rn({accountTies:(l==null?void 0:l.table)||[],deleteUser:P,editUser:S});return h.exports.useEffect(()=>{!x||(e(x.table),n(Q=>w(g({},Q),{rowCount:x.quantity})))},[x]),h.exports.useEffect(()=>{d&&i({message:d.response.data.meta.cause,severity:"error"})},[d]),t(p,{height:"90vh",width:"100%",sx:{flexGrow:3},children:t(Ae,{theme:sn,children:t(Ne,w(g({},a),{rows:r,columns:y,pagination:!0,paginationMode:"server",onPageChange:Q=>n(q=>w(g({},q),{page:Q})),onPageSizeChange:Q=>n(q=>w(g({},q),{pageSize:Q})),disableSelectionOnClick:!0,editMode:"row",onRowEditStart:(Q,q)=>{q.defaultMuiPrevented=!0},onRowEditStop:(Q,q)=>{q.defaultMuiPrevented=!0},components:{Toolbar:Te,LoadingOverlay:Re},componentsProps:{toolbar:{value:o,handleSearch:Q=>s(Q),clearSearch:()=>s("")}},loading:m||b||v,localeText:qe}))})})}function cn(){return t(j,{children:t(p,{sx:ye.panelContainer,children:t(ln,{})})})}function un(){const{account:r}=oe();return f(p,{children:[t(na,{}),t(_,{path:"/panel/account/changepassword",exact:!0,children:t(Ua,{account:r})}),t(_,{path:"/panel",exact:!0,children:t(Na,{})}),t(_,{path:"/panel/clients",exact:!0,children:t(ka,{})}),t(_,{path:"/panel/products",exact:!0,children:t(za,{})}),t(_,{path:"/panel/account",exact:!0,children:t(Wa,{})}),f(oa,{path:"/panel/admin",children:[t(_,{path:"/panel/admin/accountties",children:t(tn,{})}),t(_,{path:"/panel/admin/users",children:t(cn,{})})]})]})}function dn(){const{account:r}=oe();return t(Z,{style:{height:"100vh",marginTop:0,marginBottom:0},children:f(p,{style:{height:"100%"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[t(A,{variant:"h4",children:"404"}),t(A,{variant:"subtitle1",children:"Page Not Found | 404"}),t(V,{color:"secondary","aria-label":"home",href:r?"/panel":"/login",children:t(Ar,{})})]})})}function mn(){const r=ne(),{account:e}=oe(),{message:a}=se();return h.exports.useEffect(()=>{e.firstName&&r.push("/panel")},[e]),f("div",{className:"App",children:[f(Nr,{children:[t(_,{path:"/",exact:!0,children:t(H,{component:U,to:"/login",children:"Login"})}),t($r,{path:"/panel",children:t(_,{path:["/panel","/panel/clients","/panel/products","/panel/account/changepassword","/panel/account"],component:un})}),t(_,{path:["/login","/register","/forget","/confirmregistration","/resendemail"],component:aa}),t(_,{path:"*",component:dn})]}),t(Mr,{message:a,vertical:"bottom",horizontal:"center",children:a.message})]})}qr.render(t(Rr.StrictMode,{children:t(Tr,{client:N,children:t(Fr,{children:t(Ir,{children:t(Vr,{children:t(mn,{})})})})})}),document.getElementById("root"));
